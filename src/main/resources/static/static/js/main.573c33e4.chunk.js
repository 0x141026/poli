(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(80)},47:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),l=a.n(o),s=a(2),i=a(3),c=a(5),u=a(4),d=a(6),h=(a(47),a(81)),m=a(82),p=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Overview"),r.a.createElement("h5",null,"Number of data sources"),r.a.createElement("h5",null,"Number of dashboards"))}}]),t}(n.Component),f=a(10),v=a.n(f),b=a(17),E=a(15),g=a(8),y=a.n(g),w=function(){var e=Object(b.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("/ws/jdbcdatasource");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={jdbcDataSources:[],showEditPanel:!1,id:null,name:"",connectionUrl:"",username:"",password:"",type:"",ping:""},a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(E.a)({},r,n))},a.save=function(e){e.preventDefault();var t={connectionUrl:a.state.connectionUrl,username:a.state.username,password:a.state.password,name:a.state.name,type:a.state.password,ping:a.state.ping};y.a.post("/ws/jdbcdatasource",t).then(function(e){a.initData()})},a.update=function(e){console.log("update",e),y.a.put("/ws/jdbcdatasource",e).then(function(e){a.initData()})},a.delete=function(e){console.log("delete",e),y.a.delete("/ws/jdbcdatasource/"+e).then(function(e){a.initData()})},a.ping=function(e){y.a.get("/ws/jdbcdatasource/ping/".concat(e)).then(function(e){console.log("ping",e.data)})},a.clearEditPanel=function(){a.setState({id:null,connectionUrl:"",username:"",password:"",name:"",type:"",ping:""})},a.showEditPanel=function(e){null!==e?a.setState({id:e.id,connectionUrl:e.connectionUrl,username:e.username,password:e.password,name:e.name,type:e.type,ping:e.ping}):a.clearEditPanel(),a.setState({showEditPanel:!0})},a.showDeletePanel=function(){},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(){var e=Object(b.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,this.setState({jdbcDataSources:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.showEditPanel?"right-drawer display-block":"right-drawer display-none",a=this.state.jdbcDataSources.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.connectionUrl),r.a.createElement("td",null,t.type),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.ping),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.showEditPanel(t)}},"update")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.delete(t.id)}},"delete")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.ping(t.id)}},"ping")))}),n=null===this.state.id?"New":"Update";return r.a.createElement("div",null,r.a.createElement("h1",null,"Data Sources"),r.a.createElement("div",null,r.a.createElement("h2",null,"Table"),r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,a))),r.a.createElement("button",{onClick:function(){return e.showEditPanel(null)}},"Add"),r.a.createElement("div",{className:t},r.a.createElement("h3",null,n),r.a.createElement("button",{onClick:function(){return e.setState({showEditPanel:!1})}},"Close"),r.a.createElement("form",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),r.a.createElement("label",null,"Connection Url"),r.a.createElement("textarea",{row:"3",type:"text",name:"connectionUrl",value:this.state.connectionUrl,onChange:this.handleInputChange}),r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChange}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),r.a.createElement("label",null,"Type"),r.a.createElement("input",{type:"text",name:"type",value:this.state.type,onChange:this.handleInputChange}),r.a.createElement("label",null,"Ping"),r.a.createElement("input",{type:"text",name:"ping",value:this.state.ping,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.save},"Save"),r.a.createElement("button",{onClick:this.ping},"Ping"))))}}]),t}(n.Component),S=a(84),C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={dashboards:[],showEditPanel:!1,name:""},a.fetchBoards=function(){y.a.get("/ws/dashboard").then(function(e){var t=e.data;a.setState({dashboards:t})})},a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(E.a)({},r,n))},a.save=function(){var e={name:a.state.name};y.a.post("/ws/dashboard",e).then(function(e){var t=e.data;a.props.history.push("/dashboard/edit/".concat(t))})},a.update=function(e){a.props.history.push("/dashboard/edit/".concat(e))},a.delete=function(e){console.log("delete",e),y.a.delete("/ws/dashboard/"+e).then(function(e){a.fetchBoards()})},a.jump=function(){a.props.history.push("/overview")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchBoards()}},{key:"render",value:function(){var e=this,t=this.state.showEditPanel?"right-drawer display-block":"right-drawer display-none",a=this.state.dashboards.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.update(t.id)}},"update")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.delete(t.id)}},"delete")))});return r.a.createElement("div",null,"Board",r.a.createElement("button",{onClick:this.jump},"Overview"),r.a.createElement("button",{onClick:function(){return e.setState({showEditPanel:!0})}},"Add"),r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,a)),r.a.createElement("div",{className:t},r.a.createElement("div",null,"New dashboard"),r.a.createElement("button",{onClick:function(){return e.setState({showEditPanel:!1})}},"Close"),r.a.createElement("button",{onClick:this.save},"Save"),r.a.createElement("form",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}))))}}]),t}(n.Component),M=Object(S.a)(C),D=a(20),k=a.n(D),x=(a(27),a(28),a(16)),N=(a(21),a(11)),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMouseDown=function(e){e.preventDefault();for(var t=l.a.findDOMNode(Object(N.a)(Object(N.a)(a))).parentNode,n=e.clientX-t.offsetLeft,r=e.clientY-t.offsetTop,o=document.getElementsByClassName("grid-box"),s=0;s<o.length;s++)o[s].style.zIndex=2;t.style.zIndex=3;var i=t.ownerDocument;i.addEventListener("mouseup",a.onMouseUp),i.addEventListener("mousemove",a.onMouseMove),a.setState({xOffset:n,yOffset:r}),a.props.onMouseDown("drag")},a.onMouseUp=function(e){e.preventDefault();var t=l.a.findDOMNode(Object(N.a)(Object(N.a)(a)));if(t){var n=t.ownerDocument;n.removeEventListener("mousedown",a.onMouseDown),n.removeEventListener("mouseup",a.onMouseUp),n.removeEventListener("mousemove",a.onMouseMove)}a.props.onMouseUp()},a.onMouseMove=function(e){if(console.log("GridDraggable onMouseMove",e),e.preventDefault(),"drag"===a.props.mode){var t=l.a.findDOMNode(Object(N.a)(Object(N.a)(a))).parentNode,n=e.clientX-a.state.xOffset,r=e.clientY-a.state.yOffset,o=t.parentNode,s=o.clientWidth,i=o.clientHeight,c=parseInt(t.style.width,10)+4,u=parseInt(t.style.height,10)+4;n<0&&(n=0),r<0&&(r=0),n+c>s&&(n=s-c),r+u>i&&(r=i-u),n=5*Math.floor(n/5),r=5*Math.floor(r/5),t.style.left=n+"px",t.style.top=r+"px"}},a.state={xOffset:0,yOffset:0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){var e=l.a.findDOMNode(this);if(e){var t=e.ownerDocument;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"grid-draggable",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp})}}]),t}(r.a.Component),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMouseDown=function(e){console.log("onMouseDown",e),e.preventDefault();var t=l.a.findDOMNode(Object(N.a)(Object(N.a)(a))),n=e.clientX,r=e.clientY,o=t.ownerDocument;o.addEventListener("mouseup",a.onMouseUp),o.addEventListener("mousemove",a.onMouseMove),a.setState({xOffset:n,yOffset:r}),a.props.onMouseDown("resize")},a.onMouseUp=function(e){e.preventDefault();var t=l.a.findDOMNode(Object(N.a)(Object(N.a)(a)));if(t){var n=t.ownerDocument;n.removeEventListener("mousedown",a.onMouseDown),n.removeEventListener("mouseup",a.onMouseUp),n.removeEventListener("mousemove",a.onMouseMove)}a.props.onMouseUp()},a.onMouseMove=function(e){console.log("GridResizer onMouseMove",e),e.preventDefault();var t=l.a.findDOMNode(Object(N.a)(Object(N.a)(a))).parentNode,n=parseInt(t.style.width,10),r=parseInt(t.style.height,10),o=e.clientX-a.state.xOffset,s=e.clientY-a.state.yOffset;t.style.width=Math.floor(n+o)+"px",t.style.height=Math.floor(r+s)+"px";var i=e.clientX,c=e.clientY;a.setState({xOffset:i,yOffset:c})},a.state={xOffset:0,yOffset:0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){var e=l.a.findDOMNode(this);if(e){var t=e.ownerDocument;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"grid-resizable",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp})}}]),t}(r.a.Component),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onMouseDown=function(e){console.log("GridItem onMouseDown",e),a.setState({mode:e})},a.onMouseUp=function(){console.log("GridItem onMouseUp"),a.setState({mode:""})},a.onMouseMove=function(e,t,a){console.log("GridItem onMouseMove",e),e.preventDefault()},a.state={x:a.props.x,y:a.props.y,mode:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillUnmount",value:function(){var e=l.a.findDOMNode(this);if(e){var t=e.ownerDocument;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}},{key:"render",value:function(){var e={left:this.state.x,top:this.state.y,width:this.props.width,height:this.props.height,backgroundColor:"#f1f1f1",position:"absolute",zIndex:1};return r.a.createElement("div",{className:"grid-box",style:e},r.a.createElement("div",{className:"grid-box-title"},this.props.title),r.a.createElement(I,{onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,mode:this.state.mode}),r.a.createElement(x.a,{data:[{firstName:"a1",lastName:"b1"},{firstName:"a2",lastName:"b2"},{firstName:"a3",lastName:"b3"}],columns:[{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"}],defaultPageSize:10}),r.a.createElement(P,{onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,mode:this.state.mode}))}}]),t}(r.a.Component),U=[{title:"title1",x:0,y:0,width:100,height:100},{title:"title2",x:100,y:100,width:100,height:100}],A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={boxes:[],snapToGrid:!1,showGridlines:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({boxes:U})}},{key:"render",value:function(){var e={width:600,height:400,position:"relative",margin:"20px",border:"1px solid blue"};this.state.showGridlines&&(e.backgroundSize="20px 20px",e.backgroundImage="linear-gradient(to right, grey 1px, transparent 1px), linear-gradient(to bottom, grey 1px, transparent 1px)");var t=this.state.boxes.map(function(e,t){return r.a.createElement(q,{key:t,x:e.x,y:e.y,width:e.width,height:e.height,title:e.title})});return r.a.createElement("div",{style:e},t)}}]),t}(r.a.Component),L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedOption:null,data:[{firstName:"a1",lastName:"b1"},{firstName:"a2",lastName:"b2"},{firstName:"a3",lastName:"b3"}]},a.onChange=function(e){console.log("change",e)},a.submit=function(){console.log("submit")},a.handleChange=function(e){a.setState({selectedOption:e}),console.log("Option selected:",e)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.state.selectedOption;var e=this.state.data;return r.a.createElement("div",null,r.a.createElement(k.a,{mode:"mysql",theme:"xcode",name:"blah2",onChange:this.onChange,height:"300px",width:"300px",fontSize:18,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}}),r.a.createElement("button",{onClick:this.submit},"Submit"),r.a.createElement(x.a,{data:e,columns:[{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"}],defaultPageSize:10}),r.a.createElement(A,null))}}]),t}(r.a.PureComponent),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(E.a)({},r,n))},a.save=function(e){e.preventDefault();var t={connectionUrl:a.state.connectionUrl,username:a.state.username,password:a.state.password,name:a.state.name,type:a.state.password,ping:a.state.ping},n=a.props.router;y.a.post("/ws/jdbcdatasource",t).then(function(e){a.reset(),n.push("/datasources")})},a.reset=function(){a.setState(a.initialState)},a.ping=function(){},a.state=a.initialState,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;console.log("id",e);var t="Edit";void 0===e&&(t="New"),this.setState({mode:t})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.mode," Data Source"),r.a.createElement("div",null,r.a.createElement("button",{type:"primary",onClick:this.save},"Save"),r.a.createElement("button",{type:"primary",onClick:this.ping},"Ping")))}},{key:"initialState",get:function(){return{id:0,name:"",connectionUrl:"",username:"",password:"",type:"",ping:"",mode:""}}}]),t}(n.Component),Q=a(19),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isSelectAll:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.checked,o=Object(Q.a)(a.props.checkBoxes).find(function(e){return e.value===n});o.isChecked=r,a.props.onChange(a.props.filterId,o)},a.toggleSelectAll=function(){for(var e=!a.state.isSelectAll,t=Object(Q.a)(a.props.checkBoxes),n=0;n<t.length;n++)t[n].isChecked=e;a.props.onChange(a.props.filterId,t),a.setState(function(e){return{isSelectAll:!e.isSelectAll}})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.checkBoxes.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("input",{type:"checkbox",name:t.value,value:t.value,checked:t.isChecked,onChange:e.handleChange}),t.value,r.a.createElement("br",null))});return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.toggleSelectAll},"Toggle Select All ",this.state.isSelectAll),r.a.createElement("div",null,t))}}]),t}(r.a.Component),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"min",r.a.createElement("input",{type:"number",name:"min"}),"max",r.a.createElement("input",{type:"number",name:"max"}))}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchFilters=function(e){null!==e&&y.a.get("/ws/filter/dashboard/"+e).then(function(e){var t=e.data;a.setState({filters:t},a.queryFilters)})},a.queryFilters=function(){for(var e=a.state.filters,t=0;t<e.length;t++){var n=e[t];if("slicer"===n.type){var r=n.data;y.a.post("/ws/jdbcquery/filter/"+n.id,r).then(function(t){var n=t.data,r=e.findIndex(function(e){return e.id===n.id}),o=Object(Q.a)(a.state.filters);o[r].queryResult=JSON.parse(n.data),a.setState({filters:o})})}}},a.renderFilterPanel=function(){console.log("renderFilterPanel");for(var e=[],t=a.state.filters,n=0;n<t.length;n++){var o=t[n];if("slicer"===o.type){console.log("11111");var l=o.queryResult,s=[];if(void 0!==l&&0!==l.length&&Array.isArray(l)){for(var i=0;i<l.length;i++)for(var c=Object.values(l[i]),u=0;u<c.length;u++){var d=c[u];s.push({value:d,isChecked:!1})}e.push(r.a.createElement("div",{className:"filterCard"},r.a.createElement("div",null,o.name),r.a.createElement("div",null,r.a.createElement(F,{key:n,filterId:o.id,checkBoxes:s,onChange:a.onQuerySlicerChange}))))}}else"number-range"===o.type?e.push(r.a.createElement(W,{key:n})):o.type}return e},a.onQuerySlicerChange=function(e,t){console.log("onQuerySlicerChange",e,t);a.state.filters.find(function(t){return t.id===e});for(var n=[],r=0;r<t.length;r++)t[r].isChecked&&n.push(t[r])},a.run=function(){console.log("run")},a.state={filters:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"testPanel"},r.a.createElement("h5",null,"FilterViewPanel"),r.a.createElement("button",{onClick:this.run},"Run"),r.a.createElement("div",{className:"filterViewPanel"},this.renderFilterPanel()))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchWidgets=function(e){null!==e&&y.a.get("/ws/widget/dashboard/"+e).then(function(e){var t=e.data;a.setState({widgets:t},a.queryWidgets)})},a.state={dashboardId:null,widgets:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"queryWidgets",value:function(){for(var e=this,t=this.state.widgets,a=0;a<t.length;a++){var n=t[a];y.a.get("/ws/jdbcquery/widget/"+n.id).then(function(a){var n=a.data,r=t.findIndex(function(e){return e.id===n.id}),o=Object(Q.a)(e.state.widgets);o[r].queryResult=JSON.parse(n.data),e.setState({widgets:o})})}}},{key:"render",value:function(){var e=this.state.widgets.map(function(e,t){var a=[],n=e.queryResult;if(void 0!==n&&Array.isArray(n))for(var o=n[0],l=Object.keys(o),s=0;s<l.length;s++){var i=l[s];a.push({Header:i,accessor:i})}return r.a.createElement("div",{key:t},r.a.createElement(x.a,{data:n,columns:a,minRows:0,showPagination:!1}))});return r.a.createElement("div",{className:"testPanel"},r.a.createElement("h3",null,"WidgetViewPanel"),e)}}]),t}(r.a.Component),V=["table","pie"],B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchWidget=function(){var e=Object(b.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:n=e.sent,a.setState({jdbcDataSources:n}),null===t?(0!==n.length&&a.setState({jdbcDataSourceId:n[0].id}),a.setState({widgetId:null})):a.setState({widgetId:t});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(E.a)({},r,n))},a.handleAceEditorChange=function(e){a.setState({sqlQuery:e})},a.handleDataSourceChange=function(e){a.setState({jdbcDataSourceId:e.target.value})},a.save=function(e){e.preventDefault();var t={id:a.state.widgetId,name:a.state.name,dashboardId:a.props.dashboardId,jdbcDataSourceId:a.state.jdbcDataSourceId,sqlQuery:a.state.sqlQuery};y.a.post("/ws/widget",t).then(function(e){})},a.close=function(){a.props.onClose()},a.runQuery=function(e){e.preventDefault();var t={jdbcDataSourceId:a.state.jdbcDataSourceId,sqlQuery:a.state.sqlQuery};y.a.post("/ws/jdbcquery/query",t).then(function(e){var t=e.data;a.setState({queryResult:t})})},a.state={jdbcDataSources:[],widgetId:null,name:"",sqlQuery:"",jdbcDataSourceId:null,queryResult:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("WidgetEditPanel","componentDidMount")}},{key:"render",value:function(){var e,t=this,a=this.props.show?"right-drawer display-block":"right-drawer display-none",n=this.state.jdbcDataSources.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}),o=V.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}),l=[],s=this.state.queryResult;if(void 0!==s&&0!==s.length&&Array.isArray(s)){for(var i=s[0],c=Object.keys(i),u=0;u<c.length;u++){var d=c[u];l.push({Header:d,accessor:d})}e=r.a.createElement(x.a,{data:this.state.queryResult,columns:l,minRows:0,showPagination:!1})}else e=r.a.createElement("div",null,s);return r.a.createElement("div",{className:a},r.a.createElement("h3",null,"WidgetEditPanel"),r.a.createElement("button",{onClick:function(){return t.props.onClose()}},"Close"),r.a.createElement("button",{onClick:this.save},"Save"),r.a.createElement("button",{onClick:this.runQuery},"Run Query"),r.a.createElement("form",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),r.a.createElement("label",null,"DataSource"),r.a.createElement("select",{value:this.state.jdbcDataSourceId,onChange:this.handleDataSourceChange},n),r.a.createElement("label",null,"SQL Query"),r.a.createElement(k.a,{style:{marginTop:"8px"},value:this.state.sqlQuery,mode:"mysql",theme:"xcode",name:"blah2",onChange:this.handleAceEditorChange,height:"300px",width:"100%",fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}}),r.a.createElement("label",null,"Result"),e,r.a.createElement("label",null,"Columns Mapping"),r.a.createElement("div",null,"column name, display name, data type"),r.a.createElement("label",null,"Chart Options"),r.a.createElement("select",{value:this.state.optionValue,onChange:this.handleOptionChange},o),r.a.createElement("label",null,r.a.createElement("i",{class:"fas fa-table"})," Table"),r.a.createElement("div",null),r.a.createElement("label",null,r.a.createElement("i",{class:"fas fa-chart-pie"})," Pie Chart"),r.a.createElement("div",null,'Count "users" by "last name"')))}}]),t}(r.a.Component),G=["slicer"],H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchFilter=function(){var e=Object(b.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:n=e.sent,a.setState({jdbcDataSources:n}),null===t?(0!==n.length&&a.setState({jdbcDataSourceId:n[0].id}),a.setState({filterId:null})):a.setState({filterId:t});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(E.a)({},r,n))},a.handleAceEditorChange=function(e){a.setState({sqlQuery:e})},a.handleDataSourceChange=function(e){a.setState({jdbcDataSourceId:e.target.value})},a.handleTypeChange=function(e){a.setState({type:e.target.value})},a.save=function(e){e.preventDefault();var t={id:a.state.filterId,name:a.state.name,type:a.state.type,dashboardId:a.props.dashboardId,data:{jdbcDataSourceId:a.state.jdbcDataSourceId,sqlQuery:a.state.sqlQuery}};y.a.post("/ws/filter",t).then(function(e){})},a.runQuery=function(e){e.preventDefault();var t={jdbcDataSourceId:a.state.jdbcDataSourceId,sqlQuery:a.state.sqlQuery};y.a.post("/ws/jdbcquery/query",t).then(function(e){var t=e.data;a.setState({queryResult:t})})},a.state={jdbcDataSources:[],filterId:null,name:"",type:"slicer",data:{},sqlQuery:"",jdbcDataSourceId:null,queryResult:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.show?"right-drawer display-block":"right-drawer display-none",n=this.state.jdbcDataSources.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)}),o=G.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}),l=[],s=this.state.queryResult;if(void 0!==s&&0!==s.length&&Array.isArray(s)){for(var i=s[0],c=Object.keys(i),u=0;u<c.length;u++){var d=c[u];l.push({Header:d,accessor:d})}e=r.a.createElement(x.a,{data:this.state.queryResult,columns:l,minRows:0,showPagination:!1})}else e=r.a.createElement("div",null,s);return r.a.createElement("div",{className:a},r.a.createElement("h3",null,"FilterEditPanel"),r.a.createElement("button",{onClick:function(){return t.props.onClose()}},"Close"),r.a.createElement("button",{onClick:this.save},"Save"),r.a.createElement("button",{onClick:this.runQuery},"Run"),r.a.createElement("form",null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),r.a.createElement("label",null,"Type"),r.a.createElement("select",{value:this.state.type,onChange:this.handleTypeChange},o),r.a.createElement("label",null,"DataSource"),r.a.createElement("select",{value:this.state.jdbcDataSourceId,onChange:this.handleDataSourceChange},n),r.a.createElement("label",null,"SQL Query"),r.a.createElement(k.a,{style:{marginTop:"8px"},value:this.state.sqlQuery,mode:"mysql",theme:"xcode",name:"blah2",onChange:this.handleAceEditorChange,height:"300px",width:"100%",fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}}),r.a.createElement("label",null,"Result"),e))}}]),t}(r.a.Component),_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).refresh=function(){console.log("refresh");var e=a.state.dashboardId;a.filterViewPanel.current.fetchFilters(e),a.widgetViewPanel.current.fetchWidgets(e)},a.showFilterEditPanel=function(e){a.filterEditPanel.current.fetchFilter(null),a.setState({showFilterEditPanel:!0})},a.showWidgetEditPanel=function(e){a.widgetEditPanel.current.fetchWidget(null),a.setState({showWidgetEditPanel:!0})},a.state={showWidgetEditPanel:!1,showFilterEditPanel:!1,jdbcDataSourceOptions:[],dashboardId:0,name:"",widgets:[],filters:[]},a.filterViewPanel=r.a.createRef(),a.filterEditPanel=r.a.createRef(),a.widgetViewPanel=r.a.createRef(),a.widgetEditPanel=r.a.createRef(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id,t=void 0!==e?e:null;this.setState({dashboardId:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"DashboardEditView"),r.a.createElement("button",{onClick:this.refresh},"Refresh"),r.a.createElement("button",{onClick:function(){return e.showFilterEditPanel(null)}},"Add Filter"),r.a.createElement("button",{onClick:function(){return e.showWidgetEditPanel(null)}},"Add Widget"),r.a.createElement(z,{ref:this.filterViewPanel}),r.a.createElement(T,{ref:this.widgetViewPanel}),r.a.createElement(B,{ref:this.widgetEditPanel,show:this.state.showWidgetEditPanel,onClose:function(){return e.setState({showWidgetEditPanel:!1})},jdbcDataSourceOptions:this.state.jdbcDataSourceOptions,dashboardId:this.state.dashboardId}),r.a.createElement(H,{ref:this.filterEditPanel,show:this.state.showFilterEditPanel,onClose:function(){return e.setState({showFilterEditPanel:!1})},jdbcDataSourceOptions:this.state.jdbcDataSourceOptions,dashboardId:this.state.dashboardId}))}}]),t}(r.a.Component),X=Object(S.a)(_),Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).refresh=function(){console.log("refresh"),a.filterViewPanel.current.fetchFilters()},a.filterViewPanel=r.a.createRef(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",null,"SingleTest"),r.a.createElement(z,{ref:this.filterViewPanel}),r.a.createElement("button",{onClick:this.refresh},"Refresh"))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.setState({current:e.key})},a.toggleMenu=function(){var e=""===a.state.menuMin?"menu-min":"";a.setState({menuMin:e})},a.state={current:"overview",menuMin:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Nav"},r.a.createElement("div",{className:"Nav_title-bar"},r.a.createElement("div",{className:"Nav_title"},"Poli")),r.a.createElement("div",{className:"Nav_menu"},r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement(h.a,{to:"/overview"},r.a.createElement("i",{className:"fas fa-heartbeat fa-fw"}),r.a.createElement("span",{className:"menu-text"},"Overview"))),r.a.createElement("li",null,r.a.createElement(h.a,{to:"/datasources"},r.a.createElement("i",{className:"fas fa-database fa-fw"}),r.a.createElement("span",{className:"menu-text"},"Data Sources"))),r.a.createElement("li",null,r.a.createElement(h.a,{to:"/dashboards"},r.a.createElement("i",{className:"fas fa-chalkboard fa-fw"}),r.a.createElement("span",{className:"menu-text"},"Dashboards"))),r.a.createElement("li",null,r.a.createElement(h.a,{to:"/test"},"Test")),r.a.createElement("li",null,r.a.createElement(h.a,{to:"/single-test"},"SingleTest"))),r.a.createElement("div",{className:"Nav__toggle-menu"},r.a.createElement("div",{onClick:this.toggleMenu},"toggle")))),r.a.createElement("div",{className:"Status_bar ".concat(this.state.menuMin)}),r.a.createElement("div",{className:"Content ".concat(this.state.menuMin)},r.a.createElement(m.a,{exact:!0,path:"/",component:p}),r.a.createElement(m.a,{exact:!0,path:"/overview",component:p}),r.a.createElement(m.a,{exact:!0,path:"/datasources",component:O}),r.a.createElement(m.a,{exact:!0,path:"/dashboards",component:M}),r.a.createElement(m.a,{exact:!0,path:"/test",component:L}),r.a.createElement(m.a,{exact:!0,path:"/datasources/new",component:R}),r.a.createElement(m.a,{exact:!0,path:"/datasources/edit/:id",component:R}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/new",component:X}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/edit/:id",component:X}),r.a.createElement(m.a,{exact:!0,path:"/single-test",component:Y})))}}]),t}(n.Component),K=a(83);l.a.render(r.a.createElement(K.a,{basename:"/poli"},r.a.createElement(J,null)),document.getElementById("root"))}},[[42,2,1]]]);
//# sourceMappingURL=main.573c33e4.chunk.js.map