{"version":3,"sources":["views/Login.js","views/ChangeTempPassword.js","api/WebApi.js","components/Modal.js","components/Toast.js","components/SearchInput.js","views/DataSource.js","api/Constants.js","components/ColorPicker.js","components/Checkbox.js","api/Util.js","api/EchartsApi.js","components/GridDraggable.js","components/GridResizable.js","components/TableWidget.js","components/filters/Slicer.js","components/GridItem.js","components/GridLayout.js","components/WidgetViewPanel.js","components/Tabs.js","components/Select.js","components/WidgetEditPanel.js","views/DashboardEditView.js","views/Dashboard.js","views/User.js","views/Group.js","views/UserManagement.js","views/Account.js","views/DashboardFullScreenView.js","views/Workspace.js","views/PageNotFound.js","App.js","index.js"],"names":["Login","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleInputChange","event","setState","defineProperty","target","name","value","handleKeyPress","keyCode","login","_this$state","state","username","password","user","axios","post","then","res","loginResponse","data","error","errorMsg","onLoginSuccess","_this2","isAuthenticated","sysRole","react_default","a","createElement","Fragment","className","type","onChange","onKeyDown","onClick","React","Component","withRouter","ChangeTempPassword","changePassword","confirmedPassword","length","history","push","style","fontSize","textAlign","fontWeight","marginBottom","fetchDataSources","_ref","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","get","sent","abrupt","t0","stop","apply","arguments","Modal","_this$props","show","_this$props$modalClas","modalClass","title","children","modalStatus","concat","onClose","react_fontawesome_index_es","icon","size","COLOR_RED","Toast","message","bgColor","timeoutId","clearTimeout","showToast","backgroundColor","setTimeout","hide","_toastRef","assertThisInitialized","clearInterval","toastStatus","showSuccess","showError","SearchInput","reset","inputWidth","inputStyle","width","margin","placeholder","DataSource","handleNameInputChange","save","showUpdatePassword","id","connectionUrl","driverClassName","ping","ds","put","closeEditPanel","catch","result","clearEditPanel","initialState","openEditPanel","showEditPanel","confirmDelete","_this$state$objectToD","objectToDelete","delete","closeConfirmDeletionPanel","openConfirmDeletionPanel","datasource","showConfirmDeletionPanel","toggleUpdatePassword","prevState","jdbcDataSources","searchValue","webApi","_this$state2","_this$state2$jdbcData","_this$state2$objectTo","mode","jdbcDataSourceItems","_loop","i","includes","key","class","marginRight","src_components_SearchInput","src_components_Modal","rows","CHART","FILTER","WIDGET_TYPES","SLICER","SINGLE_VALUE","FILTER_TYPES","PIE","TABLE","CHART_TYPES","SYS_ROLE_ADMIN","SYS_ROLE_VIEWER","DEFAULT_DASHBOARD_HEIGHT","ColorPicker","handleClick","showPalette","handleClose","handleChange","color","rgb","rgba","r","g","b","height","borderRadius","background","padding","boxShadow","display","cursor","position","zIndex","top","right","bottom","left","lib","Checkbox","toggle","checked","_this$props2","checkmarkBoxStyle","jsonToArray","json","array","JSON","parse","e","CHART_COLORS","getPieOption","queryResultData","pieKey","pieValue","legend","series","row","tooltip","orient","center","radius","getPieOptionTemplate","WIDGET_BORDER","GridDraggable","onMouseDown","preventDefault","gridItemNode","ReactDOM","findDOMNode","parentNode","xOffset","clientX","offsetLeft","yOffset","clientY","offsetTop","ownerDocument","addEventListener","onMouseUp","onMouseMove","thisNode","removeEventListener","gridCell","snapToGrid","currentX","currentY","containerNode","containerWidth","clientWidth","containerHeight","clientHeight","boxWidth","parseInt","boxHeight","Math","floor","fixedWidth","MIN_WIDTH","MIN_HEIGHT","GridResizable","prevWidth","prevHeight","newWidth","newHeight","TableWidget","goToLink","link","onTableTdClick","_this$props$data","_this$props$columns","columns","_this$props$drillThro","drillThrough","columnHeaders","forEach","column","columnName","header","Header","accessor","index","findIndex","d","dashboardId","Cell","es","defaultPageSize","previousText","nextText","Slicer","toggleSelectAll","newIsSelectAll","isSelectAll","newCheckBoxes","toConsumableArray","checkBoxes","isChecked","handleSearchValueChange","handleCheckBoxChange","x","_this$props$checkBoxe","checkBoxItems","checkBox","src_components_Checkbox","selectText","GridItem","console","log","y","widget","onWidgetMove","editWidget","widgetId","onWidgetEdit","exportCsv","exportJson","removeWidget","onWidgetRemove","onTableTdPropsChange","rowInfo","instance","handleOriginal","drills","widgetDrillThrough","onChartClick","param","echarts","onChartLegendselectchanged","echart","onSlicerChange","onWidgetFilterInputChange","onSingleValueChange","renderWidgetContent","onChartEvents","click","legendselectchanged","chartType","filterType","_this$props$queryResu","queryResult","Util","widgetItem","Constants","src_components_TableWidget","chartOption","EchartsApi","echarts_for_react_lib_default","option","onEvents","components_filters_Slicer","isEditMode","_this$props2$style","_style$showBorder","showBorder","borderColor","showTitle","borderStyle","gridBoxStyle","border","Array","isArray","components_GridDraggable","components_GridResizable","GridLayout","_this$props$widgets","widgets","showGridlines","backgroundSize","backgroundImage","boxItems","map","components_GridItem","assign","BASE_WIDTH","WidgetViewPanel","resizeGrid","viewWidth","newWidgets","gridWidth","resizeWidgetsToActual","resizeWidgetsToBase","baseX","scaleToBase","baseWidth","actualX","scaleToActual","actualdWidth","num","round","fetchWidgets","queryFilters","queryCharts","saveWidgets","stringify","w","splice","_this$state$widgets","getFilterParams","_this$state$widgets2","filterParams","filterParam","_widget$checkBoxes","paramValues","j","remark","queryParameter","_widgets$i","queryChart","_widgets$i2","queryFilter","params","_this3","_arr","values","_i","val","_this4","widgetViewWidth","onStyleValueChange","components_ColorPicker","src_components_GridLayout","Tabs","handleTabClick","activeTab","tabHeaders","tabContent","active","Select","handleOptionChange","_this$props$options","options","optionValue","optionDisplay","_this$props$preloadOn","preloadOneEmpty","optionList","WidgetEditPanel","fetchWidget","dashboards","drillDashboards","_widget$data","sqlQuery","jdbcDataSourceId","runQuery","_x","objectSpread","handleAceEditorChange","newValue","handleIntegerOptionChange","intValue","_this$state3","_this$state4","onSave","queryRequest","addDrillThrough","_this$state5","drillColumnName","drillDashboardId","newDrillThrough","removeDrillThrough","drill","generateChart","_this$state6","_this$state6$queryRes","renderChartPreview","_this$state7","_this$state7$queryRes","chartPreview","_this$state8","components_Select","_this$state9","_this$state9$jdbcData","_this$state9$drillThr","_this$state9$drillDas","drillItems","columnItems","col","dataType","showQueryTab","src_components_Tabs","react_ace_lib_default","marginTop","theme","showPrintMargin","showGutter","highlightActiveLine","setOptions","showLineNumbers","tabSize","DashboardEditView","loadViewByDashboardName","url","location","search","dashboardName","URLSearchParams","getPageWidth","isReadOnly","refresh","toggleAutoRefresh","autoRefreshTimerId","refreshInterval","interval","timerId","setInterval","queryWidgets","updateLastRefreshed","refreshWidgetView","widgetViewPanel","current","now","Date","toTimeString","replace","lastRefreshed","dashboard","onDashboardSave","edit","cancelEdit","onSaveWidget","showWidgetEditPanel","openWidgetEditPanel","widgetEditPanel","applyFilters","fullScreen","window","open","onTableCellClick","onDashboardDelete","deleteDashboard","lastRefreshLabelTimerId","jdbcDataSourceOptions","createRef","match","undefined","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","Symbol","iterator","done","pair","err","return","editButtonPanel","autoRefreshStatus","fullScreenButtonPanel","controlButtons","components_WidgetViewPanel","ref","src_components_WidgetEditPanel","Dashboard","fetchBoards","view","activeDashboardId","pathname","indexOf","Number","substring","_this$state$dashboard","showEdit","dashboardRows","menuActive","Route","path","render","views_DashboardEditView","User","fetchUsers","users","fetchGroups","groups","tempPassword","userGroups","userGroupId","initialEditPanelState","selectedSysRole","addUserGroup","_this$state2$userGrou","groupId","newUserGroups","removeUserGroup","_this$state$userGroup","_this$state3$users","_this$state3$groups","_this$state3$userGrou","_this$state3$objectTo","userItems","userGroupItems","_loop2","Group","fetchDashboards","group","groupDashboards","groupDashboardId","addGroupDashboard","_this$state2$groupDas","newGroupDashboards","removeGroupDashboard","_this$state$groupDash","_this$state3$dashboar","_this$state3$groupDas","groupItems","groupDashboardItems","UserManagement","views_Group","views_User","Account","fetchUser","apiKey","generateApiKey","DashboardFullScreenView","dashboardEditView","wrappedComponentRef","comp","MENU_ITEMS","Workspace","handleMenuClick","menuLink","currentMenuLink","logout","onLogout","startsWith","find","m","menuItems","menuList","filter","menu","Link","to","isAccountMenuActive","Switch","exact","component","views_UserManagement","src_views_Dashboard","src_components_Toast","PageNotFound","library","add","faChalkboard","faDatabase","faUsersCog","faPlus","faTimes","faEdit","faTrashAlt","faPlayCircle","faStopCircle","faRedoAlt","faTv","faPlug","faUser","faSignOutAlt","faCompress","faExpandArrowsAlt","faFileExport","faFileCsv","faCircleNotch","faSearch","faSave","faCalendarPlus","faFilter","faExternalLinkAlt","App","isAuthorizing","directUrl","currentPath","spin","src_views_Login","PrivateRoute","authenticated","rest","objectWithoutProperties","Redirect","from","BrowserRouter","basename","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.9880631d.chunk.js","sourcesContent":["\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport './Login.css';\r\n\r\nclass Login extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      errorMsg: '',\r\n      username: '',\r\n      password: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { sysRole } = this.props;\r\n    let isAuthenticated = false;\r\n    if (sysRole) {\r\n      isAuthenticated = true;\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n      axios.post('/auth/login/cookie')\r\n        .then(res => {\r\n          const loginResponse = res.data;\r\n          if (!loginResponse.error) {\r\n            this.props.onLoginSuccess(loginResponse);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  handleKeyPress = (event) => {\r\n    if(event.keyCode === 13) {\r\n      this.login();\r\n    }\r\n  }\r\n\r\n  login = () => {\r\n    const {\r\n      username,\r\n      password\r\n    } = this.state;\r\n\r\n    const user = {\r\n      username: username,\r\n      password: password\r\n    }\r\n\r\n    if (!username) {\r\n      this.setState({\r\n        errorMsg: 'Enter username.'\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!password) {\r\n      this.setState({\r\n        errorMsg: 'Enter password.'\r\n      });\r\n      return;\r\n    }\r\n\r\n    axios.post('/auth/login/user', user)\r\n      .then(res => {\r\n        const loginResponse = res.data;\r\n        if (loginResponse.error) {\r\n          this.setState({\r\n            errorMsg: loginResponse.error\r\n          });\r\n        } else {\r\n          this.props.onLoginSuccess(loginResponse);\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"login-panel\">\r\n          <div className=\"login-app-title\">Poli</div>\r\n          <div className=\"login-error-msg\">{this.state.errorMsg}</div>\r\n          <div className=\"login-panel-body\">\r\n            <div className=\"form-panel\">\r\n              <label>Username</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"username\" \r\n                value={this.state.username}\r\n                onChange={this.handleInputChange} \r\n                onKeyDown={this.handleKeyPress} \r\n              />\r\n              <label>Password</label>\r\n              <input \r\n                type=\"password\" \r\n                name=\"password\" \r\n                value={this.state.password}\r\n                onChange={this.handleInputChange} \r\n                onKeyDown={this.handleKeyPress} \r\n              />\r\n              <button className=\"button login-button\" onClick={this.login}>Login</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Login);","\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport './Login.css';\r\n\r\nclass ChangeTempPassword extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      errorMsg: '',\r\n      password: '',\r\n      confirmedPassword: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  changePassword = () => {\r\n    const {\r\n      password,\r\n      confirmedPassword\r\n    } = this.state;\r\n\r\n    if (password && confirmedPassword\r\n        && password === confirmedPassword) {\r\n      if (password.length < 8) {\r\n        this.setState({\r\n          errorMsg: `Use 8 or more characters.`\r\n        });\r\n        return;\r\n      }\r\n\r\n      const user = {\r\n        password: password\r\n      }\r\n\r\n      axios.post('/auth/login/change-password', user)\r\n        .then(res => {\r\n          const loginResponse = res.data || {};\r\n          if (loginResponse.error) {\r\n            this.setState({\r\n              errorMsg: loginResponse.error\r\n            });\r\n          } else {\r\n            this.props.history.push('/workspace/dashboard');\r\n          }\r\n        });\r\n    } else {\r\n      this.setState({\r\n        errorMsg: `Those passwords didn't match.`\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const titleStyle = {\r\n      fontSize: '22px',\r\n      textAlign: 'center',\r\n      fontWeight: 'bold',\r\n      marginBottom: '15px'\r\n    }\r\n\r\n    const tipStyle = {\r\n      fontWeight: 'bold',\r\n      marginBottom: '5px',\r\n      fontSize: '15px'\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"login-panel\">\r\n          <div style={titleStyle}>Change password</div>\r\n          <div className=\"login-error-msg\">{this.state.errorMsg}</div>\r\n          <div className=\"login-panel-body\">\r\n            <div className=\"form-panel\">\r\n              <div style={tipStyle}>* Use 8 or more characters</div>\r\n              <label>New password</label>\r\n              <input \r\n                type=\"password\" \r\n                name=\"password\" \r\n                value={this.state.username}\r\n                onChange={this.handleInputChange} />\r\n              <label>Confirm password</label>\r\n              <input \r\n                type=\"password\" \r\n                name=\"confirmedPassword\" \r\n                value={this.state.confirmedPassword}\r\n                onChange={this.handleInputChange} />\r\n              <button className=\"button login-button\" onClick={this.changePassword}>Confirm</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(ChangeTempPassword);","import axios from 'axios';\r\n\r\nconst JSON_HEADER = {\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  }\r\n};\r\n\r\nexport const fetchDataSources = async () => {\r\n  try {\r\n    const response = await axios.get('/ws/jdbcdatasource');\r\n    return response.data || [];\r\n  } catch (e) {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const fetchDashboardById = async (id) => {\r\n  return await get(`/ws/dashboard/${id}`);\r\n}\r\n\r\nexport const fetchFiltersByDashboardId = async (dashboardId) => {\r\n  return await get(`/ws/filter/dashboard/${dashboardId}`);\r\n}\r\n\r\nconst get = async (url) => {\r\n  try {\r\n    const response = await axios.get(url);\r\n    return response.data;\r\n  } catch (e) {\r\n    return [];\r\n  }\r\n} \r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport './Modal.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nclass Modal extends React.Component {\r\n\r\n  render() {\r\n    const {\r\n      show,\r\n      modalClass = '',\r\n      title,\r\n      children\r\n    } = this.props;\r\n\r\n    const modalStatus = show ? 'display-block' : 'display-none';\r\n    return (\r\n      <div className={`modal-overlay ${modalStatus}`}>\r\n        <div className={`modal-panel ${modalClass}`}>\r\n          <div className=\"model-header row\">\r\n            <div className=\"model-title\">{title}</div>\r\n            <button className=\"model-close-button icon-button\" onClick={() => this.props.onClose()}>\r\n              <FontAwesomeIcon icon=\"times\" size=\"lg\" />\r\n            </button>\r\n          </div>\r\n          <hr/>\r\n          <div className='modal-body'>\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;","import React from 'react';\r\nimport './Toast.css';\r\n\r\nconst COLOR_RED = '#FF5630';\r\nconst COLOR_GREEN = '#36B37E';\r\n\r\nclass Toast extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showToast: false,\r\n      message: '',\r\n      backgroundColor: COLOR_RED,\r\n      timeoutId: ''\r\n    };\r\n\r\n    Toast._toastRef = this;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { timeoutId } = this.state;\r\n    if (timeoutId) {\r\n      clearInterval(timeoutId);\r\n    }\r\n  }\r\n\r\n  show = (message, bgColor) => {\r\n    const { timeoutId } = this.state;\r\n    if (timeoutId) {\r\n      clearTimeout(timeoutId);\r\n    }\r\n    this.setState({ \r\n      showToast: true,\r\n      message: message,\r\n      backgroundColor: bgColor,\r\n      timeoutId: ''\r\n    }, () => {\r\n      const timeoutId = setTimeout(() => {\r\n        this.hide();\r\n      }, 3000);\r\n      this.setState({\r\n        timeoutId: timeoutId\r\n      });\r\n    });\r\n  }\r\n\r\n  hide = () => {\r\n    this.setState({ \r\n      showToast: false,\r\n      message: ''\r\n    });\r\n  }\r\n\r\n  static showSuccess = (message) => {\r\n    Toast._toastRef.show(message, COLOR_GREEN);\r\n  }\r\n\r\n   static showError = (message) => {\r\n    Toast._toastRef.show(message, COLOR_RED);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      showToast,\r\n      message,\r\n      backgroundColor\r\n    } = this.state;\r\n\r\n    const toastStatus = showToast ? 'display-block' : 'display-none';\r\n    const style = {\r\n      backgroundColor: backgroundColor\r\n    }\r\n\r\n    return (\r\n      <div className={`toast-container ${toastStatus}`} style={style}>\r\n        {message}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Toast;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport './SearchInput.css';\r\n\r\nclass SearchInput extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  static propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    value: PropTypes.string.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    inputWidth: PropTypes.number\r\n  };\r\n\r\n  handleInputChange = (event) => {\r\n    const { name } = this.props;\r\n    const value = event.target.value;\r\n    this.props.onChange(name, value);\r\n  }\r\n\r\n  reset = () => {\r\n    const { name } = this.props;\r\n    this.props.onChange(name, '');\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      name,\r\n      value,\r\n      inputWidth\r\n    } = this.props;\r\n\r\n    let inputStyle = {};\r\n    if (inputWidth) {\r\n      inputStyle.width = inputWidth + 'px';\r\n    }\r\n\r\n    return (\r\n      <div className=\"search-input-container\">\r\n        <div className=\"row\">\r\n          <div className=\"search-input-icon float-left\">\r\n            <FontAwesomeIcon icon=\"search\" style={{margin: '10px'}} />\r\n          </div>\r\n          <div className=\"float-left\">\r\n            <input\r\n              type=\"text\"\r\n              name={name}\r\n              value={value}\r\n              placeholder=\"Search...\"\r\n              onChange={this.handleInputChange}\r\n              className=\"search-input-input\"\r\n              style={inputStyle}\r\n            />\r\n          </div>\r\n          <button className=\"button search-input-reset-button float-left\" onClick={this.reset}>\r\n            <FontAwesomeIcon icon=\"times\" size=\"lg\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchInput;","\r\nimport React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport './Datasource.css';\r\nimport * as webApi from '../api/WebApi';\r\nimport Modal from '../components/Modal';\r\nimport Toast from '../components/Toast';\r\nimport SearchInput from '../components/SearchInput';\r\n\r\nclass DataSource extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      jdbcDataSources: [],\r\n      showEditPanel: false,\r\n      showConfirmDeletionPanel: false,\r\n      objectToDelete: {},\r\n      showUpdatePassword: false,\r\n      searchValue: '',\r\n      id: null,\r\n      name: '',\r\n      connectionUrl: '',\r\n      driverClassName: '',\r\n      username: '',\r\n      password: '',\r\n      ping: ''\r\n    };\r\n  }\r\n\r\n  get initialState() {\r\n    return {\r\n      showUpdatePassword: false,\r\n      id: null,\r\n      name: '',\r\n      connectionUrl: '',\r\n      driverClassName: '',\r\n      username: '',\r\n      password: '',\r\n      ping: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchDataSources();\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  handleNameInputChange = (name, value) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  async fetchDataSources() {\r\n    const jdbcDataSources = await webApi.fetchDataSources();\r\n    this.setState({ \r\n      jdbcDataSources: jdbcDataSources \r\n    });\r\n  }\r\n\r\n  save = () => {\r\n    const {\r\n      showUpdatePassword,\r\n      id,\r\n      connectionUrl,\r\n      driverClassName,\r\n      username,\r\n      password,\r\n      name,\r\n      ping,\r\n    } = this.state;\r\n\r\n    if (!name) {\r\n      Toast.showError('Enter a name.');\r\n      return;\r\n    }\r\n\r\n    let ds = {\r\n      connectionUrl: connectionUrl,\r\n      driverClassName: driverClassName,\r\n      username: username,\r\n      name: name,\r\n      ping: ping\r\n    };\r\n\r\n    if (id !== null) {\r\n      ds.id = id;\r\n      if (showUpdatePassword && password) {\r\n        ds.password = password;\r\n      }\r\n\r\n      // Update\r\n      axios.put('/ws/jdbcdatasource', ds)\r\n        .then(res => {\r\n          this.closeEditPanel();\r\n          this.fetchDataSources();\r\n        })\r\n        .catch(error => {\r\n          Toast.showError('The name exists. Try another.');\r\n        });\r\n    } else {\r\n      ds.password = password;\r\n\r\n      axios.post('/ws/jdbcdatasource', ds)\r\n        .then(res => {\r\n          this.closeEditPanel();\r\n          this.fetchDataSources();\r\n        })\r\n        .catch(error => {\r\n          Toast.showError('The name exists. Try another.');\r\n        });\r\n    } \r\n  }\r\n\r\n  ping = (id) => {\r\n    axios.get(`/ws/jdbcdatasource/ping/${id}`)\r\n      .then(res => {\r\n        const result = res.data;\r\n        if (result == 'success') {\r\n          Toast.showSuccess('Ping Succeeded');\r\n        } else {\r\n          Toast.showError(result);\r\n        }\r\n      });\r\n  }\r\n\r\n  clearEditPanel = () => {\r\n    this.setState(this.initialState);\r\n  }\r\n\r\n  openEditPanel = (ds) => {\r\n    if (ds !== null) {\r\n      this.setState({\r\n        showUpdatePassword: false,\r\n        id: ds.id,\r\n        connectionUrl: ds.connectionUrl,\r\n        driverClassName: ds.driverClassName,\r\n        username: ds.username,\r\n        password: ds.password,\r\n        name: ds.name,\r\n        ping: ds.ping\r\n      });\r\n    } else {\r\n      this.clearEditPanel();\r\n    }\r\n    \r\n    this.setState({\r\n      showEditPanel: true\r\n    }); \r\n  }\r\n\r\n  closeEditPanel = () => {\r\n    this.setState({\r\n      showEditPanel: false\r\n    });\r\n  }\r\n\r\n  confirmDelete = () => {\r\n    const { \r\n      objectToDelete = {} \r\n    } = this.state;\r\n    axios.delete('/ws/jdbcdatasource/' + objectToDelete.id)\r\n      .then(res => {\r\n        this.fetchDataSources();\r\n        this.closeConfirmDeletionPanel();\r\n      });\r\n  }\r\n\r\n  openConfirmDeletionPanel = (datasource) => {\r\n    this.setState({\r\n      objectToDelete: datasource,\r\n      showConfirmDeletionPanel: true\r\n    });\r\n  }\r\n\r\n  closeConfirmDeletionPanel = () => {\r\n    this.setState({\r\n      objectToDelete: {},\r\n      showConfirmDeletionPanel: false\r\n    });\r\n  }\r\n\r\n  toggleUpdatePassword = () => {\r\n    this.setState(prevState => ({\r\n      showUpdatePassword: !prevState.showUpdatePassword\r\n    })); \r\n  }\r\n\r\n  render() {\r\n    const { \r\n      showUpdatePassword,\r\n      id,\r\n      jdbcDataSources = [],\r\n      searchValue,\r\n      showConfirmDeletionPanel,\r\n      objectToDelete = {}\r\n    } = this.state;\r\n\r\n    const mode = id === null ? 'New' : 'Edit';\r\n\r\n    const jdbcDataSourceItems = [];\r\n    for (let i = 0; i < jdbcDataSources.length; i++) {\r\n      const ds = jdbcDataSources[i];\r\n      const name = ds.name;\r\n      if (!searchValue || (searchValue && name.includes(searchValue))) {\r\n        jdbcDataSourceItems.push(\r\n          (\r\n            <div key={i} className=\"datasource-card row\">\r\n              <div className=\"float-left ellipsis datasource-row-name\">\r\n                {name}\r\n              </div>\r\n              <div className=\"float-right\">\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.openEditPanel(ds)}>\r\n                  <FontAwesomeIcon icon=\"edit\" size=\"lg\" />\r\n                </button>\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.openConfirmDeletionPanel(ds)}>\r\n                  <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" />\r\n                </button>\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.ping(ds.id)}>\r\n                  <FontAwesomeIcon icon=\"plug\" size=\"lg\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"full-page-content\">\r\n        <div class=\"row\">\r\n          <div className=\"float-left\" style={{marginRight: '5px'}}>\r\n            <SearchInput \r\n              name={'searchValue'} \r\n              value={this.state.searchValue} \r\n              onChange={this.handleNameInputChange} \r\n              inputWidth={200}\r\n            />\r\n          </div>\r\n          <button className=\"button float-left\" onClick={() => this.openEditPanel(null)}>\r\n            <FontAwesomeIcon icon=\"plus\" /> New\r\n          </button>\r\n        </div>\r\n        <div className=\"row mt-10\">\r\n          {jdbcDataSourceItems}\r\n        </div>\r\n\r\n        <Modal \r\n          show={this.state.showEditPanel}\r\n          onClose={this.closeEditPanel}\r\n          modalClass={'small-modal-panel'}\r\n          title={mode} >\r\n\r\n          <div className=\"form-panel\">\r\n            <label>Name <span className=\"required\">*</span></label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"name\" \r\n              value={this.state.name}\r\n              onChange={this.handleInputChange} \r\n            />\r\n\r\n            <label>Connection Url</label>\r\n            <textarea\r\n              rows=\"4\"\r\n              type=\"text\" \r\n              name=\"connectionUrl\" \r\n              value={this.state.connectionUrl}\r\n              onChange={this.handleInputChange} >\r\n            </textarea>\r\n\r\n            <label>Driver Class Name</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"driverClassName\" \r\n              value={this.state.driverClassName}\r\n              onChange={this.handleInputChange} \r\n            />\r\n\r\n            <label>Username</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"username\" \r\n              value={this.state.username}\r\n              onChange={this.handleInputChange} \r\n            />\r\n            \r\n            { mode === 'Edit' && (\r\n              <div style={{margin: '3px 0px 8px 0px'}}>\r\n                <button className=\"button\" onClick={this.toggleUpdatePassword}>Update password</button>\r\n              </div>\r\n            )}\r\n\r\n            { (mode === 'New' || showUpdatePassword) && ( \r\n              <div>\r\n                <label>Password</label>\r\n                <input \r\n                  type=\"password\" \r\n                  name=\"password\" \r\n                  value={this.state.password}\r\n                  onChange={this.handleInputChange} \r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <label>Ping</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"ping\" \r\n              value={this.state.ping}\r\n              onChange={this.handleInputChange} \r\n            />\r\n            <button className=\"button mt-3\" onClick={this.save}>Save</button>\r\n          </div>\r\n        </Modal>\r\n\r\n        <Modal \r\n          show={showConfirmDeletionPanel}\r\n          onClose={this.closeConfirmDeletionPanel}\r\n          modalClass={'small-modal-panel'}\r\n          title={'Confirm Deletion'} >\r\n          <div className=\"confirm-deletion-panel\">\r\n            Are you sure you want to delete {objectToDelete.name}?\r\n          </div>\r\n          <button className=\"button\" onClick={this.confirmDelete}>Delete</button>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataSource;\r\n","/**\r\n * Constants\r\n */\r\nexport const CHART = 'chart';\r\nexport const FILTER = 'filter';\r\nexport const WIDGET_TYPES = [CHART, FILTER];\r\n\r\nexport const SLICER = 'slicer';\r\nexport const SINGLE_VALUE= 'single';\r\nexport const FILTER_TYPES = [SLICER, SINGLE_VALUE];\r\n\r\nexport const PIE = 'pie';\r\nexport const TABLE = 'table';\r\nexport const CHART_TYPES = [TABLE, PIE];\r\n\r\nexport const DEFAULT_FILTER_VIEW_WIDTH = 200;\r\n\r\nexport const SYS_ROLE_ADMIN = 'admin';\r\nexport const SYS_ROLE_DEVELOPER = 'developer';\r\nexport const SYS_ROLE_VIEWER = 'viewer';\r\n\r\nexport const DEFAULT_DASHBOARD_HEIGHT = 600;","import React from 'react';\r\nimport { ChromePicker } from 'react-color';\r\n\r\nclass ColorPicker extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showPalette: false\r\n    }\r\n  }\r\n\r\n  handleClick = () => {\r\n    this.setState(prevState => ({\r\n      showPalette: !prevState.showPalette\r\n    })); \r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ \r\n      showPalette: false \r\n    });\r\n  };\r\n\r\n  handleChange = (color) => {\r\n    const { name } = this.props;\r\n    const rgb = color.rgb;\r\n    const rgba = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${rgb.a})`;\r\n    this.props.onChange(name, rgba);\r\n  };\r\n\r\n  render() {\r\n\r\n    const color = {\r\n      width: '36px',\r\n      height: '14px',\r\n      borderRadius: '2px',\r\n      background: this.props.value\r\n    };\r\n\r\n    const swatch = {\r\n      padding: '5px',\r\n      background: '#fff',\r\n      borderRadius: '1px',\r\n      boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\r\n      display: 'inline-block',\r\n      cursor: 'pointer'\r\n    };\r\n\r\n    const popover = {\r\n      position: 'absolute',\r\n      zIndex: 2\r\n    };\r\n\r\n    const cover = {\r\n      position: 'fixed',\r\n      top: '0px',\r\n      right: '0px',\r\n      bottom: '0px',\r\n      left: '0px'\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <div style={swatch} onClick={this.handleClick}>\r\n          <div style={color} />\r\n        </div>\r\n        { this.state.showPalette && (\r\n          <div style={popover}>\r\n            <div style={cover} onClick={this.handleClose} />\r\n            <ChromePicker color={this.props.value} onChange={this.handleChange} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nexport default ColorPicker;","import React from 'react';\r\nimport './Checkbox.css';\r\n\r\nclass Checkbox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n    };\r\n  }\r\n\r\n  toggle = () => {\r\n    const {\r\n      name,\r\n      checked\r\n    } = this.props;\r\n\r\n    this.props.onChange(name, !checked);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      value,\r\n      checked\r\n    } = this.props;\r\n\r\n    const checkmarkBoxBgColor = checked ? '#000000' : '#FFFFFF';\r\n    const checkmarkBoxStyle = {\r\n      backgroundColor: checkmarkBoxBgColor\r\n    };\r\n\r\n    return (\r\n      <div className=\"checkbox-container\" onClick={this.toggle}>\r\n        <div className=\"checkbox-checkmark\">\r\n          <div className=\"checkbox-checkmark-box\" style={checkmarkBoxStyle}>\r\n          </div>\r\n        </div>\r\n        <div className=\"checkbox-label\">{value}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Checkbox;\r\n","\r\nexport const isArrayEmpty = (array) => {\r\n  return !Array.isArray(array) || !array.length;\r\n};\r\n\r\nexport const jsonToArray = (json) => {\r\n  let array;\r\n  try {\r\n    array = JSON.parse(json);\r\n  } catch(e) {\r\n    array = [];\r\n  }\r\n  return array;\r\n}\r\n","import * as Util from '../api/Util';\r\n\r\nconst CHART_COLORS = [\r\n  \"#1f77b4\", \"#aec7e8\", \"#ff7f0e\", \"#ffbb78\", \"#2ca02c\", \r\n  \"#98df8a\", \"#d62728\", \"#ff9896\", \"#9467bd\", \"#c5b0d5\", \r\n  \"#8c564b\", \"#c49c94\", \"#e377c2\", \"#f7b6d2\", \"#7f7f7f\", \r\n  \"#c7c7c7\", \"#bcbd22\", \"#dbdb8d\", \"#17becf\", \"#9edae5\"\r\n];\r\n\r\nexport const getPieOptionTemplate = (legend, series) => {\r\n  return {\r\n    color: CHART_COLORS,\r\n    tooltip: {\r\n    },\r\n    legend: {\r\n      type: 'scroll',\r\n      orient: 'vertical',\r\n      data: legend,\r\n      right: 10,\r\n      top: 10,\r\n      bottom: 10\r\n    },\r\n    series: [\r\n      {\r\n        type:'pie',\r\n        center: ['40%', '50%'],\r\n        radius: '50%',\r\n        data: series\r\n      }\r\n    ]\r\n  }\r\n};\r\n\r\nexport const getPieOption = (queryResultData, pieKey, pieValue) => {\r\n  let legend = [];\r\n  let series = [];\r\n  for (let i = 0; i < queryResultData.length; i++) {\r\n    const row = queryResultData[i];\r\n    legend.push(row[pieKey]);\r\n    series.push({\r\n      name: row[pieKey],\r\n      value: row[pieValue]\r\n    });  \r\n  }\r\n  return getPieOptionTemplate(legend, series);\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nconst WIDGET_BORDER = 2;\r\n\r\nclass GridDraggable extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      xOffset: 0,\r\n      yOffset: 0\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    if (thisNode) {\r\n      const { ownerDocument } = thisNode;\r\n      ownerDocument.removeEventListener('mousedown', this.onMouseDown);\r\n      ownerDocument.removeEventListener('mouseup', this.onMouseUp);\r\n      ownerDocument.removeEventListener('mousemove', this.onMouseMove);\r\n    }\r\n  }\r\n\r\n  onMouseDown = (event) => {\r\n    event.preventDefault();\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    const gridItemNode = thisNode.parentNode;\r\n    const xOffset = event.clientX - gridItemNode.offsetLeft;\r\n    const yOffset = event.clientY - gridItemNode.offsetTop;\r\n\r\n    /*\r\n    let boxes = document.getElementsByClassName(\"grid-box\");\r\n    for (let i = 0; i < boxes.length; i++) {\r\n      boxes[i].style.zIndex = 20;\r\n    }\r\n    gridItemNode.style.zIndex = 30;\r\n    */\r\n   \r\n    const { ownerDocument } = gridItemNode;\r\n    ownerDocument.addEventListener('mouseup', this.onMouseUp);\r\n    ownerDocument.addEventListener('mousemove', this.onMouseMove);\r\n    this.setState({\r\n      xOffset: xOffset,\r\n      yOffset: yOffset\r\n    });\r\n\r\n    this.props.onMouseDown('drag');\r\n  }\r\n\r\n  onMouseUp = (event) => {\r\n    event.preventDefault();\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    if (thisNode) {\r\n      const { ownerDocument } = thisNode;\r\n      ownerDocument.removeEventListener('mousedown', this.onMouseDown);\r\n      ownerDocument.removeEventListener('mouseup', this.onMouseUp);\r\n      ownerDocument.removeEventListener('mousemove', this.onMouseMove);\r\n    }\r\n    this.props.onMouseUp();\r\n  }\r\n\r\n  onMouseMove = (event) => {\r\n    event.preventDefault();\r\n    if (this.props.mode !== 'drag') {\r\n      return; \r\n    }\r\n\r\n    let gridCell = 1;\r\n    if (this.props.snapToGrid) {\r\n      gridCell = 4;\r\n    }\r\n\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    const gridItemNode = thisNode.parentNode;\r\n    let currentX = event.clientX - this.state.xOffset;\r\n    let currentY = event.clientY - this.state.yOffset;\r\n    \r\n    const containerNode = gridItemNode.parentNode;\r\n    const containerWidth = containerNode.clientWidth;\r\n    const containerHeight = containerNode.clientHeight;\r\n    \r\n    let boxWidth = parseInt(gridItemNode.style.width, 10) + WIDGET_BORDER * 2;\r\n    let boxHeight = parseInt(gridItemNode.style.height, 10) + WIDGET_BORDER * 2;\r\n\r\n    if (currentX < 0) {\r\n      currentX = 0;\r\n    }\r\n    if (currentY < 0) {\r\n      currentY = 0;\r\n    }\r\n    if (currentX + boxWidth > containerWidth) {\r\n      currentX = containerWidth - boxWidth;\r\n    }\r\n    if (currentY + boxHeight > containerHeight) {\r\n      currentY = containerHeight - boxHeight;\r\n    }\r\n\r\n    currentX = Math.floor(currentX / gridCell) * gridCell;\r\n    currentY = Math.floor(currentY / gridCell) * gridCell;\r\n\r\n    gridItemNode.style.left = currentX + 'px';\r\n    gridItemNode.style.top = currentY + 'px';\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"grid-draggable\"\r\n        onMouseDown={this.onMouseDown}\r\n        onMouseUp={this.onMouseUp}>\r\n        <FontAwesomeIcon icon=\"expand-arrows-alt\" fixedWidth />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GridDraggable;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nconst MIN_WIDTH = 30;\r\nconst MIN_HEIGHT = 30;\r\nconst WIDGET_BORDER = 2;\r\n\r\n\r\nclass GridResizable extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentX: 0,\r\n      currentY: 0,\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    if (thisNode) {\r\n      const { ownerDocument } = thisNode;\r\n      ownerDocument.removeEventListener('mousedown', this.onMouseDown);\r\n      ownerDocument.removeEventListener('mouseup', this.onMouseUp);\r\n      ownerDocument.removeEventListener('mousemove', this.onMouseMove);\r\n    }\r\n  }\r\n\r\n  onMouseDown = (event) => {\r\n    event.preventDefault();\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    const currentX = event.clientX;\r\n    const currentY = event.clientY;\r\n    \r\n    const { ownerDocument } = thisNode;\r\n    ownerDocument.addEventListener('mouseup', this.onMouseUp);\r\n    ownerDocument.addEventListener('mousemove', this.onMouseMove);\r\n    this.setState({\r\n      currentX: currentX,\r\n      currentY: currentY\r\n    });\r\n\r\n    this.props.onMouseDown('resize');\r\n  }\r\n\r\n  onMouseUp = (event) => {\r\n    event.preventDefault();\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    if (thisNode) {\r\n      const { ownerDocument } = thisNode;\r\n      ownerDocument.removeEventListener('mousedown', this.onMouseDown);\r\n      ownerDocument.removeEventListener('mouseup', this.onMouseUp);\r\n      ownerDocument.removeEventListener('mousemove', this.onMouseMove);\r\n    }\r\n    this.props.onMouseUp();\r\n  }\r\n\r\n  onMouseMove = (event) => {\r\n    event.preventDefault();\r\n    if (this.props.mode !== 'resize') {\r\n      return; \r\n    }\r\n\r\n    let xOffset = event.clientX - this.state.currentX;\r\n    let yOffset = event.clientY - this.state.currentY;\r\n\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    const gridItemNode = thisNode.parentNode;\r\n    const prevWidth = parseInt(gridItemNode.style.width, 10);\r\n    const prevHeight = parseInt(gridItemNode.style.height, 10);\r\n\r\n    const containerNode = gridItemNode.parentNode;\r\n    const containerWidth = containerNode.clientWidth;\r\n    const containerHeight = containerNode.clientHeight;\r\n\r\n    let newWidth = Math.floor(prevWidth + xOffset);\r\n    let newHeight = Math.floor(prevHeight + yOffset);\r\n\r\n    if (newWidth < MIN_WIDTH) {\r\n      newWidth = MIN_WIDTH;\r\n    }\r\n    \r\n    if (newHeight < MIN_HEIGHT) {\r\n      newHeight = MIN_HEIGHT;\r\n    }\r\n\r\n    const left = gridItemNode.offsetLeft + WIDGET_BORDER * 2;\r\n    const top = gridItemNode.offsetTop + WIDGET_BORDER * 2;\r\n\r\n    if (newWidth +  left > containerWidth) {\r\n      newWidth = containerWidth - left;\r\n    }\r\n\r\n    if (newHeight + top > containerHeight) {\r\n      newHeight = containerHeight - top;\r\n    }\r\n\r\n    gridItemNode.style.width = newWidth + 'px';\r\n    gridItemNode.style.height = newHeight + 'px';\r\n\r\n    this.setState({\r\n      currentX: event.clientX,\r\n      currentY: event.clientY\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div \r\n        className=\"grid-resizable\"\r\n        onMouseDown={this.onMouseDown}\r\n        onMouseUp={this.onMouseUp} >\r\n        <FontAwesomeIcon icon=\"compress\" fixedWidth />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GridResizable;","import React from 'react';\r\nimport ReactTable from 'react-table';\r\nimport 'react-table/react-table.css';\r\nimport './TableWidget.css';\r\n\r\nclass TableWidget extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n    };\r\n  }\r\n\r\n  goToLink = (link) => {\r\n    this.props.onTableTdClick(link);\r\n  }\r\n\r\n  render() {   \r\n    const {\r\n      data = [],\r\n      columns = [],\r\n      drillThrough = [],\r\n      error\r\n    } = this.props;\r\n\r\n    const columnHeaders = [];\r\n    columns.forEach(column => {\r\n      const columnName = column.name;\r\n      const header = {\r\n        Header: columnName,\r\n        accessor: columnName\r\n      };\r\n      if (drillThrough.length > 0) {\r\n        const index = drillThrough.findIndex(d => d.columnName === columnName);\r\n        if (index !== -1) {\r\n          const dashboardId = drillThrough[index].dashboardId;\r\n          header.Cell = (props => \r\n            <span className=\"link-label\" \r\n              onClick={() => this.goToLink(`/workspace/dashboard/${dashboardId}?${columnName}=${props.value}`)}>\r\n              {props.value}\r\n            </span>\r\n          );\r\n        }\r\n      }\r\n\r\n      columnHeaders.push(header);\r\n    });\r\n\r\n    if (error) {\r\n      return (\r\n        <div>\r\n          {error}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <ReactTable\r\n        data={data}\r\n        columns={columnHeaders}\r\n        defaultPageSize={10}\r\n        previousText={'Prev'}\r\n        nextText={'Next'}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default TableWidget;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Checkbox from '../Checkbox';\r\nimport './Slicer.css';\r\n\r\nclass Slicer extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isSelectAll: false,\r\n      searchValue: ''\r\n    };\r\n  }\r\n\r\n  static propTypes = {\r\n    checkBoxes: PropTypes.array.isRequired,\r\n    onChange: PropTypes.func.isRequired\r\n  };\r\n\r\n  toggleSelectAll = () => {\r\n    const newIsSelectAll = !this.state.isSelectAll;\r\n    const newCheckBoxes = [...this.props.checkBoxes];\r\n    for (let i = 0; i < newCheckBoxes.length; i++) {\r\n      newCheckBoxes[i].isChecked = newIsSelectAll;\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      isSelectAll: !prevState.isSelectAll\r\n    }));\r\n\r\n    this.props.onChange(this.props.id, newCheckBoxes);\r\n  }\r\n\r\n  handleSearchValueChange = (event) => {\r\n    const searchValue = event.target.value;\r\n    this.setState({\r\n      searchValue: searchValue\r\n    });\r\n  }\r\n\r\n  handleCheckBoxChange = (name, isChecked) => {\r\n    const newCheckBoxes = [...this.props.checkBoxes];\r\n    const index = newCheckBoxes.findIndex(x => x.value === name);\r\n    newCheckBoxes[index].isChecked = isChecked;\r\n    this.props.onChange(this.props.id, newCheckBoxes);\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      checkBoxes = [],\r\n    } = this.props;\r\n\r\n    const {\r\n      searchValue,\r\n      isSelectAll\r\n    } = this.state;\r\n\r\n    const checkBoxItems = [];\r\n    for (let i = 0; i < checkBoxes.length; i++) {\r\n      const checkBox = checkBoxes[i];\r\n      const value = checkBox.value;\r\n      if (!searchValue || (searchValue && value.includes(searchValue))) {\r\n        checkBoxItems.push(\r\n          (\r\n            <Checkbox \r\n              key={i} \r\n              name={checkBox.value} \r\n              value={checkBox.value} \r\n              checked={checkBox.isChecked} \r\n              onChange={this.handleCheckBoxChange} \r\n            />\r\n          )\r\n        )\r\n      }\r\n    }\r\n\r\n    const selectText = isSelectAll ? 'Deselect All' : 'Select All'\r\n\r\n    return (\r\n      <div>\r\n        <button className=\"button\" style={{marginBottom: '5px'}} onClick={this.toggleSelectAll}>{selectText}</button>\r\n        <input \r\n          type=\"text\" \r\n          name=\"name\" \r\n          value={this.state.searchValue}\r\n          onChange={this.handleSearchValueChange}\r\n          placeholder=\"Search...\"\r\n        />\r\n        \r\n        <div className=\"slicer-body\">\r\n          {checkBoxItems}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slicer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { withRouter } from 'react-router-dom';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport * as EchartsApi from '../api/EchartsApi';\r\nimport * as Util from '../api/Util';\r\nimport * as Constants from '../api/Constants';\r\n\r\nimport GridDraggable from './GridDraggable';\r\nimport GridResizable from './GridResizable';\r\nimport TableWidget from './TableWidget';\r\nimport Slicer from './filters/Slicer';\r\n\r\nclass GridItem extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: ''\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    if (thisNode) {\r\n      const { ownerDocument } = thisNode;\r\n      ownerDocument.removeEventListener('mousedown', this.onMouseDown);\r\n      ownerDocument.removeEventListener('mouseup', this.onMouseUp);\r\n      ownerDocument.removeEventListener('mousemove', this.onMouseMove);\r\n    }\r\n  }\r\n\r\n  onMouseDown = (mode) => {\r\n    console.log('GridItem onMouseDown', mode);\r\n    this.setState({\r\n      mode: mode\r\n    });\r\n  }\r\n\r\n  onMouseUp = () => {\r\n    this.setState({\r\n      mode: ''\r\n    });\r\n\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    const x = thisNode.offsetLeft;\r\n    const y = thisNode.offsetTop;\r\n    const width = parseInt(thisNode.style.width, 10);\r\n    const height = parseInt(thisNode.style.height, 10);\r\n    const widgetId = this.props.id;\r\n\r\n    const widget = {\r\n      id: widgetId,\r\n      x: x,\r\n      y: y,\r\n      width: width,\r\n      height: height\r\n    }\r\n\r\n    this.props.onWidgetMove(widget);\r\n  }\r\n\r\n  onMouseMove = (event, mode, state) => {\r\n    event.preventDefault();   \r\n  }\r\n\r\n  editWidget = (widgetId) => {\r\n    this.props.onWidgetEdit(widgetId);\r\n  }\r\n\r\n  exportCsv = (widgetId) => {\r\n\r\n  }\r\n\r\n  exportJson = (widgetId) => {\r\n\r\n  }\r\n\r\n  removeWidget = (widgetId) => {\r\n    this.props.onWidgetRemove(widgetId);\r\n  }\r\n\r\n  onTableTdPropsChange = (state, rowInfo, column, instance) => {\r\n    return {\r\n      onClick: (e, handleOriginal) => {\r\n        console.log(\"A Td Element was clicked!\");\r\n        console.log(\"it produced this event:\", e);\r\n        console.log(\"It was in this column:\", column);\r\n        console.log(\"It was in this row:\", rowInfo);\r\n        console.log(\"It was in this table instance:\", instance);\r\n        \r\n        const header = column.Header;\r\n        const row = rowInfo.row;\r\n        const value = row[header];\r\n        const drills = instance.props.widgetDrillThrough || []; \r\n        console.log('onTableTdPropsChange', header, value, drills);\r\n        const index = drills.findIndex(d => d.columnName === header);\r\n        if (index !== -1) {\r\n          const dashboardId = drills[index].dashboardId;\r\n          this.props.history.push(`/workspace/dashboard/${dashboardId}?${header}=${value}`);\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  onChartClick = (param, echarts) => {\r\n    console.log('onChartClick', param, echarts);\r\n  };\r\n\r\n  onChartLegendselectchanged = (param, echart) => {\r\n    console.log('onChartLegendselectchanged', param, echart);\r\n  };\r\n\r\n  onTableTdClick = (link) => {\r\n    this.props.history.push(link);\r\n  }\r\n\r\n  onSlicerChange = (widgetId, checkBoxes) => {\r\n    const data = {\r\n      checkBoxes: checkBoxes\r\n    };\r\n    this.props.onWidgetFilterInputChange(widgetId, data);\r\n  }\r\n\r\n  onSingleValueChange = (widgetId, event) => {\r\n    const value = event.target.value;\r\n    const data = {\r\n      value: value\r\n    };\r\n    this.props.onWidgetFilterInputChange(widgetId, data);\r\n  }\r\n\r\n  renderWidgetContent = () => {\r\n    const onChartEvents = {\r\n      'click': this.onChartClick,\r\n      'legendselectchanged': this.onChartLegendselectchanged\r\n    };\r\n\r\n    const { \r\n      id,\r\n      type,\r\n      chartType,\r\n      filterType,\r\n      queryResult = {},\r\n      drillThrough,\r\n      data = {},\r\n      checkBoxes,\r\n      value\r\n    } = this.props;\r\n\r\n    const queryResultData = Util.jsonToArray(queryResult.data);\r\n    const columns = queryResult.columns || [];\r\n    const error = queryResult.error;\r\n\r\n    let widgetItem = (<div></div>);\r\n    if (type === Constants.CHART) {\r\n      if (chartType === Constants.TABLE) {\r\n        widgetItem = (\r\n          <TableWidget\r\n            data={queryResultData}\r\n            columns={columns}\r\n            error={error}\r\n            drillThrough={drillThrough}\r\n            onTableTdClick={this.onTableTdClick}\r\n          />\r\n        );\r\n      } else if (chartType === Constants.PIE) {\r\n        const { \r\n          pieKey,\r\n          pieValue\r\n        } = data;\r\n        const chartOption = EchartsApi.getPieOption(queryResultData, pieKey, pieValue);\r\n        widgetItem = (\r\n          <ReactEcharts \r\n            option={chartOption}   \r\n            className=\"echarts\"\r\n            onEvents={onChartEvents}  \r\n          />\r\n        );\r\n      } \r\n    } else if (type === Constants.FILTER) {\r\n      if (filterType === Constants.SLICER) {\r\n        widgetItem = (\r\n          <div className=\"grid-box-content-panel\">\r\n            <Slicer \r\n              id={id} \r\n              checkBoxes={checkBoxes} \r\n              onChange={this.onSlicerChange} \r\n            />\r\n          </div>\r\n        );\r\n      } else if (filterType === Constants.SINGLE_VALUE) {\r\n        widgetItem = (\r\n          <div className=\"grid-box-content-panel\">\r\n            <input \r\n              type=\"text\"  \r\n              value={value}\r\n              onChange={(event) => this.onSingleValueChange(id, event)} \r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    \r\n    return widgetItem;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      id,\r\n      title,\r\n      isEditMode,\r\n      style = {},\r\n      drillThrough\r\n    } = this.props;\r\n\r\n    const { \r\n      showBorder = false,\r\n      showTitle = true,\r\n      borderColor,\r\n      backgroundColor,\r\n      zIndex\r\n    } = style;\r\n\r\n    const borderStyle = showBorder ? `2px solid ${borderColor}` : '2px solid transparent';\r\n\r\n    let gridBoxStyle = {\r\n      left: this.props.x + 'px',\r\n      top: this.props.y + 'px',\r\n      width: this.props.width + 'px',\r\n      height: this.props.height + 'px',\r\n      zIndex: zIndex,\r\n      border: borderStyle\r\n    };\r\n\r\n    const hasDrillThrough = !Util.isArrayEmpty(drillThrough);\r\n\r\n    /*\r\n    <div className=\"grid-box-file-button-group\">\r\n      <div className=\"inline-block\" onClick={() => this.exportJson(id)}>\r\n        <FontAwesomeIcon icon=\"file-export\" fixedWidth />\r\n      </div>\r\n      \r\n      <div className=\"inline-block\" onClick={() => this.exportCsv(id)}>\r\n        <FontAwesomeIcon icon=\"file-csv\" fixedWidth />\r\n      </div>\r\n      <div className=\"grid-box-file-button-group\">\r\n              <div className=\"inline-block\">\r\n                <FontAwesomeIcon icon=\"external-link-alt\" fixedWidth />\r\n              </div>\r\n            </div>\r\n    </div>\r\n    */\r\n\r\n    return (\r\n      <div className=\"grid-box\" style={gridBoxStyle}>\r\n        <div className=\"grid-box-title\">\r\n          <div className=\"grid-box-title-value float-left ellipsis\">{title}</div>\r\n\r\n          { isEditMode && (\r\n            <div className=\"float-right\" style={{marginRight: '20px'}}>\r\n              <div className=\"grid-box-icon inline-block\" onClick={() => this.editWidget(id)}>\r\n                <FontAwesomeIcon icon=\"edit\" fixedWidth />\r\n              </div>\r\n              <div className=\"grid-box-icon inline-block\" onClick={() => this.removeWidget(id)}>\r\n                <FontAwesomeIcon icon=\"trash-alt\" fixedWidth />\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n        </div>\r\n\r\n        <div className=\"grid-box-content\">\r\n          {this.renderWidgetContent()}\r\n        </div>\r\n\r\n        { isEditMode && (\r\n          <GridDraggable \r\n            onMouseUp={this.onMouseUp}\r\n            onMouseDown={this.onMouseDown}\r\n            onMouseMove={this.onMouseMove}\r\n            mode={this.state.mode}\r\n            snapToGrid={this.props.snapToGrid} \r\n          />\r\n        )}\r\n\r\n        { isEditMode && (\r\n          <GridResizable \r\n            onMouseUp={this.onMouseUp}\r\n            onMouseDown={this.onMouseDown}\r\n            onMouseMove={this.onMouseMove}\r\n            mode={this.state.mode} \r\n          />\r\n        )}\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(GridItem);","import React from 'react';\r\n\r\nimport GridItem from './GridItem';\r\nimport './GridLayout.css';\r\n\r\nclass GridLayout extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      width,\r\n      height,\r\n      backgroundColor,\r\n      widgets = [],\r\n      showGridlines\r\n    } = this.props;\r\n\r\n    let style = {\r\n      width: width + 'px',\r\n      height: height + 'px',\r\n      backgroundColor: backgroundColor\r\n    };\r\n\r\n    if (showGridlines) {\r\n      style.backgroundSize = '15px 15px';\r\n      style.backgroundImage = 'radial-gradient(rgb(63, 93, 131) 10%, transparent 10%)';\r\n    }\r\n\r\n    const boxItems = widgets.map((widget, index) => \r\n      <GridItem\r\n        key={index}\r\n        snapToGrid={this.props.snapToGrid}\r\n        isEditMode={this.props.isEditMode}\r\n        {...widget}\r\n        onWidgetMove={this.props.onWidgetMove}\r\n        onWidgetEdit={this.props.onWidgetEdit}\r\n        onWidgetRemove={this.props.onWidgetRemove}\r\n        onWidgetFilterInputChange={this.props.onWidgetFilterInputChange}\r\n      />\r\n    );\r\n\r\n\r\n    return (\r\n      <div\r\n        className=\"grid-layout\"\r\n        style={style} >\r\n        {boxItems}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GridLayout;","\r\nimport React from 'react';\r\nimport axios from 'axios';\r\n\r\nimport ColorPicker from './ColorPicker';\r\nimport Checkbox from './Checkbox';\r\n\r\nimport GridLayout from './GridLayout';\r\nimport * as Util from '../api/Util';\r\nimport Modal from '../components/Modal';\r\nimport * as Constants from '../api/Constants';\r\n\r\n\r\nconst BASE_WIDTH = 1200;\r\n\r\nclass WidgetViewPanel extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      widgets: [],\r\n      gridWidth: 1200,\r\n      snapToGrid: false,\r\n      showGridlines: false,\r\n      showConfirmDeletionPanel: false,\r\n      objectToDelete: {}\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  resizeGrid = (viewWidth) => {\r\n    const { widgets } = this.state;\r\n    const newWidgets = [...widgets];\r\n\r\n    const gridWidth = viewWidth - 10;\r\n    this.resizeWidgetsToActual(newWidgets, gridWidth);\r\n    this.setState({\r\n      widgets: newWidgets,\r\n      gridWidth: gridWidth\r\n    });\r\n  }\r\n\r\n  resizeWidgetsToBase = (widgets, gridWidth) => {\r\n    for (let i = 0; i < widgets.length; i++) {\r\n      const baseX = this.scaleToBase(widgets[i].x, gridWidth);\r\n      const baseWidth = this.scaleToBase(widgets[i].width, gridWidth);\r\n      widgets[i].x = baseX;\r\n      widgets[i].width = baseWidth;\r\n    }\r\n  }\r\n\r\n  resizeWidgetsToActual = (widgets, gridWidth) => {\r\n    for (let i = 0; i < widgets.length; i++) {\r\n      const actualX = this.scaleToActual(widgets[i].x, gridWidth);\r\n      const actualdWidth = this.scaleToActual(widgets[i].width, gridWidth);\r\n      widgets[i].x = actualX;\r\n      widgets[i].width = actualdWidth;\r\n    }\r\n  }\r\n\r\n  scaleToActual = (num, gridWidth) => {\r\n    return Math.round(num * gridWidth / BASE_WIDTH);\r\n  }\r\n\r\n  scaleToBase = (num, gridWidth) => {\r\n    return Math.round(num * BASE_WIDTH / gridWidth);\r\n  }\r\n\r\n  fetchWidgets = (dashboardId, viewWidth) => {\r\n    if (dashboardId === null) {\r\n      return;\r\n    }\r\n    axios.get(`/ws/widget/dashboard/${dashboardId}`)\r\n      .then(res => {\r\n        const result = res.data;\r\n        this.setState({\r\n          widgets: result\r\n        }, () => {\r\n          this.resizeGrid(viewWidth);\r\n          this.queryFilters();\r\n          this.queryCharts();\r\n        });\r\n      });\r\n  }\r\n \r\n  queryCharts() {\r\n    const filterParams = this.getFilterParams();\r\n    const { widgets } = this.state;\r\n    for (let i = 0; i < widgets.length; i++) {\r\n      const {\r\n        id,\r\n        type,\r\n      } = widgets[i];\r\n      if (type === Constants.CHART) {\r\n        this.queryChart(id, filterParams);\r\n      }\r\n    }\r\n  }\r\n\r\n  queryFilters() {\r\n    const { widgets } = this.state;\r\n    for (let i = 0; i < widgets.length; i++) {\r\n      const {\r\n        id,\r\n        type,\r\n        filterType\r\n      }  = widgets[i];\r\n      if (type === Constants.FILTER) {\r\n        this.queryFilter(id, filterType);\r\n      }\r\n    }\r\n  }\r\n\r\n  queryChart(widgetId, filterParams) {\r\n    const params = filterParams === null ? [] : filterParams;\r\n    const { widgets } = this.state;\r\n    axios.post(`/ws/jdbcquery/widget/${widgetId}`, params)\r\n      .then(res => {\r\n        const queryResult = res.data;\r\n        const index = widgets.findIndex(w => w.id === queryResult.id);\r\n        const newWidgets = [...widgets];\r\n        newWidgets[index].queryResult = queryResult;\r\n        this.setState({\r\n          widgets: newWidgets\r\n        });\r\n      });\r\n  }\r\n\r\n  queryFilter(widgetId, filterType) {\r\n    const { widgets } = this.state;\r\n    if (filterType === Constants.SLICER) {\r\n      axios.post(`/ws/jdbcquery/widget/${widgetId}`, [])\r\n        .then(res => {\r\n          const queryResult = res.data;\r\n          const queryResultData = Util.jsonToArray(queryResult.data);\r\n          const checkBoxes = [];\r\n          for (let i = 0; i < queryResultData.length; i++) {\r\n            const values = Object.values(queryResultData[i]);\r\n            for (const val of values) {\r\n              checkBoxes.push({\r\n                value: val,\r\n                isChecked: false\r\n              });\r\n            }\r\n          }\r\n          const index = widgets.findIndex(w => w.id === queryResult.id);\r\n          const newWidgets = [...widgets];\r\n          newWidgets[index].queryResult = queryResult;\r\n          newWidgets[index].checkBoxes = checkBoxes;\r\n          this.setState({\r\n            widgets: newWidgets\r\n          });\r\n        });\r\n    } else if (filterType === Constants.SINGLE_VALUE) {\r\n      /*\r\n        const values = Object.values(queryResultData);\r\n        let value = '';\r\n        for (const val of values) {\r\n          value = val;\r\n          break;\r\n        }\r\n        newFilters[index].value = value;\r\n      */\r\n      const index = widgets.findIndex(w => w.id === widgetId);\r\n      const newWidgets = [...widgets];\r\n      newWidgets[index].value = '';\r\n      this.setState({\r\n        widgets: newWidgets\r\n      });\r\n    }\r\n  }\r\n\r\n  handleCheckBoxChange = (name, isChecked) => {\r\n    this.setState({\r\n      [name]: isChecked\r\n    });\r\n  }\r\n\r\n  saveWidgets = () => {\r\n    const newWidgets = JSON.parse(JSON.stringify(this.state.widgets));\r\n    const { gridWidth } = this.state;\r\n    this.resizeWidgetsToBase(newWidgets, gridWidth);\r\n    axios.post('/ws/widget/position', newWidgets)\r\n      .then(res => {\r\n      });\r\n  }\r\n\r\n  onWidgetMove = (widget) => {\r\n    const { widgets } = this.state;\r\n    const index = widgets.findIndex(w => w.id === widget.id);\r\n    const newWidgets = [...widgets];\r\n    newWidgets[index].x = widget.x;\r\n    newWidgets[index].y = widget.y;\r\n    newWidgets[index].width = widget.width;\r\n    newWidgets[index].height = widget.height;\r\n    this.setState({\r\n      widgets: newWidgets\r\n    }, () => {\r\n      // FIXME: only save this widget. Not all.\r\n      this.saveWidgets();\r\n    });\r\n  }\r\n\r\n  confirmDelete = () => {\r\n    const { \r\n      objectToDelete\r\n    } = this.state;\r\n    const widgetId = objectToDelete;\r\n    axios.delete(`/ws/widget/${widgetId}`)\r\n      .then(res => {\r\n        const { widgets } = this.state;\r\n        const index = widgets.findIndex(w => w.id === widgetId);\r\n        const newWidgets = [...widgets];\r\n        newWidgets.splice(index, 1);\r\n        this.setState({\r\n          widgets: newWidgets\r\n        });\r\n        this.closeConfirmDeletionPanel();\r\n      });\r\n  }\r\n\r\n  openConfirmDeletionPanel = (widgetId) => {\r\n    this.setState({\r\n      objectToDelete: widgetId,\r\n      showConfirmDeletionPanel: true\r\n    });\r\n  }\r\n\r\n  closeConfirmDeletionPanel = () => {\r\n    this.setState({\r\n      objectToDelete: {},\r\n      showConfirmDeletionPanel: false\r\n    });\r\n  }\r\n\r\n  onWidgetFilterInputChange = (widgetId, data) => {\r\n    const { \r\n      widgets = []\r\n    } = this.state;\r\n    const index = widgets.findIndex(w => w.id === widgetId);\r\n    const newWidgets = [...widgets];\r\n    const widget = widgets[index];\r\n    if (widget.filterType === Constants.SLICER) {\r\n      const {\r\n        checkBoxes\r\n      } = data;\r\n      newWidgets[index].checkBoxes = checkBoxes;\r\n    } else if (widget.filterType === Constants.SINGLE_VALUE) {\r\n      const {\r\n        value\r\n      } = data;\r\n      newWidgets[index].value = value;\r\n    }\r\n\r\n    this.setState({\r\n      widgets: newWidgets\r\n    });   \r\n  }\r\n\r\n  /**\r\n   * FIXME: optimize it. No need to calculate this every time.\r\n   */\r\n  getFilterParams = () => {\r\n    const { \r\n      widgets = []\r\n    } = this.state;\r\n    const filterParams = [];\r\n    for (let i = 0; i < widgets.length; i++) {\r\n      const widget = widgets[i];\r\n      if (widget.type === Constants.FILTER) {\r\n        const { filterType } = widget;\r\n        const filterParam = {};\r\n        if (filterType === Constants.SLICER) {\r\n          const { \r\n            checkBoxes = []\r\n          } = widget;\r\n          const paramValues = [];\r\n          for (let j = 0; j < checkBoxes.length; j++) {\r\n            const checkBox = checkBoxes[j];\r\n            if (checkBox.isChecked) {\r\n              paramValues.push(checkBox.value);\r\n            }\r\n          }\r\n          filterParam.value = paramValues;\r\n          if (paramValues.length === checkBoxes.length) {\r\n            filterParam.remark = 'select all';\r\n          }\r\n        } else if (filterType === Constants.SINGLE_VALUE) {\r\n          filterParam.value = widget.value;\r\n        }\r\n        filterParam.param = widget.data.queryParameter;\r\n        filterParam.type = widget.filterType;\r\n        filterParams.push(filterParam);\r\n      }\r\n    }\r\n    return filterParams;\r\n  }\r\n\r\n  render() {\r\n    const { widgetViewWidth } = this.props;\r\n    const style = {\r\n      width: widgetViewWidth + 'px'\r\n    }\r\n\r\n    return (\r\n      <div className=\"dashboard-content-widget-panel\" style={style}>\r\n\r\n        {this.props.isEditMode && (\r\n          <div className=\"dashboard-attribute-edit-panel\">\r\n            <div className=\"inline-block\">Height:</div>\r\n            <input \r\n              type=\"text\" \r\n              name=\"height\" \r\n              value={this.props.height}\r\n              onChange={(event) => this.props.onStyleValueChange('height', event.target.value)} \r\n              className=\"inline-block\" \r\n              style={{width: '200px'}}\r\n              />\r\n\r\n            <div>\r\n              Background Color\r\n              <ColorPicker name={'backgroundColor'} value={this.props.backgroundColor} onChange={this.props.onStyleValueChange} />\r\n            </div>\r\n\r\n            <Checkbox name=\"snapToGrid\" value=\"Snap to grid\" checked={this.state.snapToGrid} onChange={this.handleCheckBoxChange} />\r\n            <Checkbox name=\"showGridlines\" value=\"Show gridlines\" checked={this.state.showGridlines} onChange={this.handleCheckBoxChange} />\r\n  \r\n          </div>\r\n        )}\r\n        \r\n        <GridLayout \r\n          width={this.state.gridWidth}\r\n          height={this.props.height}\r\n          backgroundColor={this.props.backgroundColor}\r\n          snapToGrid={this.state.snapToGrid}\r\n          showGridlines={this.state.showGridlines}\r\n          widgets={this.state.widgets}\r\n          isEditMode={this.props.isEditMode}\r\n          onWidgetMove={this.onWidgetMove}\r\n          onWidgetEdit={this.props.onWidgetEdit} \r\n          onWidgetRemove={this.openConfirmDeletionPanel} \r\n          onWidgetFilterInputChange={this.onWidgetFilterInputChange}\r\n        />\r\n        \r\n        <Modal \r\n          show={this.state.showConfirmDeletionPanel}\r\n          onClose={this.closeConfirmDeletionPanel}\r\n          modalClass={'small-modal-panel'}\r\n          title={'Confirm Deletion'} >\r\n          <div className=\"confirm-deletion-panel\">\r\n            Are you sure you want to delete this widget?\r\n          </div>\r\n          <button className=\"button\" onClick={this.confirmDelete}>Delete</button>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nexport default WidgetViewPanel;","import React from 'react';\r\nimport './Tabs.css';\r\n\r\nclass Tabs extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const activeTab = this.props.activeTab;\r\n    this.setState({\r\n      activeTab: activeTab\r\n    });\r\n  }\r\n\r\n  handleTabClick = (title) => {\r\n    this.setState({\r\n      activeTab: title\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      children\r\n    } = this.props;\r\n\r\n    const {\r\n      activeTab\r\n    } = this.state;\r\n\r\n    const tabHeaders = [];\r\n    let tabContent = null;\r\n    for (let i = 0; i < children.length; i++) {\r\n      if (children[i]) {\r\n        const title = children[i].props.title;\r\n        let active = '';\r\n        if (title === activeTab) {\r\n          active = 'tab-header-active';\r\n          tabContent = children[i].props.children;\r\n        }\r\n        \r\n        tabHeaders.push(\r\n          <li className={`tab-header-item ${active}`} key={i} onClick={() => this.handleTabClick(title)}>{title}</li>\r\n        );\r\n      }\r\n    }\r\n    \r\n    return (\r\n      <div className=\"tab-container\">\r\n        <ul className=\"tab-header\">\r\n          {tabHeaders}\r\n        </ul>\r\n        <div className=\"tab-content\">\r\n          {tabContent}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tabs;\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Select extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  static propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    value: PropTypes.string.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    options: PropTypes.array.isRequired,\r\n    optionDisplay: PropTypes.string,\r\n    optionValue: PropTypes.string,\r\n    preloadOneEmpty: PropTypes.bool\r\n  };\r\n\r\n  handleOptionChange = (event) => {\r\n    const name = this.props.name;\r\n    const value = event.target.value;\r\n    this.props.onChange(name, value);\r\n  }\r\n  \r\n  render() {\r\n    const {\r\n      value,\r\n      options = [],\r\n      optionValue,\r\n      optionDisplay,\r\n      preloadOneEmpty = true\r\n    } = this.props;\r\n\r\n    const optionList = [];\r\n    if (preloadOneEmpty) {\r\n      optionList.push(\r\n        <option value=\"\" key=\"\"></option>\r\n      );\r\n    }\r\n    \r\n    options.forEach((option, index) => {\r\n      let value;\r\n      let display;\r\n      if (optionValue && optionDisplay) {\r\n        // The options contain objects.\r\n        value = option[optionValue];\r\n        display = option[optionDisplay];\r\n      } else {\r\n        // The options contain string or number.\r\n        value = option;\r\n        display = option;\r\n      }\r\n      \r\n      optionList.push(\r\n        <option value={value} key={index}>{display}</option>\r\n      ) \r\n    });\r\n\r\n    return (\r\n      <select value={value} onChange={this.handleOptionChange}>\r\n        {optionList}\r\n      </select>\r\n    )\r\n  };\r\n}\r\n\r\nexport default Select;","\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport AceEditor from 'react-ace';\r\nimport 'brace/mode/mysql';\r\nimport 'brace/theme/xcode';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport ReactEcharts from 'echarts-for-react';\r\n\r\nimport './WidgetEditPanel.css';\r\n\r\nimport * as webApi from '../api/WebApi';\r\nimport * as Util from '../api/Util';\r\nimport * as EchartsApi from '../api/EchartsApi';\r\nimport * as Constants from '../api/Constants';\r\n\r\nimport Checkbox from './Checkbox';\r\nimport Tabs from './Tabs';\r\nimport Select from './Select';\r\nimport TableWidget from './TableWidget';\r\nimport ColorPicker from './ColorPicker';\r\n\r\n\r\nclass WidgetEditPanel extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = this.initialState;\r\n  }\r\n\r\n  get initialState() {\r\n    return {\r\n      jdbcDataSources: [],\r\n      widgetId: null,\r\n      title: '',\r\n      sqlQuery: '',\r\n      jdbcDataSourceId: '',\r\n      queryResult: {},\r\n      type: Constants.CHART,\r\n      filterType: Constants.SINGLE_VALUE,\r\n      chartType: Constants.TABLE,\r\n      style: {\r\n        showBorder: false,\r\n        borderColor: 'rgba(9, 30, 66, 1)',\r\n        showTitle: true,\r\n        backgroundColor: 'rgba(255, 255, 255, 1)',\r\n        zIndex: 50\r\n      },\r\n      queryParameter: '',\r\n      drillThrough: [],\r\n      drillDashboards: [],\r\n      drillColumnName: '',\r\n      drillDashboardId: '',\r\n      pieKey: '',\r\n      pieValue: '',\r\n      chartOption: {}\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  fetchWidget = async (widgetId) => {\r\n    this.setState(this.initialState);\r\n\r\n    const jdbcDataSources = await webApi.fetchDataSources();\r\n    this.setState({ \r\n      jdbcDataSources: jdbcDataSources \r\n    });\r\n\r\n    axios.get('/ws/dashboard')\r\n      .then(res => {\r\n        const dashboards = res.data;\r\n        this.setState({ \r\n          drillDashboards: dashboards \r\n        });\r\n      });\r\n\r\n    if (widgetId === null) {\r\n      this.setState({\r\n        widgetId: null\r\n      })\r\n    } else {\r\n      this.setState({\r\n        widgetId: widgetId\r\n      })\r\n      axios.get('/ws/widget/' + widgetId)\r\n        .then(res => {\r\n          const widget = res.data;\r\n          const {\r\n            type,\r\n            chartType,\r\n            filterType,\r\n            drillThrough\r\n          } = widget;\r\n          if (type === Constants.CHART) {\r\n            this.setState({\r\n              chartType: chartType,\r\n              drillThrough: drillThrough\r\n            });\r\n\r\n            if (chartType === Constants.PIE) {\r\n              const {\r\n                pieKey,\r\n                pieValue\r\n              } = widget.data;\r\n              this.setState({\r\n                pieKey: pieKey,\r\n                pieValue: pieValue\r\n              });\r\n            }\r\n          } else if (type === Constants.FILTER) {\r\n            const {\r\n              queryParameter\r\n            } = widget.data;\r\n            this.setState({\r\n              filterType: filterType,\r\n              queryParameter: queryParameter\r\n            });\r\n            if (filterType === Constants.SLICER) {\r\n\r\n            } else if (filterType === Constants.SINGLE_VALUE) {\r\n\r\n            }\r\n          }\r\n          \r\n          this.setState({\r\n            widgetId: widgetId,\r\n            title: widget.title,\r\n            x: widget.x,\r\n            y: widget.y,\r\n            width: widget.width,\r\n            height: widget.height,\r\n            sqlQuery: widget.sqlQuery,\r\n            type: type,\r\n            jdbcDataSourceId: widget.jdbcDataSourceId,\r\n            style: widget.style\r\n          }, () => {\r\n            this.runQuery();\r\n          });\r\n\r\n        });\r\n    }\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  onStyleValueChange = (name, value) => {\r\n    const style = {...this.state.style};\r\n    style[[name]] = value;\r\n    this.setState({\r\n      style: style\r\n    });\r\n  }\r\n\r\n  handleAceEditorChange = (newValue) => {\r\n    this.setState({\r\n      sqlQuery: newValue\r\n    });\r\n  }\r\n\r\n  handleIntegerOptionChange = (name, value) => {\r\n    const intValue = parseInt(value, 10) || 0;\r\n    this.setState({ \r\n      [name]: intValue\r\n    });\r\n  }\r\n\r\n  handleOptionChange = (name, value) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n\r\n  save = () => {\r\n    const {\r\n      widgetId,\r\n      title,\r\n      jdbcDataSourceId,\r\n      sqlQuery,\r\n      type,\r\n      style\r\n    } = this.state;\r\n\r\n    const widget = {\r\n      title: title,\r\n      dashboardId: this.props.dashboardId,\r\n      type: type,\r\n      jdbcDataSourceId: jdbcDataSourceId,\r\n      sqlQuery: sqlQuery,\r\n      style: style\r\n    }\r\n\r\n    if (type === Constants.CHART) {\r\n      const {\r\n        chartType,\r\n        drillThrough\r\n      } = this.state;\r\n      widget.drillThrough = drillThrough;\r\n      widget.chartType = chartType;\r\n\r\n      if (chartType === Constants.TABLE) {\r\n\r\n      } else if (chartType === Constants.PIE) {\r\n        const {\r\n          pieKey,\r\n          pieValue\r\n        } = this.state;\r\n        widget.data = {\r\n          pieKey: pieKey,\r\n          pieValue: pieValue\r\n        }\r\n      }\r\n    } else if (type === Constants.FILTER) {\r\n      const  {\r\n        filterType,\r\n        queryParameter\r\n      } = this.state;\r\n      widget.filterType = filterType;\r\n      widget.data = {\r\n        queryParameter: queryParameter\r\n      }\r\n      if (filterType === Constants.SLICER) {\r\n\r\n      } else if (filterType === Constants.SINGLE_VALUE) {\r\n\r\n      }\r\n    }\r\n    \r\n\r\n    if (widgetId === null) {\r\n      widget.style = {\r\n        showBorder: false,\r\n        borderColor: 'rgba(9, 30, 66, 1)',\r\n        showTitle: true,\r\n        backgroundColor: 'rgba(255, 255, 255, 1)',\r\n        zIndex: 50\r\n      }\r\n\r\n      axios.post('/ws/widget', widget)\r\n        .then(res => {\r\n          this.props.onSave();\r\n        });\r\n    } else {\r\n      widget.id = widgetId;\r\n      axios.put('/ws/widget', widget)\r\n        .then(res => {\r\n          this.props.onSave();\r\n        });\r\n    }\r\n  }\r\n\r\n  runQuery = () => {\r\n    const queryRequest ={\r\n      jdbcDataSourceId: this.state.jdbcDataSourceId,\r\n      sqlQuery: this.state.sqlQuery\r\n    };\r\n\r\n    axios.post('/ws/jdbcquery/query', queryRequest)\r\n      .then(res => {\r\n        const result = res.data;\r\n        this.setState({\r\n          queryResult: result\r\n        });\r\n      });\r\n  }\r\n\r\n  addDrillThrough = () => {\r\n    const { \r\n      drillThrough,\r\n      drillColumnName,\r\n      drillDashboardId\r\n    } = this.state;\r\n    const index = drillThrough.findIndex(d => d.columnName === drillColumnName);\r\n    if (index === -1) {\r\n      const newDrillThrough = [...drillThrough];\r\n      newDrillThrough.push({\r\n        columnName: drillColumnName,\r\n        dashboardId: drillDashboardId\r\n      });\r\n      this.setState({\r\n        drillThrough: newDrillThrough\r\n      });\r\n    } \r\n  }\r\n\r\n  removeDrillThrough = (drill) => {\r\n    const { drillThrough } = this.state;\r\n    const index = drillThrough.findIndex(d => (d.columnName === drill.columnName) && (d.dashboardId === drill.dashboardId));\r\n    if (index !== -1) {\r\n      const newDrillThrough = [...drillThrough];\r\n      newDrillThrough.splice(index, 1);\r\n      this.setState({\r\n        drillThrough: newDrillThrough\r\n      });\r\n    } \r\n  }\r\n\r\n  generateChart = () => {\r\n    if (this.state.chartType === Constants.PIE) {\r\n      const { \r\n        pieKey, \r\n        pieValue, \r\n        queryResult = {}\r\n      } = this.state;\r\n      const data = Util.jsonToArray(queryResult.data);\r\n      const chartOption = EchartsApi.getPieOption(data, pieKey, pieValue);\r\n      this.setState({\r\n        chartOption: chartOption\r\n      });\r\n    }\r\n  }\r\n\r\n  renderChartPreview = () => {\r\n    const { \r\n      chartType,\r\n      queryResult = {},\r\n    } = this.state;\r\n    const columns = queryResult.columns || [];\r\n\r\n    let chartPreview = (<div>NOT SUPPORTED</div>);\r\n    if (chartType === Constants.TABLE) {\r\n\r\n    } else if (chartType === Constants.PIE) {\r\n      const { \r\n        chartOption,\r\n        pieKey,\r\n        pieValue\r\n      } = this.state;\r\n\r\n      chartPreview = (\r\n        <div>\r\n          <label><i class=\"fas fa-chart-pie\"></i> Pie Chart</label>\r\n          <div>Count \"value\" by \"key\"</div>\r\n          <label>Aggr Key (string)</label>\r\n          <Select\r\n            name={'pieKey'}\r\n            value={pieKey}\r\n            onChange={this.handleOptionChange}\r\n            options={columns}\r\n            optionDisplay={'name'}\r\n            optionValue={'name'}\r\n          />\r\n\r\n\r\n          <label>By Aggr Value (number)</label>\r\n          <Select\r\n            name={'pieValue'}\r\n            value={pieValue}\r\n            onChange={this.handleOptionChange}\r\n            options={columns}\r\n            optionDisplay={'name'}\r\n            optionValue={'name'}\r\n          />\r\n          <button onClick={this.generateChart}>Generete Chart</button>\r\n          <ReactEcharts \r\n            option={chartOption} \r\n            style={{height: '350px', width: '100%'}}  \r\n            className='react_for_echarts' />\r\n        </div>\r\n      );\r\n    }\r\n    return chartPreview;\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      type,\r\n      queryResult,\r\n      jdbcDataSources = [],\r\n      drillThrough = [],\r\n      drillDashboards = []\r\n    } = this.state;\r\n\r\n    const data = Util.jsonToArray(queryResult.data);\r\n    const columns = queryResult.columns || [];\r\n    const error = queryResult.error;\r\n\r\n    const drillItems = drillThrough.map(drill =>\r\n      <div key={drill.columnName} className=\"row\">\r\n        <div className=\"float-left\">Column: {drill.columnName}</div>\r\n        <div className=\"float-left\">Dashboard: {drill.dashboardId}</div>\r\n        <button className=\"button float-right\"onClick={() => this.removeDrillThrough(drill)}>\r\n          <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" />\r\n        </button>\r\n      </div>\r\n    );\r\n\r\n    const columnItems = columns.map(col =>\r\n      <div key={col.name}>{col.name} {col.dataType}</div>\r\n    );\r\n\r\n    const showQueryTab = type === Constants.CHART || (type === Constants.FILTER && this.state.filterType === Constants.SLICER);\r\n\r\n    return (\r\n      <div>\r\n        <button className=\"button\" onClick={this.save}>Save</button>\r\n        <div className=\"row mt-10\">\r\n          <div className=\"float-left\">Type:</div>\r\n          <div className=\"float-left\">\r\n            <Select\r\n              name={'type'}\r\n              value={type}\r\n              onChange={this.handleOptionChange}\r\n              options={Constants.WIDGET_TYPES}\r\n              preloadOneEmpty={false}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"mt-10\">\r\n          <Tabs activeTab=\"Basic\">\r\n            <div title=\"Basic\">\r\n              <div className=\"form-panel\">\r\n                <label>Title</label>\r\n                <input \r\n                  type=\"text\" \r\n                  name=\"title\" \r\n                  value={this.state.title}\r\n                  onChange={this.handleInputChange} \r\n                />\r\n\r\n                <Checkbox name=\"showBorder\" value=\"Show border\" checked={this.state.style.showBorder} onChange={this.onStyleValueChange} />\r\n                <Checkbox name=\"showTitle\" value=\"Show title\" checked={this.state.style.showTitle} onChange={this.onStyleValueChange} />\r\n\r\n                <label>Z Index</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"zIndex\" \r\n                  value={this.state.style.zIndex}\r\n                  onChange={(event) => this.onStyleValueChange('zIndex', event.target.value)} \r\n                />\r\n\r\n                <div>\r\n                  Border Color\r\n                  <ColorPicker name={'borderColor'} value={this.state.style.borderColor} onChange={this.onStyleValueChange} />\r\n                </div>\r\n\r\n                <div>\r\n                  Background Color\r\n                  <ColorPicker name={'backgroundColor'} value={this.state.style.backgroundColor} onChange={this.onStyleValueChange} />\r\n                </div>\r\n\r\n                \r\n              </div>\r\n            </div>\r\n\r\n            { type === Constants.FILTER && (  \r\n              <div title=\"Filter\">\r\n                <div className=\"form-panel\">\r\n                  <label>Filter Options</label>\r\n                  <Select\r\n                    name={'filterType'}\r\n                    value={this.state.filterType}\r\n                    onChange={this.handleOptionChange}\r\n                    options={Constants.FILTER_TYPES}\r\n                    preloadOneEmpty={false}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            { showQueryTab && (\r\n              <div title=\"Query\">\r\n                <div className=\"form-panel\">\r\n                  <label>DataSource</label>\r\n                  <Select\r\n                    name={'jdbcDataSourceId'}\r\n                    value={this.state.jdbcDataSourceId}\r\n                    onChange={this.handleIntegerOptionChange}\r\n                    options={jdbcDataSources}\r\n                    optionDisplay={'name'}\r\n                    optionValue={'id'}\r\n                    />\r\n                \r\n                  <label>SQL Query</label>\r\n                  <AceEditor\r\n                    style={{ marginTop: '8px' }}\r\n                    value={this.state.sqlQuery}\r\n                    mode=\"mysql\"\r\n                    theme=\"xcode\"\r\n                    name=\"blah2\"\r\n                    onChange={this.handleAceEditorChange}\r\n                    height={'300px'}\r\n                    width={'100%'}\r\n                    fontSize={15}\r\n                    showPrintMargin={false}\r\n                    showGutter={true}\r\n                    highlightActiveLine={true}\r\n                    setOptions={{\r\n                      showLineNumbers: true,\r\n                      tabSize: 2\r\n                    }}\r\n                  />\r\n\r\n                  <div className=\"mt-3\">\r\n                    <button className=\"button\" onClick={this.runQuery}>Run Query</button>\r\n                  </div>\r\n\r\n                  <label>Result</label>\r\n                  <TableWidget\r\n                    data={data}\r\n                    columns={columns}\r\n                    error={error}\r\n                  />\r\n\r\n                  <label>Columns Mapping</label>\r\n                  <div>\r\n                    {columnItems}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            { type === Constants.CHART && (\r\n              <div title=\"Chart\">\r\n                <div className=\"form-panel\">\r\n                  <label>Chart Type</label>\r\n                  <Select\r\n                    name={'chartType'}\r\n                    value={this.state.chartType}\r\n                    onChange={this.handleOptionChange}\r\n                    options={Constants.CHART_TYPES}\r\n                    preloadOneEmpty={false}\r\n                  />\r\n                  <label>Preview</label>\r\n                  {this.renderChartPreview()} \r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            { type === Constants.CHART && (\r\n              <div title=\"Drill Through\">\r\n                <div className=\"form-panel\">\r\n                  <label>Column</label>\r\n                  <Select\r\n                    name={'drillColumnName'}\r\n                    value={this.state.drillColumnName}\r\n                    options={columns}\r\n                    onChange={this.handleOptionChange}\r\n                    optionDisplay={'name'}\r\n                    optionValue={'name'}\r\n                  />\r\n\r\n                  <label>Dashboard</label>\r\n                  <Select\r\n                    name={'drillDashboardId'}\r\n                    value={this.state.drillDashboardId}\r\n                    options={drillDashboards}\r\n                    onChange={this.handleIntegerOptionChange}\r\n                    optionDisplay={'name'}\r\n                    optionValue={'id'}\r\n                  />\r\n                  <div class=\"row mt-10\">\r\n                    {drillItems}\r\n                  </div>\r\n                  <button className=\"button\" onClick={this.addDrillThrough}>Add</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            { type === Constants.FILTER && (\r\n              <div title=\"Query parameter\">\r\n                <div className=\"form-panel\">\r\n                  <label>Parameter</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    name=\"queryParameter\" \r\n                    value={this.state.queryParameter}\r\n                    onChange={this.handleInputChange} \r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nexport default WidgetEditPanel;","\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport WidgetViewPanel from '../components/WidgetViewPanel';\r\nimport WidgetEditPanel from '../components/WidgetEditPanel';\r\n\r\nimport Modal from '../components/Modal';\r\n\r\nimport * as Constants from '../api/Constants';\r\n\r\nimport './Dashboard.css';\r\n\r\nimport * as webApi from '../api/WebApi';\r\nimport axios from 'axios';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nclass DashboardEditView extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = {\r\n      showWidgetEditPanel: false,\r\n      showConfirmDeletionPanel: false,\r\n      objectToDelete: {},\r\n      isEditMode: false,\r\n      isReadOnly: false,\r\n      autoRefreshTimerId: '',\r\n      lastRefreshed: '',\r\n      refreshInterval: 15,\r\n      lastRefreshLabelTimerId: '',\r\n      jdbcDataSourceOptions: [],\r\n      dashboardId: 0,\r\n      name: '',\r\n      style: {},\r\n      widgetViewWidth: 1000\r\n    }\r\n\r\n    this.widgetViewPanel = React.createRef();\r\n    this.widgetEditPanel = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    let id = this.props.match.params.id;\r\n    const dashboardId = id !== undefined ? id : null;\r\n    console.log('DashboardEditView - componentDidMount', dashboardId);\r\n\r\n    const url = this.props.location.search;\r\n    const params = new URLSearchParams(url);\r\n    for(let pair of params.entries()) {\r\n      console.log(pair[0]+ ', '+ pair[1]); \r\n    } \r\n\r\n    const widgetViewWidth = this.getPageWidth();\r\n    this.setState({\r\n      widgetViewWidth: widgetViewWidth\r\n    }, () => {\r\n      if (dashboardId === null) {\r\n        this.setState({\r\n          dashboardId: null\r\n        });\r\n      } else {\r\n        axios.get(`/ws/dashboard/${dashboardId}`)\r\n          .then(res => {\r\n            const result = res.data;\r\n            this.setState({\r\n              dashboardId: result.id,\r\n              name: result.name,\r\n              style: result.style\r\n            }, () => {\r\n              this.refresh();\r\n            });\r\n          });\r\n      }\r\n    });\r\n\r\n    const lastRefreshLabelTimerId = setInterval(() => {\r\n      const { lastRefreshed } = this.state;\r\n    }, 10000);\r\n    this.setState({\r\n      lastRefreshLabelTimerId: lastRefreshLabelTimerId\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { \r\n      autoRefreshTimerId,\r\n      lastRefreshLabelTimerId\r\n    } = this.state;\r\n    if (autoRefreshTimerId) {\r\n      clearInterval(autoRefreshTimerId);\r\n    }\r\n    if (lastRefreshLabelTimerId) {\r\n      clearInterval(lastRefreshLabelTimerId);\r\n    }\r\n  }\r\n\r\n  loadViewByDashboardName = () => {\r\n    const url = this.props.location.search;\r\n    const params = new URLSearchParams(url);\r\n    const dashboardName = params.get('name');\r\n\r\n    const widgetViewWidth = this.getPageWidth();\r\n\r\n    this.setState({\r\n      isReadOnly: true,\r\n      name: dashboardName,\r\n      widgetViewWidth: widgetViewWidth\r\n    }, () => {\r\n      axios.get(`/ws/dashboard/name/${dashboardName}`)\r\n        .then(res => {\r\n          const result = res.data;\r\n          this.setState({\r\n            dashboardId: result.id,\r\n            name: result.name,\r\n            style: result.style\r\n          }, () => {\r\n            this.refresh();\r\n          });\r\n        });\r\n    });\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  getPageWidth = () => {\r\n    const thisNode = ReactDOM.findDOMNode(this);\r\n    return thisNode.clientWidth - 40;\r\n  }\r\n\r\n  toggleAutoRefresh = () => {\r\n    const { autoRefreshTimerId } = this.state;\r\n    if (autoRefreshTimerId) {\r\n      clearInterval(autoRefreshTimerId);\r\n      this.setState({\r\n        autoRefreshTimerId: ''\r\n      });\r\n    } else {\r\n      const { refreshInterval } = this.state;\r\n      let interval = parseInt(refreshInterval, 10) || 15;\r\n      interval = interval < 1 ? 1 : interval;\r\n      const timerId = setInterval(() => {\r\n        this.queryWidgets();\r\n        this.updateLastRefreshed();\r\n      }, interval * 1000);\r\n      this.setState({\r\n        autoRefreshTimerId: timerId\r\n      });\r\n    }\r\n  }\r\n\r\n  refresh = () => {\r\n    this.refreshWidgetView();\r\n    this.updateLastRefreshed();\r\n  }\r\n\r\n  refreshWidgetView = () => {\r\n    const { \r\n      dashboardId,\r\n      widgetViewWidth\r\n    } = this.state;\r\n    this.widgetViewPanel.current.fetchWidgets(dashboardId, widgetViewWidth, null);\r\n  } \r\n\r\n  queryWidgets = () => {\r\n    this.widgetViewPanel.current.queryCharts();\r\n  }\r\n\r\n  updateLastRefreshed = () => {\r\n    const now = new Date().toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, \"$1\");\r\n    this.setState({\r\n      lastRefreshed: now\r\n    });\r\n  }\r\n\r\n  save = () => {\r\n    const {\r\n      dashboardId,\r\n      name,\r\n      style\r\n    } = this.state;\r\n\r\n    const dashboard = {\r\n      id: dashboardId, \r\n      name: name,\r\n      style: style\r\n    };\r\n\r\n    axios.put('/ws/dashboard/', dashboard)\r\n      .then(res => {\r\n      });\r\n\r\n    this.props.onDashboardSave(dashboardId);\r\n\r\n    this.setState({\r\n      isEditMode: false\r\n    });\r\n  }\r\n\r\n  edit = () => {\r\n    this.setState({\r\n      isEditMode: true\r\n    });\r\n  }\r\n\r\n  cancelEdit = () => {\r\n    this.setState({\r\n      isEditMode: false\r\n    });\r\n  }\r\n\r\n  onSaveWidget = () => {\r\n    this.setState({ \r\n      showWidgetEditPanel: false \r\n    });\r\n    // FIXME: not need to refresh. Just add to state.widgets\r\n    this.refreshWidgetView();\r\n  }\r\n\r\n  openWidgetEditPanel = (widgetId) => {\r\n    this.widgetEditPanel.current.fetchWidget(widgetId);\r\n    this.setState({\r\n      showWidgetEditPanel: true\r\n    });\r\n  }\r\n\r\n  applyFilters = (filterParams) => {\r\n    this.widgetViewPanel.current.queryWidgets(filterParams);\r\n  }\r\n\r\n  fullScreen = () => {\r\n    const { name } = this.state;\r\n    const url = `/workspace/dashboard/view?name=${name}`;\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  onTableCellClick = () => {\r\n    this.props.history.push(`/workspace/dashboard/drill?name=&`);\r\n  }\r\n\r\n  onStyleValueChange = (name, value) => {\r\n    const style = {...this.state.style};\r\n    style[[name]] = value;\r\n    this.setState({\r\n      style: style\r\n    });\r\n  }\r\n\r\n  confirmDelete = () => {\r\n    const { \r\n      objectToDelete = {},\r\n    } = this.state;\r\n    const dashboardId = objectToDelete.id;\r\n    axios.delete(`/ws/dashboard/${dashboardId}`)\r\n      .then(res => {\r\n        this.props.onDashboardDelete(dashboardId);\r\n        this.closeConfirmDeletionPanel();\r\n      });\r\n  }\r\n\r\n  deleteDashboard = () => {\r\n    const { \r\n      dashboardId,\r\n      name\r\n    } = this.state;\r\n    const dashboard = {\r\n      id: dashboardId,\r\n      name: name\r\n    }\r\n    this.openConfirmDeletionPanel(dashboard);\r\n  }\r\n\r\n  openConfirmDeletionPanel = (dashboard) => {\r\n    this.setState({\r\n      objectToDelete: dashboard,\r\n      showConfirmDeletionPanel: true\r\n    });\r\n  }\r\n\r\n  closeConfirmDeletionPanel = () => {\r\n    this.setState({\r\n      objectToDelete: {},\r\n      showConfirmDeletionPanel: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      autoRefreshTimerId,\r\n      lastRefreshed,\r\n      isEditMode,\r\n      isReadOnly\r\n    } = this.state;\r\n    const autoRefreshStatus = autoRefreshTimerId === '' ? 'OFF' : 'ON';\r\n\r\n    let editButtonPanel;\r\n    let fullScreenButtonPanel = null;\r\n    const controlButtons = (\r\n      <React.Fragment>\r\n        <div className=\"inline-block\">\r\n          <div className=\"inline-block mr-3\">\r\n            Last refreshed: {lastRefreshed}\r\n          </div>\r\n          { autoRefreshStatus === 'OFF' && (\r\n            <input \r\n              type=\"text\" \r\n              name=\"refreshInterval\" \r\n              value={this.state.refreshInterval}\r\n              onChange={this.handleInputChange}\r\n              className=\"inline-block\" \r\n              style={{width: '50px'}}\r\n            />\r\n          )}\r\n        </div>\r\n        <button className=\"button square-button mr-3\" onClick={this.toggleAutoRefresh}>\r\n          {\r\n            autoRefreshStatus === 'ON' ? \r\n            (\r\n              <FontAwesomeIcon icon=\"stop-circle\" size=\"lg\" fixedWidth />\r\n            ) : \r\n            (\r\n              <FontAwesomeIcon icon=\"play-circle\" size=\"lg\" fixedWidth />\r\n            )\r\n          }\r\n        </button>\r\n        <button className=\"button square-button mr-3\" onClick={this.refresh}>\r\n          <FontAwesomeIcon icon=\"redo-alt\" size=\"lg\" fixedWidth />\r\n        </button>\r\n        <button className=\"button mr-3\" onClick={this.queryWidgets}>\r\n          <FontAwesomeIcon icon=\"filter\" size=\"lg\" fixedWidth /> Apply Filters\r\n        </button>\r\n      </React.Fragment>\r\n    );\r\n\r\n    if (!isReadOnly) {\r\n      if (isEditMode) {\r\n        editButtonPanel = (\r\n          <React.Fragment>\r\n            <button className=\"button mr-3\" onClick={this.cancelEdit}>\r\n               <FontAwesomeIcon icon=\"times\" size=\"lg\" fixedWidth />\r\n            </button>\r\n            <button className=\"button mr-3\" onClick={this.save}>\r\n              <FontAwesomeIcon icon=\"save\" size=\"lg\" fixedWidth />\r\n            </button>\r\n            <button className=\"button mr-3\" onClick={this.deleteDashboard}>\r\n               <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" fixedWidth />\r\n            </button>\r\n            <button className=\"button\" onClick={() => this.openWidgetEditPanel(null)}>\r\n              <FontAwesomeIcon icon=\"calendar-plus\" size=\"lg\" fixedWidth /> New Widget\r\n            </button>\r\n          </React.Fragment>\r\n        );\r\n      } else {\r\n        editButtonPanel = (\r\n          <React.Fragment>\r\n            {controlButtons}\r\n            <button className=\"button square-button mr-3\" onClick={this.fullScreen}>\r\n              <FontAwesomeIcon icon=\"tv\" size=\"lg\" fixedWidth />\r\n            </button>\r\n            <button className=\"button\" onClick={this.edit}>\r\n              <FontAwesomeIcon icon=\"edit\" size=\"lg\" fixedWidth />\r\n            </button>\r\n          </React.Fragment>\r\n        );\r\n      }\r\n    } else {\r\n      fullScreenButtonPanel = controlButtons;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"dashboard-menu-panel row\">\r\n          <div className=\"float-left\">\r\n            {\r\n              isReadOnly || !isEditMode ?\r\n              (\r\n                <div className=\"dashboard-name\">\r\n                  {this.state.name}\r\n                </div>\r\n              ) :(\r\n                <input \r\n                  type=\"text\" \r\n                  name=\"name\" \r\n                  value={this.state.name}\r\n                  onChange={this.handleInputChange} \r\n                  className=\"dashboard-name-input\"\r\n                />\r\n              )\r\n            }\r\n            \r\n          </div>\r\n          <div className=\"float-right\">\r\n            {fullScreenButtonPanel}\r\n            {editButtonPanel}\r\n          </div>\r\n        </div>\r\n\r\n        <WidgetViewPanel \r\n          ref={this.widgetViewPanel} \r\n          isEditMode={this.state.isEditMode}\r\n          widgetViewWidth={this.state.widgetViewWidth}\r\n          onWidgetEdit={this.openWidgetEditPanel}\r\n          onStyleValueChange={this.onStyleValueChange}\r\n          {...this.state.style}\r\n        />\r\n\r\n        <Modal \r\n          show={this.state.showWidgetEditPanel}\r\n          onClose={() => this.setState({ showWidgetEditPanel: false })}\r\n          modalClass={'dashboard-edit-widget-dialog'} \r\n          title={'Widget Edit'} >\r\n          <WidgetEditPanel \r\n            ref={this.widgetEditPanel} \r\n            jdbcDataSourceOptions={this.state.jdbcDataSourceOptions}\r\n            dashboardId={this.state.dashboardId}\r\n            onSave={this.onSaveWidget}\r\n          />\r\n        </Modal>\r\n\r\n        <Modal \r\n          show={this.state.showConfirmDeletionPanel}\r\n          onClose={this.closeConfirmDeletionPanel}\r\n          modalClass={'small-modal-panel'}\r\n          title={'Confirm Deletion'} >\r\n          <div className=\"confirm-deletion-panel\">\r\n            Are you sure you want to delete {this.state.objectToDelete.name}?\r\n          </div>\r\n          <button className=\"button\" onClick={this.confirmDelete}>Delete</button>\r\n        </Modal>\r\n\r\n      </React.Fragment>\r\n    )\r\n  };\r\n}\r\n\r\nexport default withRouter(DashboardEditView);\r\n","\r\nimport React, { Component } from 'react';\r\nimport { Route, withRouter } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport './Dashboard.css';\r\nimport * as Constants from '../api/Constants';\r\nimport DashboardEditView from './DashboardEditView';\r\nimport Modal from '../components/Modal';\r\nimport Toast from '../components/Toast';\r\nimport SearchInput from '../components/SearchInput';\r\n\r\nconst ROUTE_WORKSPACE_DASHBOARD = '/workspace/dashboard/';\r\n\r\nclass Dashboard extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchValue: '',\r\n      dashboards: [],\r\n      showEditPanel: false,\r\n      activeDashboardId: 0,\r\n      name: ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const pathname = this.props.location.pathname;\r\n    const index = pathname.indexOf(ROUTE_WORKSPACE_DASHBOARD);\r\n    if (index !== -1) {\r\n      const activeDashboardId = Number(pathname.substring(index + ROUTE_WORKSPACE_DASHBOARD.length));\r\n      this.setState({\r\n        activeDashboardId: activeDashboardId\r\n      })\r\n    }\r\n    this.fetchBoards();\r\n  }\r\n\r\n  fetchBoards = () => {\r\n    axios.get('/ws/dashboard')\r\n      .then(res => {\r\n        const dashboards = res.data;\r\n        this.setState({ \r\n          dashboards: dashboards \r\n        });\r\n      });\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  handleNameInputChange = (name, value) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  closeEditPanel = () => {\r\n    this.setState({\r\n      showEditPanel: false,\r\n      name: ''\r\n    });\r\n  }\r\n\r\n  save = () => {\r\n    const {\r\n      name\r\n    } = this.state;\r\n\r\n    if (!name) {\r\n      Toast.showError('Enter a name.');\r\n      return;\r\n    }\r\n\r\n    const dashboard = {\r\n      name: name,\r\n      style: {\r\n        height: Constants.DEFAULT_DASHBOARD_HEIGHT,\r\n        backgroundColor: 'rgba(233, 235, 238, 1)'\r\n      }\r\n    };\r\n\r\n    axios.post('/ws/dashboard', dashboard)\r\n      .then(res => {\r\n        const dashboardId = res.data;\r\n        this.closeEditPanel();\r\n        this.fetchBoards();\r\n        this.props.history.push(`/workspace/dashboard/${dashboardId}`);\r\n      })\r\n      .catch(error => {\r\n        Toast.showError('The name exists. Try another.');\r\n      });\r\n  }\r\n\r\n  view = (dashboardId) => {\r\n    this.setState({\r\n      activeDashboardId: dashboardId\r\n    }, () => {\r\n      this.props.history.push(`/workspace/dashboard/${dashboardId}`);\r\n    });\r\n  }\r\n\r\n  onDashboardSave = (dashboardId) => {\r\n    this.fetchBoards();\r\n  }\r\n\r\n  onDashboardDelete = (dashboardId) => {\r\n    this.fetchBoards();\r\n    this.setState({\r\n      activeDashboardId: 0\r\n    }, () => {\r\n      this.props.history.push('/workspace/dashboard');\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      dashboards = [],\r\n      activeDashboardId,\r\n      searchValue\r\n    } = this.state;\r\n\r\n    const {\r\n      sysRole\r\n    } = this.props;\r\n    const showEdit = sysRole === Constants.SYS_ROLE_VIEWER ? false : true;\r\n\r\n    const dashboardRows = [];\r\n    for (let i = 0; i < dashboards.length; i++) {\r\n      const dashboard = dashboards[i];\r\n      const name = dashboard.name;\r\n      const menuActive = activeDashboardId === dashboard.id ? 'dashboard-menu-item-active' : '';\r\n      if (!searchValue || (searchValue && name.includes(searchValue))) {\r\n        dashboardRows.push(\r\n          (\r\n            <div key={i} className={`dashboard-menu-item ellipsis ${menuActive}`} onClick={() => this.view(dashboard.id)}>\r\n              {name}\r\n            </div>\r\n          )\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"dashboard-sidebar\">\r\n          <div style={{margin: '5px'}}>\r\n            { showEdit && (\r\n              <button className=\"button icon-button dashboard-add-button\" onClick={() => this.setState({ showEditPanel: true })}>\r\n                <FontAwesomeIcon icon=\"plus\" /> New\r\n              </button>\r\n            )}\r\n\r\n            <div style={{marginTop: '5px'}}>\r\n              <SearchInput \r\n                name={'searchValue'} \r\n                value={this.state.searchValue} \r\n                onChange={this.handleNameInputChange} \r\n                inputWidth={117}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            {dashboardRows}\r\n          </div>\r\n        </div>\r\n        <div className=\"dashboard-content\">\r\n          <Route \r\n            path=\"/workspace/dashboard/:id\" \r\n            render={(props) => \r\n              <DashboardEditView \r\n                key={props.match.params.id} \r\n                onDashboardSave={this.onDashboardSave} \r\n                onDashboardDelete={this.onDashboardDelete} \r\n              />\r\n            } \r\n            />\r\n        </div>\r\n\r\n        <Modal \r\n          show={this.state.showEditPanel}\r\n          onClose={() => this.setState({ showEditPanel: false })}\r\n          modalClass={'small-modal-panel'} \r\n          title={'New'} >\r\n          <div className=\"form-panel\">\r\n            <label>Name</label>\r\n            <input \r\n              type=\"text\" \r\n              name=\"name\" \r\n              value={this.state.name}\r\n              onChange={this.handleInputChange} \r\n            />\r\n            <button className=\"button\" onClick={this.save}>Save</button>\r\n          </div>\r\n        </Modal>\r\n\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Dashboard);\r\n","\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport * as Constants from '../api/Constants';\r\n\r\nimport Modal from '../components/Modal';\r\nimport Select from '../components/Select';\r\nimport SearchInput from '../components/SearchInput';\r\nimport Toast from '../components/Toast';\r\n\r\nclass User extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      users: [],\r\n      groups: [],\r\n      showConfirmDeletionPanel: false,\r\n      objectToDelete: {},\r\n      searchValue: '',\r\n      showUpdatePassword: false,\r\n      showEditPanel: false,\r\n      id: null,\r\n      username: '',\r\n      name: '',\r\n      tempPassword: '',\r\n      sysRole: Constants.SYS_ROLE_VIEWER,\r\n      userGroupId: '',\r\n      userGroups: []\r\n    };\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  handleNameInputChange = (name, value) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleIntegerOptionChange = (name, value) => {\r\n    const intValue = parseInt(value, 10) || 0;\r\n    this.setState({ \r\n      [name]: intValue\r\n    });\r\n  }\r\n\r\n  get initialEditPanelState() {\r\n    return {\r\n      id: null,\r\n      username: '',\r\n      name: '',\r\n      tempPassword: '',\r\n      sysRole: '',\r\n      userGroupId: '',\r\n      userGroups: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchUsers();\r\n    this.fetchGroups();\r\n  }\r\n\r\n  fetchUsers = () => {\r\n    axios.get('/ws/user')\r\n      .then(res => {\r\n        const users = res.data;\r\n        this.setState({ \r\n          users: users \r\n        });\r\n      });\r\n  }\r\n\r\n  fetchGroups = () => {\r\n    axios.get('/ws/group')\r\n      .then(res => {\r\n        const groups = res.data;\r\n        this.setState({ \r\n          groups: groups \r\n        });\r\n      });\r\n  }\r\n\r\n  openEditPanel = (user) => {\r\n    if (user !== null) {\r\n      this.setState({\r\n        id: user.id,\r\n        username: user.username,\r\n        name: user.name,\r\n        tempPassword: '',\r\n        sysRole: user.sysRole,\r\n        userGroups: user.userGroups\r\n      });\r\n    } else {\r\n      this.clearEditPanel();\r\n    }\r\n\r\n    this.setState({\r\n      userGroupId: '',\r\n      showEditPanel: true\r\n    }); \r\n  }\r\n\r\n  closeEditPanel = () => {\r\n    this.setState({\r\n      showEditPanel: false\r\n    });\r\n  }\r\n\r\n  clearEditPanel = () => {\r\n    this.setState(this.initialEditPanelState);\r\n  }\r\n\r\n  toggleUpdatePassword = () => {\r\n    this.setState(prevState => ({\r\n      showUpdatePassword: !prevState.showUpdatePassword\r\n    })); \r\n  }\r\n\r\n  save = () => {\r\n    const {\r\n      showUpdatePassword,\r\n      id,\r\n      username,\r\n      name,\r\n      tempPassword,\r\n      sysRole,\r\n      userGroups\r\n    } = this.state;\r\n\r\n    if (!username) {\r\n      Toast.showError('Enter a name.');\r\n      return;\r\n    }\r\n\r\n    if (!tempPassword || tempPassword.length < 8) {\r\n      Toast.showError(`Use 8 or more characters for password.`);\r\n      return;\r\n    }\r\n\r\n    let selectedSysRole = Constants.SYS_ROLE_VIEWER;\r\n    if (Constants.SYS_ROLE_ADMIN === this.props.sysRole) {\r\n      if (sysRole) {\r\n        selectedSysRole = sysRole;\r\n      } else {\r\n        // TODO: throw errors.\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    let user = {\r\n      username: username,\r\n      name: name,\r\n      sysRole: selectedSysRole,\r\n      userGroups: userGroups\r\n    };\r\n\r\n    if (id !== null) {\r\n      user.id = id;\r\n      if (showUpdatePassword && tempPassword) {\r\n        user.tempPassword = tempPassword;\r\n      }\r\n      \r\n      axios.put('/ws/user', user)\r\n        .then(res => {\r\n          this.clearEditPanel();\r\n          this.closeEditPanel();\r\n          this.fetchUsers();\r\n        });\r\n    } else {\r\n      user.tempPassword = tempPassword;\r\n\r\n      axios.post('/ws/user', user)\r\n        .then(res => {\r\n          this.clearEditPanel();\r\n          this.closeEditPanel();\r\n          this.fetchUsers();\r\n        });\r\n    } \r\n  }\r\n\r\n  addUserGroup = () => {\r\n    const { \r\n      userGroupId,\r\n      userGroups = []\r\n    } = this.state;\r\n    const index = userGroups.findIndex(groupId => groupId === userGroupId);\r\n    if (index === -1) {\r\n      const newUserGroups = [...userGroups];\r\n      newUserGroups.push(userGroupId);\r\n      this.setState({\r\n        userGroups: newUserGroups\r\n      });\r\n    }\r\n  }\r\n\r\n  removeUserGroup = (groupId) => {\r\n    const { \r\n      userGroups = [] \r\n    } = this.state;\r\n    const index = userGroups.findIndex(id => id === groupId);\r\n    if (index !== -1) {\r\n      const newUserGroups = [...userGroups];\r\n      newUserGroups.splice(index, 1);\r\n      this.setState({\r\n        userGroups: newUserGroups\r\n      });\r\n    } \r\n  }\r\n\r\n  confirmDelete = () => {\r\n    const { \r\n      objectToDelete = {} \r\n    } = this.state;\r\n    axios.delete('/ws/user/' + objectToDelete.id)\r\n      .then(res => {\r\n        this.fetchUsers();\r\n        this.closeConfirmDeletionPanel();\r\n      });\r\n  }\r\n\r\n  openConfirmDeletionPanel = (user) => {\r\n    this.setState({\r\n      objectToDelete: user,\r\n      showConfirmDeletionPanel: true\r\n    });\r\n  }\r\n\r\n  closeConfirmDeletionPanel = () => {\r\n    this.setState({\r\n      objectToDelete: {},\r\n      showConfirmDeletionPanel: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      id,\r\n      showUpdatePassword,\r\n      users = [],\r\n      groups = [],\r\n      userGroups = [],\r\n      searchValue,\r\n      showConfirmDeletionPanel,\r\n      objectToDelete = {}\r\n    } = this.state;\r\n\r\n    const {\r\n      sysRole\r\n    } = this.props;\r\n\r\n    const mode = id === null ? 'New' : 'Edit';\r\n\r\n    const userItems = [];\r\n    for (let i = 0; i < users.length; i++) {\r\n      const user = users[i];\r\n      const name = user.name;\r\n      const username = user.username;\r\n      if (!searchValue || (searchValue && (username.includes(searchValue) || name.includes(searchValue)))) {\r\n        userItems.push(\r\n          (\r\n            <div key={i} className=\"datasource-card row\">\r\n              <div className=\"float-left ellipsis datasource-row-name\">\r\n                {user.username}\r\n                {user.name}\r\n                {user.sysRole}\r\n              </div>\r\n              <div className=\"float-right\">\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.openEditPanel(user)}>\r\n                  <FontAwesomeIcon icon=\"edit\" size=\"lg\" />\r\n                </button>\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.openConfirmDeletionPanel(user)}>\r\n                  <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )\r\n        )\r\n      }\r\n    }\r\n\r\n    const userGroupItems = [];\r\n    for (let i = 0; i < userGroups.length; i++) {\r\n      const groupId = userGroups[i];\r\n      for (let j = 0; j < groups.length; j++) {\r\n        if (groupId === groups[j].id) {\r\n          userGroupItems.push(\r\n            (\r\n              <div key={groupId} className=\"row\">\r\n                <div className=\"float-left\">Group: {groups[j].name}</div>\r\n                <button className=\"button float-right\"onClick={() => this.removeUserGroup(groupId)}>\r\n                  <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" />\r\n                </button>\r\n              </div>\r\n            )\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div class=\"row\">\r\n          <div className=\"float-left\" style={{marginRight: '5px'}}>\r\n            <SearchInput \r\n              name={'searchValue'} \r\n              value={this.state.searchValue} \r\n              onChange={this.handleNameInputChange} \r\n              inputWidth={200}\r\n            />\r\n          </div>\r\n          <button className=\"button float-left\" onClick={() => this.openEditPanel(null)}>\r\n            <FontAwesomeIcon icon=\"plus\" /> New\r\n          </button>\r\n        </div>\r\n        <div className=\"row mt-10\">\r\n          {userItems}\r\n        </div>\r\n\r\n        <Modal \r\n          show={this.state.showEditPanel}\r\n          onClose={this.closeEditPanel}\r\n          modalClass={'mid-modal-panel'} \r\n          title={mode} >\r\n\r\n          <div className=\"row\">\r\n            <div className=\"form-panel float-left\" style={{width: '240px'}}>\r\n              <label>Username</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"username\" \r\n                value={this.state.username}\r\n                onChange={this.handleInputChange} \r\n              />\r\n\r\n              <label>Name</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={this.state.name}\r\n                onChange={this.handleInputChange} \r\n              />\r\n\r\n              { mode === 'Edit' && (\r\n                  <div style={{margin: '3px 0px 8px 0px'}}>\r\n                    <button className=\"button\" onClick={this.toggleUpdatePassword}>Update password</button>\r\n                  </div>\r\n              )}\r\n              { (mode === 'New' || showUpdatePassword) && ( \r\n                <div>\r\n                  <label>Password</label>\r\n                  <input \r\n                    type=\"password\" \r\n                    name=\"tempPassword\" \r\n                    value={this.state.tempPassword}\r\n                    onChange={this.handleInputChange} />\r\n                </div>\r\n              )}\r\n              \r\n              <label>System Role</label>\r\n              { Constants.SYS_ROLE_ADMIN === sysRole && (\r\n                <Select\r\n                  name={'sysRole'}\r\n                  value={this.state.sysRole}\r\n                  onChange={this.handleNameInputChange}\r\n                  options={[Constants.SYS_ROLE_VIEWER, Constants.SYS_ROLE_DEVELOPER]}\r\n                />\r\n              )}\r\n\r\n              { Constants.SYS_ROLE_DEVELOPER === sysRole && (\r\n                <div>{Constants.SYS_ROLE_VIEWER}</div>\r\n              )}\r\n              \r\n            </div>\r\n            <div className=\"form-panel float-right\" style={{width: '240px'}}>\r\n            \r\n              <label>Groups</label>\r\n              <Select\r\n                name={'userGroupId'}\r\n                value={this.state.userGroupId}\r\n                onChange={this.handleIntegerOptionChange}\r\n                options={groups}\r\n                optionDisplay={'name'}\r\n                optionValue={'id'}\r\n              />\r\n              <button className=\"button\" onClick={this.addUserGroup}>Add</button>\r\n              <div>\r\n                {userGroupItems}\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          <button className=\"button mt-3\" onClick={this.save}>Save</button>\r\n        </Modal>\r\n\r\n        <Modal \r\n          show={showConfirmDeletionPanel}\r\n          onClose={this.closeConfirmDeletionPanel}\r\n          modalClass={'small-modal-panel'}\r\n          title={'Confirm Deletion'} >\r\n          <div className=\"confirm-deletion-panel\">\r\n            Are you sure you want to delete {objectToDelete.name}?\r\n          </div>\r\n          <button className=\"button\" onClick={this.confirmDelete}>Delete</button>\r\n        </Modal>\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default User;","\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport Modal from '../components/Modal';\r\nimport Select from '../components/Select';\r\nimport SearchInput from '../components/SearchInput';\r\n\r\nclass Group extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groups: [],\r\n      dashboards: [],\r\n      showConfirmDeletionPanel: false,\r\n      objectToDelete: {},\r\n      showEditPanel: false,\r\n      searchValue: '',\r\n      id: null,\r\n      name: '',\r\n      groupDashboardId: '',\r\n      groupDashboards: []\r\n    };\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  handleNameInputChange = (name, value) => {\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleIntegerOptionChange = (name, value) => {\r\n    const intValue = parseInt(value, 10) || 0;\r\n    this.setState({ \r\n      [name]: intValue\r\n    });\r\n  }\r\n\r\n  get initialEditPanelState() {\r\n    return {\r\n      id: null,\r\n      name: '',\r\n      groupDashboardId: '',\r\n      groupDashboards: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchGroups();\r\n    this.fetchDashboards();\r\n  }\r\n\r\n  fetchGroups = () => {\r\n    axios.get('/ws/group')\r\n      .then(res => {\r\n        const groups = res.data;\r\n        this.setState({ \r\n          groups: groups \r\n        });\r\n      });\r\n  }\r\n\r\n  fetchDashboards = () => {\r\n    axios.get('/ws/dashboard')\r\n      .then(res => {\r\n        const dashboards = res.data;\r\n        this.setState({ \r\n          dashboards: dashboards \r\n        });\r\n      });\r\n  }\r\n\r\n  openEditPanel = (group) => {\r\n    if (group !== null) {\r\n      this.setState({\r\n        id: group.id,\r\n        name: group.name,\r\n        groupDashboards: group.groupDashboards\r\n      });\r\n    } else {\r\n      this.clearEditPanel();\r\n    }\r\n    this.setState({\r\n      groupDashboardId: '',\r\n      showEditPanel: true\r\n    }); \r\n  }\r\n\r\n  closeEditPanel = () => {\r\n    this.setState({\r\n      showEditPanel: false\r\n    });\r\n  }\r\n\r\n  clearEditPanel = () => {\r\n    this.setState(this.initialEditPanelState);\r\n  }\r\n\r\n  save = () => {\r\n    const {\r\n      id,\r\n      name,\r\n      groupDashboards\r\n    } = this.state;\r\n\r\n    let group = {\r\n      name: name,\r\n      groupDashboards: groupDashboards\r\n    };\r\n\r\n    if (id !== null) {\r\n      group.id = id;\r\n      axios.put('/ws/group', group)\r\n        .then(res => {\r\n          this.clearEditPanel();\r\n          this.fetchGroups();\r\n          this.closeEditPanel();\r\n        });\r\n    } else {\r\n      axios.post('/ws/group', group)\r\n        .then(res => {\r\n          this.clearEditPanel();\r\n          this.fetchGroups();\r\n          this.closeEditPanel();\r\n        });\r\n    } \r\n  }\r\n\r\n  addGroupDashboard= () => {\r\n    const { \r\n      groupDashboardId,\r\n      groupDashboards = []\r\n    } = this.state;\r\n\r\n    if (groupDashboardId) {\r\n      const index = groupDashboards.findIndex(dashboardId => dashboardId === groupDashboardId);\r\n      if (index === -1) {\r\n        const newGroupDashboards = [...groupDashboards];\r\n        newGroupDashboards.push(groupDashboardId);\r\n        this.setState({\r\n          groupDashboards: newGroupDashboards\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  removeGroupDashboard = (dashboardId) => {\r\n    const { \r\n      groupDashboards = [] \r\n    } = this.state;\r\n    const index = groupDashboards.findIndex(id => id === dashboardId);\r\n    if (index !== -1) {\r\n      const newGroupDashboards = [...groupDashboards];\r\n      newGroupDashboards.splice(index, 1);\r\n      this.setState({\r\n        groupDashboards: newGroupDashboards\r\n      });\r\n    } \r\n  }\r\n\r\n  confirmDelete = () => {\r\n    const { \r\n      objectToDelete = {} \r\n    } = this.state;\r\n    axios.delete('/ws/group/' + objectToDelete.id)\r\n      .then(res => {\r\n        this.fetchGroups();\r\n        this.closeConfirmDeletionPanel();\r\n      });\r\n  }\r\n\r\n  openConfirmDeletionPanel = (group) => {\r\n    this.setState({\r\n      objectToDelete: group,\r\n      showConfirmDeletionPanel: true\r\n    });\r\n  }\r\n\r\n  closeConfirmDeletionPanel = () => {\r\n    this.setState({\r\n      objectToDelete: {},\r\n      showConfirmDeletionPanel: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      id,\r\n      groups = [],\r\n      dashboards = [],\r\n      groupDashboards = [],\r\n      searchValue,\r\n      showConfirmDeletionPanel,\r\n      objectToDelete = {}\r\n    } = this.state;\r\n\r\n    const mode = id === null ? 'New' : 'Edit';\r\n\r\n    const groupItems = [];\r\n    for (let i = 0; i < groups.length; i++) {\r\n      const group = groups[i];\r\n      const name = group.name;\r\n      if (!searchValue || (searchValue && name.includes(searchValue))) {\r\n        groupItems.push(\r\n          (\r\n            <div key={i} className=\"datasource-card row\">\r\n              <div className=\"float-left ellipsis datasource-row-name\">\r\n                {name}\r\n              </div>\r\n              <div className=\"float-right\">\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.openEditPanel(group)}>\r\n                  <FontAwesomeIcon icon=\"edit\" size=\"lg\" />\r\n                </button>\r\n                <button className=\"icon-button datasource-icon-button\" onClick={() => this.openConfirmDeletionPanel(group)}>\r\n                  <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )\r\n        )\r\n      }\r\n    }\r\n\r\n    const groupDashboardItems = [];\r\n    for (let i = 0; i < groupDashboards.length; i++) {\r\n      const dashboardId = groupDashboards[i];\r\n      for (let j = 0; j < dashboards.length; j++) {\r\n        if (dashboardId === dashboards[j].id) {\r\n          groupDashboardItems.push(\r\n            (\r\n              <div key={dashboardId} className=\"row\">\r\n                <div className=\"float-left\">Name: {dashboards[j].name}</div>\r\n                <button className=\"button float-right\"onClick={() => this.removeGroupDashboard(dashboardId)}>\r\n                  <FontAwesomeIcon icon=\"trash-alt\" size=\"lg\" />\r\n                </button>\r\n              </div>\r\n            )\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div class=\"row\">\r\n          <div className=\"float-left\" style={{marginRight: '5px'}}>\r\n            <SearchInput \r\n              name={'searchValue'} \r\n              value={this.state.searchValue} \r\n              onChange={this.handleNameInputChange} \r\n              inputWidth={200}\r\n            />\r\n          </div>\r\n          <button className=\"button float-left\" onClick={() => this.openEditPanel(null)}>\r\n            <FontAwesomeIcon icon=\"plus\" /> New\r\n          </button>\r\n        </div>\r\n        <div className=\"row mt-10\">\r\n          {groupItems}\r\n        </div>\r\n\r\n        <Modal \r\n          show={this.state.showEditPanel}\r\n          onClose={this.closeEditPanel}\r\n          modalClass={'mid-modal-panel'} \r\n          title={mode} >\r\n          <div className=\"row\">\r\n            <div className=\"form-panel float-left\" style={{width: '240px'}}>\r\n              <label>Name</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={this.state.name}\r\n                onChange={this.handleInputChange} />\r\n            </div>\r\n            \r\n            <div className=\"form-panel float-right\" style={{width: '240px'}}>\r\n              <label>Dashboards</label>\r\n              <Select\r\n                name={'groupDashboardId'}\r\n                value={this.state.groupDashboardId}\r\n                onChange={this.handleIntegerOptionChange}\r\n                options={dashboards}\r\n                optionDisplay={'name'}\r\n                optionValue={'id'}\r\n              />\r\n              <button className=\"button\" onClick={this.addGroupDashboard}>Add</button>\r\n              <div>\r\n                {groupDashboardItems}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button className=\"button mt-3\" onClick={this.save}>Save</button>\r\n        </Modal>\r\n\r\n        <Modal \r\n          show={showConfirmDeletionPanel}\r\n          onClose={this.closeConfirmDeletionPanel}\r\n          modalClass={'small-modal-panel'}\r\n          title={'Confirm Deletion'} >\r\n          <div className=\"confirm-deletion-panel\">\r\n            Are you sure you want to delete {objectToDelete.name}?\r\n          </div>\r\n          <button className=\"button\" onClick={this.confirmDelete}>Delete</button>\r\n        </Modal>\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Group;","\r\nimport React from 'react';\r\n\r\nimport User from './User';\r\nimport Group from './Group';\r\nimport Tabs from '../components/Tabs';\r\n\r\nclass UserManagement extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"full-page-content\">\r\n        <Tabs activeTab=\"Group\">\r\n          <div title=\"Group\">\r\n            <Group />\r\n          </div>\r\n          <div title=\"User\">\r\n            <User {...this.props} />\r\n          </div>\r\n        </Tabs>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nexport default UserManagement;","\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport Toast from '../components/Toast';\r\n\r\nclass Account extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showUpdatePassword: false,\r\n      id: null,\r\n      username: '',\r\n      name: '',\r\n      sysRole: '',\r\n      apiKey: '',\r\n      password: '',\r\n      confirmedPassword: ''\r\n    };\r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchUser();\r\n  }\r\n\r\n  fetchUser = () => {\r\n    axios.get('/ws/user/account')\r\n      .then(res => {\r\n        const user = res.data;\r\n        this.setState({\r\n          id: user.id,\r\n          username: user.username,\r\n          name: user.name,\r\n          sysRole: user.sysRole,\r\n          apiKey: user.apiKey\r\n        });\r\n      });\r\n  }\r\n\r\n  generateApiKey = () => {\r\n    axios.get('/auth/generate-apikey')\r\n      .then(res => {\r\n        const apiKey = res.data;\r\n        this.setState({\r\n          apiKey: apiKey\r\n        });\r\n      });\r\n  }\r\n\r\n  save = () => {\r\n    const {\r\n      showUpdatePassword,\r\n      name,\r\n      password,\r\n      confirmedPassword\r\n    } = this.state;\r\n\r\n    const user = {\r\n      name: name\r\n    }\r\n\r\n    if (showUpdatePassword) {\r\n      if (password !== confirmedPassword) {\r\n        Toast.showError(`Those passwords didn't match.`);\r\n        return;\r\n      }  \r\n\r\n      if (password.length < 8) {\r\n        Toast.showError(`Use 8 or more characters for password.`);\r\n        return;\r\n      }\r\n\r\n      user.password = password;\r\n    }\r\n\r\n    axios.put('/ws/user/account', user)\r\n      .then(res => {\r\n      });\r\n  }\r\n\r\n  toggleUpdatePassword = () => {\r\n    this.setState(prevState => ({\r\n      showUpdatePassword: !prevState.showUpdatePassword\r\n    })); \r\n  }\r\n\r\n  render() {\r\n    const {\r\n      showUpdatePassword,\r\n      username,\r\n      sysRole,\r\n      apiKey\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className=\"full-page-content\">\r\n        <div className=\"form-panel\" style={{width: '500px'}}>   \r\n          <label>Username</label>\r\n          <div>{username}</div>\r\n\r\n          <label>Name</label>\r\n          <input \r\n            type=\"text\"   \r\n            name=\"name\" \r\n            value={this.state.name}\r\n            onChange={this.handleInputChange} />\r\n\r\n          <label>System Role</label>\r\n          <div>{sysRole}</div>\r\n\r\n          <label>API Key</label>\r\n          <div>{apiKey}</div>\r\n          <button className=\"button mt-10\" onClick={this.generateApiKey}>Generate new API Key</button>\r\n          <br/>\r\n\r\n          <button className=\"button mt-3\" onClick={this.toggleUpdatePassword}>Update password</button>\r\n          {\r\n            showUpdatePassword && (\r\n              <React.Fragment>\r\n                <br/>\r\n                <label>Password</label>\r\n                <input \r\n                  type=\"password\" \r\n                  name=\"password\" \r\n                  value={this.state.password}\r\n                  onChange={this.handleInputChange} />\r\n                <label>Confirm Password</label>\r\n                <input \r\n                  type=\"password\" \r\n                  name=\"confirmedPassword\" \r\n                  value={this.state.confirmedPassword}\r\n                  onChange={this.handleInputChange} />\r\n              </React.Fragment>\r\n          )}\r\n\r\n          <br/>\r\n          <button className=\"button mt-10\" onClick={this.save}>Save</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Account;","\r\nimport React from 'react';\r\nimport DashboardEditView from './DashboardEditView';\r\n\r\nclass DashboardFullScreenView extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('DashboardFullScreenView', 'componentDidMount');\r\n    this.dashboardEditView.loadViewByDashboardName();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"full-screen-view\">\r\n        <DashboardEditView wrappedComponentRef={comp => (this.dashboardEditView = comp)} />\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nexport default DashboardFullScreenView;\r\n","import React from 'react';\r\nimport { Route, Link, Switch, withRouter } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport DataSource from './DataSource';\r\nimport Dashboard from './Dashboard';\r\nimport UserManagement from './UserManagement';\r\nimport Account from './Account';\r\nimport DashboardFullScreenView from './DashboardFullScreenView';\r\n\r\nimport Toast from '../components/Toast';\r\n\r\nimport * as Constants from '../api/Constants';\r\nimport './Workspace.css';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nconst MENU_ITEMS = [\r\n  {\r\n    link: '/workspace/dashboard',\r\n    value: 'Dashboard',\r\n    icon: 'chalkboard',\r\n  }, \r\n  {\r\n    link: '/workspace/datasource',\r\n    value: 'Data Source',\r\n    icon: 'database'\r\n  }, \r\n  {\r\n    link: '/workspace/usermanagement',\r\n    value: 'User Management',\r\n    icon: 'users-cog'\r\n  }\r\n];\r\n\r\nconst ACCOUNT_MENU_LINK = '/workspace/account';\r\n\r\nclass Workspace extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentMenuLink: '/workspace/dashboard'\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const pathname = this.props.location.pathname;\r\n    let link;\r\n    if (pathname.startsWith(ACCOUNT_MENU_LINK)) {\r\n      link = ACCOUNT_MENU_LINK;\r\n    } else {\r\n      const menuItem = MENU_ITEMS.find(m => pathname.startsWith(m.link));\r\n      link = menuItem.link;\r\n    }\r\n\r\n    this.setState({\r\n      currentMenuLink: link,\r\n    });\r\n  }\r\n\r\n  handleMenuClick = (menuLink) => {\r\n    this.setState({\r\n      currentMenuLink: menuLink\r\n    });\r\n  }\r\n\r\n  logout = () => {\r\n    axios.get('/auth/logout')\r\n      .then(res => {\r\n        this.props.onLogout();\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      currentMenuLink,\r\n    } = this.state;\r\n    \r\n    console.log('Workspace - render');\r\n\r\n    const {\r\n      username,\r\n      sysRole\r\n    } = this.props;\r\n\r\n    let menuItems = [];\r\n    let menuList = [];\r\n    if (sysRole === Constants.SYS_ROLE_VIEWER) {\r\n      menuList = MENU_ITEMS.filter(m => m.link === '/workspace/dashboard');\r\n    } else {\r\n      menuList = MENU_ITEMS;\r\n    }\r\n    for (let i = 0; i < menuList.length; i++) {\r\n      const menu = menuList[i];\r\n      const active = currentMenuLink === menu.link ? 'menu-item-active' : '';\r\n      menuItems.push(\r\n        (\r\n          <li key={menu.link} className={active}>\r\n            <Link to={menu.link} onClick={() => this.handleMenuClick(menu.link)}>\r\n              <FontAwesomeIcon icon={menu.icon} fixedWidth />\r\n              <span className=\"workspace-nav-menu-text\">{menu.value}</span>\r\n            </Link>\r\n          </li>\r\n        )\r\n      );\r\n    }\r\n\r\n    const isAccountMenuActive = currentMenuLink === ACCOUNT_MENU_LINK ? 'menu-item-active' : '';\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"workspace-nav\">  \r\n          <div className=\"workspace-name\">Poli</div>\r\n          <ul className=\"workspace-nav-menu\">\r\n            {menuItems}\r\n          </ul>\r\n          <div className=\"workspace-account-menu\">\r\n            <div className={`workspace-account-button inline-block ${isAccountMenuActive}`}>\r\n              <Link to=\"/workspace/account\" onClick={() => this.handleMenuClick(ACCOUNT_MENU_LINK)}>\r\n                <FontAwesomeIcon icon=\"user\" fixedWidth />\r\n                <span className=\"workspace-nav-menu-text\">{username}</span>\r\n              </Link>\r\n            </div>\r\n            <div className=\"workspace-logout-button inline-block\" onClick={this.logout}>\r\n              <FontAwesomeIcon icon=\"sign-out-alt\" fixedWidth />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"workspace-content\">\r\n          <Switch>\r\n            <Route exact path=\"/workspace/datasource\" component={DataSource} />\r\n            <Route exact path=\"/workspace/account\" component={Account} />\r\n            <Route exact path=\"/workspace/dashboard/view\" component={DashboardFullScreenView} />\r\n            <Route exact path=\"/workspace/usermanagement\" render={() => <UserManagement {...this.props} />} />\r\n            <Route path=\"/workspace/dashboard\" render={() => <Dashboard {...this.props} />} />\r\n          </Switch>\r\n        </div>\r\n        <Toast />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(Workspace);\r\n","\r\nimport React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass PageNotFound extends React.Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <h1>PageNotFound</h1>\r\n        <Link to=\"/login\">Login</Link>\r\n      </React.Fragment>\r\n    )\r\n  };\r\n}\r\n\r\nexport default PageNotFound;","import React from 'react';\r\nimport { Route, Switch, Redirect, withRouter, Component } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { \r\n  faChalkboard, faDatabase, faUsersCog, faPlus, faTimes,\r\n  faEdit, faTrashAlt, faPlayCircle, faStopCircle, faRedoAlt,\r\n  faTv, faPlug, faUser, faSignOutAlt, faCompress, faExpandArrowsAlt,\r\n  faFileExport, faFileCsv, faCircleNotch, faSearch, faSave, \r\n  faCalendarPlus, faFilter, faExternalLinkAlt\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport './App.css';\r\n\r\nimport Login from './views/Login';\r\nimport ChangeTempPassword from './views/ChangeTempPassword';\r\nimport Workspace from './views/Workspace';\r\nimport PageNotFound from './views/PageNotFound';\r\n\r\n\r\nlibrary.add(faChalkboard, faDatabase, faUsersCog, faPlus, faTimes, \r\n  faEdit, faTrashAlt, faPlayCircle, faStopCircle, faRedoAlt, \r\n  faTv, faPlug, faUser, faSignOutAlt, faCompress, faExpandArrowsAlt,\r\n  faFileExport, faFileCsv, faCircleNotch, faSearch, faSave, \r\n  faCalendarPlus, faFilter, faExternalLinkAlt\r\n);\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: '',\r\n      sysRole: '',\r\n      isAuthorizing: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const pathname = this.props.location.pathname;\r\n    const search = this.props.location.search;\r\n\r\n    const params = new URLSearchParams(search);\r\n    const apiKey = params.get('apiKey');\r\n\r\n    let currentPath = pathname + search;\r\n\r\n    const {\r\n      sysRole\r\n    } = this.state;\r\n\r\n    let isAuthenticated = false;\r\n    if (sysRole) {\r\n      isAuthenticated = true;\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n      this.setState({\r\n        isAuthorizing: true\r\n      }, () => {\r\n        axios.post('/auth/login/cookie')\r\n          .then(res => {\r\n            const loginResponse = res.data;\r\n            if (loginResponse.error) {\r\n                this.setState({\r\n                  sysRole: '',\r\n                  isAuthorizing: false\r\n                }, () => {\r\n                  this.props.history.push('/login');\r\n                });\r\n              } else {\r\n                this.onLoginSuccess(loginResponse, currentPath);\r\n              }\r\n          });\r\n      });\r\n      \r\n    }\r\n  }\r\n\r\n  onLoginSuccess = (loginResponse = {}, pathname = null) => {\r\n    if (loginResponse.tempPassword) {\r\n      this.props.history.push('/changepassword');\r\n    } else {\r\n      this.setState({\r\n        username: loginResponse.username,\r\n        sysRole: loginResponse.sysRole,\r\n        isAuthorizing: false\r\n      }, () => {\r\n        let directUrl = '/workspace/dashboard';\r\n        if (pathname) {\r\n          directUrl = pathname;\r\n        }\r\n        this.props.history.push(directUrl);\r\n      });\r\n    }\r\n  }\r\n\r\n  onLogout = () => {\r\n    this.setState({\r\n      username: '',\r\n      sysRole: '',\r\n      isAuthorizing: false\r\n    }, () => {\r\n      this.props.history.push('/login');\r\n    });\r\n  }\r\n   \r\n  render() {\r\n    const {\r\n      username,\r\n      sysRole,\r\n      isAuthorizing\r\n    } = this.state;\r\n\r\n    let isAuthenticated = false;\r\n    if (sysRole) {\r\n      isAuthenticated = true;\r\n    }\r\n\r\n    if (isAuthorizing) {\r\n      return (\r\n        <FontAwesomeIcon icon='cicle-notch' spin={true} size=\"3x\" />\r\n      )\r\n    }\r\n    \r\n    return (\r\n      <div className=\"app\">\r\n        <Switch>\r\n          <Route exact path=\"/\" render={() => <Login sysRole={sysRole} onLoginSuccess={this.onLoginSuccess} />} />\r\n          <Route path=\"/login\" render={() => <Login sysRole={sysRole} onLoginSuccess={this.onLoginSuccess} />} />\r\n          <Route path=\"/changepassword\" component={ChangeTempPassword} />\r\n          <PrivateRoute \r\n            authenticated={isAuthenticated} \r\n            path='/workspace' \r\n            component={Workspace} \r\n            username={username}\r\n            sysRole={sysRole} \r\n            onLogout={this.onLogout}\r\n          />\r\n          <Route component={PageNotFound} />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction PrivateRoute({component: Component, authenticated, ...rest}) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={\r\n        (props) => authenticated === true\r\n        ? <Component {...props} {...rest} />\r\n        : <Redirect to={{pathname: '/login', state: {from: props.location}}} />\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default withRouter(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter basename=\"/poli\">\r\n    <App />\r\n  </BrowserRouter>, \r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}