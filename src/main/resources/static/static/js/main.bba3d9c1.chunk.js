(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{309:function(e,t,a){},314:function(e,t,a){e.exports=a(835)},319:function(e,t,a){},338:function(e,t,a){},344:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},823:function(e,t,a){},824:function(e,t,a){},830:function(e,t,a){},831:function(e,t,a){},832:function(e,t,a){},833:function(e,t,a){},834:function(e,t,a){},835:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(31),s=a.n(r),l=a(313),i=a(5),c=a(6),u=a(8),d=a(7),h=a(9),m=a(841),p=a(836),f=a(838),b=(a(319),a(16)),v=a(840),g=a(10),E=a.n(g),w=new(function(){function e(){Object(i.a)(this,e),this._sysRole="",this._username=""}return Object(c.a)(e,[{key:"sysRole",set:function(e){this._sysRole=e},get:function(){return this._sysRole}},{key:"username",set:function(e){this._username=e},get:function(){return this._username}},{key:"isAuthenticated",get:function(){return!0}}]),e}()),C=(a(338),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.tryLogin=function(){E.a.post("/auth/login/cookie").then(function(e){e.data})},a.login=function(){var e=a.state,t=e.username,n=e.password,o={username:t,password:n};t?n?(w.username="testuser",w.sysRole="developer",a.props.history.push("/workspace/dashboard"),E.a.post("/auth/login/user",o).then(function(e){e.data})):a.setState({errorMsg:"Enter password"}):a.setState({errorMsg:"Enter username"})},a.state={errorMsg:"",username:"",password:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.tryLogin()}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"login-panel"},o.a.createElement("div",{className:"login-app-title"},"Poli"),o.a.createElement("div",{className:"login-error-msg"},this.state.errorMsg),o.a.createElement("div",{className:"long-panel-body"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"form-label"},"Username"),o.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Password"),o.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange})),o.a.createElement("button",{className:"button login-button",onClick:this.login},"Login"))))}}]),t}(o.a.Component)),y=Object(v.a)(C),k=a(837),O=a(32),j=a.n(O),D=a(47),N=function(){var e=Object(D.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/ws/jdbcdatasource");case 3:return t=e.sent,e.abrupt("return",t.data||[]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),S=(a(344),a(13)),P=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.modalClass,r=void 0===n?"":n,s=t.title,l=t.children,i=a?"display-block":"display-none";return o.a.createElement("div",{className:"modal-overlay ".concat(i)},o.a.createElement("div",{className:"modal-panel ".concat(r)},o.a.createElement("div",{className:"model-header row"},o.a.createElement("div",{className:"model-title"},s),o.a.createElement("button",{className:"model-close-button icon-button",onClick:function(){return e.props.onClose()}},o.a.createElement(S.a,{icon:"times",size:"lg"}))),o.a.createElement("hr",null),o.a.createElement("div",{className:"modal-body"},l)))}}]),t}(o.a.Component),x=a(21),I=(a(347),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).show=function(e){a.setState({showToast:!0,message:e},function(){setTimeout(function(){a.hide()},3500)})},a.hide=function(){a.setState({showToast:!1,message:""})},a.state={showToast:!1,message:""},t._toastRef=Object(x.a)(Object(x.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showToast,a=e.message,n=t?"display-block":"display-none";return o.a.createElement("div",{className:"toast-container ".concat(n)},o.a.createElement("button",{className:"button",onClick:this.hide},"X"),o.a.createElement("div",null,a))}}]),t}(o.a.Component));I.show=function(e){I._toastRef.show(e)};var M=I,T=(a(348),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.save=function(){var e=a.state,t=e.showUpdatePassword,n=e.id,o=e.connectionUrl,r=e.driverClassName,s=e.username,l=e.password,i=e.name,c=e.ping;if(i){var u={connectionUrl:o,driverClassName:r,username:s,name:i,ping:c};null!==n?(u.id=n,t&&(u.password=l),E.a.put("/ws/jdbcdatasource",u).then(function(e){a.closeEditPanel(),a.fetchDataSources()}).catch(function(e){console.log(e)})):(u.password=l,E.a.post("/ws/jdbcdatasource",u).then(function(e){a.closeEditPanel(),a.fetchDataSources()}).catch(function(e){console.log(e)}))}},a.ping=function(e){E.a.get("/ws/jdbcdatasource/ping/".concat(e)).then(function(e){var t=e.data;M.show(t)})},a.clearEditPanel=function(){a.setState(a.initialState)},a.openEditPanel=function(e){null!==e?a.setState({showUpdatePassword:!1,id:e.id,connectionUrl:e.connectionUrl,driverClassName:e.driverClassName,username:e.username,password:e.password,name:e.name,ping:e.ping}):a.clearEditPanel(),a.setState({showEditPanel:!0})},a.closeEditPanel=function(){a.setState({showEditPanel:!1})},a.confirmDelete=function(){var e=a.state.objectToDelete,t=void 0===e?{}:e;E.a.delete("/ws/jdbcdatasource/"+t.id).then(function(e){a.fetchDataSources(),a.closeConfirmDeletionPanel()})},a.openConfirmDeletionPanel=function(e){a.setState({objectToDelete:e,showConfirmDeletionPanel:!0})},a.closeConfirmDeletionPanel=function(){a.setState({objectToDelete:{},showConfirmDeletionPanel:!1})},a.toggleUpdatePassword=function(){a.setState(function(e){return{showUpdatePassword:!e.showUpdatePassword}})},a.clearSearch=function(){a.setState({searchValue:""})},a.state={jdbcDataSources:[],showEditPanel:!1,showConfirmDeletionPanel:!1,objectToDelete:{},showUpdatePassword:!1,searchValue:"",id:null,name:"",connectionUrl:"",driverClassName:"",username:"",password:"",ping:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchDataSources()}},{key:"fetchDataSources",value:function(){var e=Object(D.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,this.setState({jdbcDataSources:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=this.state,a=t.showUpdatePassword,n=t.showConfirmDeletionPanel,r=t.searchValue,s=t.id,l=t.jdbcDataSources,i=void 0===l?[]:l,c=t.objectToDelete,u=void 0===c?{}:c,d=null===s?"New":"Edit",h=[],m=function(t){var a=i[t],n=a.name;(!r||r&&n.includes(r))&&h.push(o.a.createElement("div",{key:t,className:"datasource-card row"},o.a.createElement("div",{className:"float-left ellipsis datasource-row-name"},n),o.a.createElement("div",{className:"float-right"},o.a.createElement("button",{className:"icon-button datasource-icon-button",onClick:function(){return e.openEditPanel(a)}},o.a.createElement(S.a,{icon:"edit",size:"lg"})),o.a.createElement("button",{className:"icon-button datasource-icon-button",onClick:function(){return e.openConfirmDeletionPanel(a)}},o.a.createElement(S.a,{icon:"trash-alt",size:"lg"})),o.a.createElement("button",{className:"icon-button datasource-icon-button",onClick:function(){return e.ping(a.id)}},o.a.createElement(S.a,{icon:"plug",size:"lg"})))))},p=0;p<i.length;p++)m(p);return o.a.createElement("div",null,o.a.createElement("input",{type:"text",name:"searchValue",value:this.state.searchValue,onChange:this.handleInputChange,placeholder:"Search...",style:{width:"200px"}}),o.a.createElement("button",{className:"button",onClick:this.clearSearch},"Clear"),o.a.createElement("button",{className:"button",onClick:function(){return e.openEditPanel(null)}},o.a.createElement(S.a,{icon:"plus"})," New datasource"),o.a.createElement("div",{className:"table-panel"},h),o.a.createElement(P,{show:this.state.showEditPanel,onClose:this.closeEditPanel,modalClass:"small-modal-panel",title:d},o.a.createElement("div",null,o.a.createElement("label",{className:"form-label"},"Name ",o.a.createElement("span",{className:"required"},"*")),o.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Connection Url"),o.a.createElement("textarea",{rows:"4",type:"text",name:"connectionUrl",value:this.state.connectionUrl,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Driver class name"),o.a.createElement("input",{type:"text",name:"driverClassName",value:this.state.driverClassName,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Username"),o.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChange}),"Edit"===d?o.a.createElement("div",{style:{margin:"3px 0px 8px 0px"}},o.a.createElement("button",{className:"button",onClick:this.toggleUpdatePassword},"Update password")):null,"New"===d||a?o.a.createElement("div",null,o.a.createElement("label",{className:"form-label"},"Password"),o.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange})):null,o.a.createElement("label",Object(b.a)({className:"form-label"},"className","mt-3"),"Ping"),o.a.createElement("input",{type:"text",name:"ping",value:this.state.ping,onChange:this.handleInputChange}),o.a.createElement("button",{className:"button mt-3",onClick:this.save},"Save"))),o.a.createElement(P,{show:n,onClose:this.closeConfirmDeletionPanel,modalClass:"small-modal-panel",title:"Confirm Deletion"},o.a.createElement("div",{className:"confirm-deletion-panel"},"Are you sure you want to delete ",u.name,"?"),o.a.createElement("button",{className:"button",onClick:this.confirmDelete},"Delete")))}},{key:"initialState",get:function(){return{showUpdatePassword:!1,id:null,name:"",connectionUrl:"",driverClassName:"",username:"",password:"",ping:""}}}]),t}(n.Component)),W=a(102),V=a(23),U=(a(349),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggle=function(){var e=a.props,t=e.name,n=e.checked;a.props.onChange(t,!n)},a.state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a={backgroundColor:e.checked?"#000000":"#FFFFFF"};return o.a.createElement("div",{className:"checkbox-container",onClick:this.toggle},o.a.createElement("div",{className:"checkbox-checkmark"},o.a.createElement("div",{className:"checkbox-checkmark-box",style:a})),o.a.createElement("div",{className:"checkbox-label"},t))}}]),t}(o.a.Component)),R=(a(350),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={isSelectAll:!1,searchValue:""},a.toggleSelectAll=function(){for(var e=!a.state.isSelectAll,t=Object(V.a)(a.props.checkBoxes),n=0;n<t.length;n++)t[n].isChecked=e;a.props.onChange(a.props.filterId,t),a.setState(function(e){return{isSelectAll:!e.isSelectAll}})},a.handleSearchValueChange=function(e){var t=e.target.value;if(t)for(var n=[],o=a.props.checkBoxes,r=0;r<o.length;r++)-1!==o[r].value.indexOf(t)&&n.push(o[r]);a.setState({searchValue:t})},a.handleCheckBoxChange=function(e,t){var n=Object(V.a)(a.props.checkBoxes),o=n.findIndex(function(t){return t.value===e});n[o].isChecked=t,a.props.onChange(a.props.filterId,n)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.checkBoxes,a=(void 0===t?[]:t).map(function(t,a){return o.a.createElement(U,{key:a,name:t.value,value:t.value,checked:t.isChecked,onChange:e.handleCheckBoxChange})});return o.a.createElement("div",null,o.a.createElement("button",{className:"button",onClick:this.toggleSelectAll},"Select All ",this.state.isSelectAll),o.a.createElement("input",{type:"text",name:"name",value:this.state.searchValue,onChange:this.handleSearchValueChange,placeholder:"Search..."}),o.a.createElement("div",{className:"slicer-body"},a))}}]),t}(o.a.Component)),F=(o.a.Component,function(e){var t;try{t=JSON.parse(e)}catch(a){t=[]}return t}),G="slicer",q="single",L=[G,q],A="pie",B="table",Q=[B,A],z=200,K=600,H=(a(351),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchFilters=function(e){null!==e&&(a.setState({dashboardId:e}),E.a.get("/ws/filter/dashboard/"+e).then(function(e){var t=e.data;a.setState({filters:t},a.queryFilters)}))},a.queryFilters=function(){for(var e=a.state.filters,t=0;t<e.length;t++){var n=e[t];if(n.type===G){var o=n.data;E.a.post("/ws/jdbcquery/filter/"+n.id,o).then(function(t){var n=t.data,o=F(n.data),r=e.findIndex(function(e){return e.id===n.id}),s=Object(V.a)(a.state.filters);s[r].queryResult=n;var l=s[r].type;if(l===G){for(var i=[],c=0;c<o.length;c++)for(var u=Object.values(o[c]),d=0;d<u.length;d++){var h=u[d];i.push({value:h,isChecked:!1})}s[r].checkBoxes=i}else if(l===q){for(var m="",p=Object.values(o),f=0;f<p.length;f++){m=p[f];break}s[r].value=m}a.setState({filters:s})})}}},a.renderFilterPanel=function(){for(var e=[],t=a.state.filters,n=function(n){var r=t[n],s=o.a.createElement("div",null,"NONE");if(r.type===G){var l=r.checkBoxes;s=o.a.createElement(R,{key:n,filterId:r.id,checkBoxes:l,onChange:a.onSlicerChange})}else r.type===q&&(s=o.a.createElement("input",{type:"text",value:r.value,onChange:function(e){return a.onSingleValueChange(r.id,e)}}));e.push(o.a.createElement("div",{className:"filter-card"},o.a.createElement("div",{className:"filter-card-title"},r.title,a.props.isEditMode?o.a.createElement("div",{className:"icon-button-group"},o.a.createElement("div",{className:"inline-block",onClick:function(){return a.edit(r.id)}},o.a.createElement(S.a,{icon:"edit",fixedWidth:!0})),o.a.createElement("div",{className:"inline-block",onClick:function(){return a.openConfirmDeletionPanel(r.id)}},o.a.createElement(S.a,{icon:"trash-alt",fixedWidth:!0}))):null),o.a.createElement("div",null,s)))},r=0;r<t.length;r++)n(r);return e},a.edit=function(e){a.props.onEdit(e)},a.onSlicerChange=function(e,t){var n=a.state.filters.findIndex(function(t){return t.id===e}),o=Object(V.a)(a.state.filters);o[n].checkBoxes=Object(V.a)(t),a.setState({filters:o})},a.onSingleValueChange=function(e,t){var n=a.state.filters,o=t.target.value,r=n.findIndex(function(t){return t.id===e}),s=Object(V.a)(n);s[r].value=o,a.setState({filters:s})},a.applyFilters=function(){for(var e=a.state.filters,t=void 0===e?[]:e,n=[],o=0;o<t.length;o++){var r=t[o],s={};if(r.type===G){for(var l=r.checkBoxes,i=void 0===l?[]:l,c=[],u=0;u<i.length;u++){var d=i[u];d.isChecked&&c.push(d.value)}s.value=c,c.length===i.length&&(s.remark="select all")}else r.type===q&&(s.value=r.value);s.param=r.data.param,s.type=r.type,n.push(s)}a.props.onApplyFilters(n)},a.confirmDelete=function(){var e=a.state.objectToDelete;E.a.delete("/ws/filter/".concat(e)).then(function(t){var n=a.state.filters.findIndex(function(t){return t.id===e}),o=Object(V.a)(a.state.filters);o.splice(n,1),a.setState({filters:o}),a.closeConfirmDeletionPanel()})},a.openConfirmDeletionPanel=function(e){a.setState({objectToDelete:e,showConfirmDeletionPanel:!0})},a.closeConfirmDeletionPanel=function(){a.setState({objectToDelete:{},showConfirmDeletionPanel:!1})},a.state={dashboardId:null,filters:[],showConfirmDeletionPanel:!1,objectToDelete:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.show,t={};return t.width=e?z+"px":"0px",o.a.createElement("div",{className:"dashboard-content-filter-panel",style:t},o.a.createElement("div",null,"Filters"),o.a.createElement("button",{className:"button",onClick:this.applyFilters},"Run"),o.a.createElement("div",{className:"filter-view-panel"},this.renderFilterPanel()),o.a.createElement(P,{show:this.state.showConfirmDeletionPanel,onClose:this.closeConfirmDeletionPanel,modalClass:"small-modal-panel",title:"Confirm Deletion"},o.a.createElement("div",{className:"confirm-deletion-panel"},"Are you sure you want to delete this filter?"),o.a.createElement("button",{className:"button",onClick:this.confirmDelete},"Delete")))}}]),t}(n.Component)),_=a(311),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(){a.setState(function(e){return{showPalette:!e.showPalette}})},a.handleClose=function(){a.setState({showPalette:!1})},a.handleChange=function(e){var t=e.rgb,n="rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a,")");a.props.onChange(n)},a.state={showPalette:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={width:"36px",height:"14px",borderRadius:"2px",background:this.props.value};return o.a.createElement("div",null,o.a.createElement("div",{style:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},onClick:this.handleClick},o.a.createElement("div",{style:e})),this.state.showPalette?o.a.createElement("div",{style:{position:"absolute",zIndex:"2"}},o.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:this.handleClose}),o.a.createElement(_.ChromePicker,{color:this.props.value,onChange:this.handleChange})):null)}}]),t}(o.a.Component),Y=2,J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onMouseDown=function(e){e.preventDefault();for(var t=s.a.findDOMNode(Object(x.a)(Object(x.a)(a))).parentNode,n=e.clientX-t.offsetLeft,o=e.clientY-t.offsetTop,r=document.getElementsByClassName("grid-box"),l=0;l<r.length;l++)r[l].style.zIndex=20;t.style.zIndex=30;var i=t.ownerDocument;i.addEventListener("mouseup",a.onMouseUp),i.addEventListener("mousemove",a.onMouseMove),a.setState({xOffset:n,yOffset:o}),a.props.onMouseDown("drag")},a.onMouseUp=function(e){e.preventDefault();var t=s.a.findDOMNode(Object(x.a)(Object(x.a)(a)));if(t){var n=t.ownerDocument;n.removeEventListener("mousedown",a.onMouseDown),n.removeEventListener("mouseup",a.onMouseUp),n.removeEventListener("mousemove",a.onMouseMove)}a.props.onMouseUp()},a.onMouseMove=function(e){if(e.preventDefault(),"drag"===a.props.mode){var t=1;a.props.snapToGrid&&(t=4);var n=s.a.findDOMNode(Object(x.a)(Object(x.a)(a))).parentNode,o=e.clientX-a.state.xOffset,r=e.clientY-a.state.yOffset,l=n.parentNode,i=l.clientWidth,c=l.clientHeight,u=parseInt(n.style.width,10)+2*Y,d=parseInt(n.style.height,10)+2*Y;o<0&&(o=0),r<0&&(r=0),o+u>i&&(o=i-u),r+d>c&&(r=c-d),o=Math.floor(o/t)*t,r=Math.floor(r/t)*t,n.style.left=o+"px",n.style.top=r+"px"}},a.state={xOffset:0,yOffset:0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=s.a.findDOMNode(this);if(e){var t=e.ownerDocument;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"grid-draggable",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},o.a.createElement(S.a,{icon:"expand-arrows-alt",fixedWidth:!0}))}}]),t}(o.a.Component),$=30,Z=30,ee=2,te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onMouseDown=function(e){e.preventDefault();var t=s.a.findDOMNode(Object(x.a)(Object(x.a)(a))),n=e.clientX,o=e.clientY,r=t.ownerDocument;r.addEventListener("mouseup",a.onMouseUp),r.addEventListener("mousemove",a.onMouseMove),a.setState({currentX:n,currentY:o}),a.props.onMouseDown("resize")},a.onMouseUp=function(e){e.preventDefault();var t=s.a.findDOMNode(Object(x.a)(Object(x.a)(a)));if(t){var n=t.ownerDocument;n.removeEventListener("mousedown",a.onMouseDown),n.removeEventListener("mouseup",a.onMouseUp),n.removeEventListener("mousemove",a.onMouseMove)}a.props.onMouseUp()},a.onMouseMove=function(e){if(e.preventDefault(),"resize"===a.props.mode){var t=e.clientX-a.state.currentX,n=e.clientY-a.state.currentY,o=s.a.findDOMNode(Object(x.a)(Object(x.a)(a))).parentNode,r=parseInt(o.style.width,10),l=parseInt(o.style.height,10),i=o.parentNode,c=i.clientWidth,u=i.clientHeight,d=Math.floor(r+t),h=Math.floor(l+n);d<$&&(d=$),h<Z&&(h=Z);var m=o.offsetLeft+2*ee,p=o.offsetTop+2*ee;d+m>c&&(d=c-m),h+p>u&&(h=u-p),o.style.width=d+"px",o.style.height=h+"px",a.setState({currentX:e.clientX,currentY:e.clientY})}},a.state={currentX:0,currentY:0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=s.a.findDOMNode(this);if(e){var t=e.ownerDocument;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"grid-resizable",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},o.a.createElement(S.a,{icon:"compress",fixedWidth:!0}))}}]),t}(o.a.Component),ae=a(137),ne=a.n(ae),oe=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],re=function(e,t,a){for(var n=[],o=[],r=0;r<e.length;r++){var s=e[r];n.push(s[t]),o.push({name:s[t],value:s[a]})}return function(e,t){return{color:oe,tooltip:{},legend:{type:"scroll",orient:"vertical",data:e,right:10,top:10,bottom:10},series:[{type:"pie",center:["40%","50%"],radius:"50%",data:t}]}}(n,o)},se=a(312),le=(a(822),a(823),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=void 0===t?[]:t,n=e.columns,r=void 0===n?[]:n,s=e.drillThrough,l=void 0===s?[]:s,i=e.error,c=[];return r.forEach(function(e){var t=e.name,a={Header:t,accessor:t};if(l.length>0){var n=l.findIndex(function(e){return e.columnName===t});if(-1!==n){var r=l[n].dashboardId;a.Cell=function(e){return o.a.createElement("a",{href:"/poli/workspace/dashboard/".concat(r,"?").concat(t,"=").concat(e.value)},e.value)}}}c.push(a)}),i?o.a.createElement("div",null,i):o.a.createElement(se.a,{data:a,columns:c,defaultPageSize:10,previousText:"Prev",nextText:"Next"})}}]),t}(o.a.Component)),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onMouseDown=function(e){console.log("GridItem onMouseDown",e),a.setState({mode:e})},a.onMouseUp=function(){console.log("GridItem onMouseUp"),a.setState({mode:""});var e=s.a.findDOMNode(Object(x.a)(Object(x.a)(a))),t=e.offsetLeft,n=e.offsetTop,o=parseInt(e.style.width,10),r=parseInt(e.style.height,10),l={id:a.props.id,x:t,y:n,width:o,height:r};a.props.onWidgetMove(l)},a.onMouseMove=function(e,t,a){e.preventDefault()},a.editWidget=function(e){a.props.onWidgetEdit(e)},a.exportCsv=function(e){},a.exportJson=function(e){},a.removeWidget=function(e){a.props.onWidgetRemove(e)},a.onTableTdPropsChange=function(e,t,n,o){return{onClick:function(e,r){console.log("A Td Element was clicked!"),console.log("it produced this event:",e),console.log("It was in this column:",n),console.log("It was in this row:",t),console.log("It was in this table instance:",o);var s=n.Header,l=t.row[s],i=o.props.widgetDrillThrough||[];console.log("onTableTdPropsChange",s,l,i);var c=i.findIndex(function(e){return e.columnName===s});if(-1!==c){var u=i[c].dashboardId;a.props.history.push("/workspace/dashboard/".concat(u,"?").concat(s,"=").concat(l))}}}},a.onChartClick=function(e,t){console.log("onChartClick",e,t)},a.onChartLegendselectchanged=function(e,t){console.log("onChartLegendselectchanged",e,t)},a.renderWidgetContent=function(){var e={click:a.onChartClick,legendselectchanged:a.onChartLegendselectchanged},t=a.props,n=t.chartType,r=t.queryResult,s=void 0===r?{}:r,l=t.drillThrough,i=t.data,c=void 0===i?{}:i,u=F(s.data),d=s.columns||[],h=s.error,m=o.a.createElement("div",null);if(n===B)m=o.a.createElement(le,{data:u,columns:d,error:h,drillThrough:l});else if(n===A){var p=c.pieKey,f=c.pieValue,b=re(u,p,f);m=o.a.createElement(ne.a,{option:b,className:"echarts",onEvents:e})}return m},a.state={mode:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=s.a.findDOMNode(this);if(e){var t=e.ownerDocument;t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mousemove",this.onMouseMove)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.title,r=t.isEditMode,s=t.style,l=(void 0===s?{}:s).showBorder,i=void 0!==l&&l?"2px solid #4b4f56":"2px solid #FFFFFF",c={left:this.props.x+"px",top:this.props.y+"px",width:this.props.width+"px",height:this.props.height+"px",zIndex:1,border:i};return o.a.createElement("div",{className:"grid-box",style:c},o.a.createElement("div",{className:"grid-box-title"},n,r?o.a.createElement("div",{className:"float-right",style:{marginRight:"20px"}},o.a.createElement("div",{className:"inline-block",onClick:function(){return e.editWidget(a)}},o.a.createElement(S.a,{icon:"edit",fixedWidth:!0})),o.a.createElement("div",{className:"inline-block",onClick:function(){return e.removeWidget(a)}},o.a.createElement(S.a,{icon:"trash-alt",fixedWidth:!0}))):o.a.createElement("div",{className:"grid-box-file-button-group"},o.a.createElement("div",{className:"inline-block",onClick:function(){return e.exportJson(a)}},o.a.createElement(S.a,{icon:"file-export",fixedWidth:!0})),o.a.createElement("div",{className:"inline-block",onClick:function(){return e.exportCsv(a)}},o.a.createElement(S.a,{icon:"file-csv",fixedWidth:!0})))),o.a.createElement("div",{className:"grid-box-content"},this.renderWidgetContent()),r?o.a.createElement(J,{onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,mode:this.state.mode,snapToGrid:this.props.snapToGrid}):null,r?o.a.createElement(te,{onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,mode:this.state.mode}):null)}}]),t}(o.a.Component),ce=Object(v.a)(ie),ue=(a(824),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.width,n=t.height,r=t.backgroundColor,s=t.widgets,l=void 0===s?[]:s,i={width:a+"px",height:n+"px",backgroundColor:r};t.showGridlines&&(i.backgroundSize="15px 15px",i.backgroundImage="radial-gradient(rgb(63, 93, 131) 10%, transparent 10%)");var c=l.map(function(t,a){return o.a.createElement(ce,Object.assign({key:a,snapToGrid:e.props.snapToGrid,isEditMode:e.props.isEditMode},t,{onWidgetMove:e.props.onWidgetMove,onWidgetEdit:e.props.onWidgetEdit,onWidgetRemove:e.props.onWidgetRemove}))});return o.a.createElement("div",{className:"grid-layout",style:i},c)}}]),t}(o.a.Component)),de=1200,he=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).resizeGrid=function(e,t){var n=a.state.gridWidth,o=a.state.widgets,r=Object(V.a)(o);t&&a.resizeWidgetsToBase(r,n);var s=e-10;a.resizeWidgetsToActual(r,s),a.setState({widgets:r,gridWidth:s})},a.resizeWidgetsToBase=function(e,t){for(var n=0;n<e.length;n++){var o=a.scaleToBase(e[n].x,t),r=a.scaleToBase(e[n].width,t);e[n].x=o,e[n].width=r}},a.resizeWidgetsToActual=function(e,t){for(var n=0;n<e.length;n++){var o=a.scaleToActual(e[n].x,t),r=a.scaleToActual(e[n].width,t);e[n].x=o,e[n].width=r}},a.scaleToActual=function(e,t){return Math.round(e*t/de)},a.scaleToBase=function(e,t){return Math.round(e*de/t)},a.fetchWidgets=function(e,t,n){null!==e&&E.a.get("/ws/widget/dashboard/"+e).then(function(e){var o=e.data;a.setState({widgets:o},function(){a.resizeGrid(t,!1),a.queryWidgets(n)})})},a.queryWidgets=function(e){for(var t=null===e?[]:e,n=a.state.widgets,o=0;o<n.length;o++){var r=n[o];E.a.post("/ws/jdbcquery/widget/"+r.id,t).then(function(e){var t=e.data,o=n.findIndex(function(e){return e.id===t.id}),r=Object(V.a)(n);r[o].queryResult=t,a.setState({widgets:r})})}},a.handleCheckBoxChange=function(e,t){a.setState(Object(b.a)({},e,t))},a.handleHeightChange=function(e){a.props.onHeightChange(e.target.value)},a.onBackgroundColorChange=function(e){a.props.onBackgroundColorChange(e)},a.saveWidgets=function(){var e=JSON.parse(JSON.stringify(a.state.widgets)),t=a.state.gridWidth;a.resizeWidgetsToBase(e,t),E.a.post("/ws/widget/position",e).then(function(e){})},a.onWidgetMove=function(e){var t=a.state.widgets,n=t.findIndex(function(t){return t.id===e.id}),o=Object(V.a)(t);o[n].x=e.x,o[n].y=e.y,o[n].width=e.width,o[n].height=e.height,a.setState({widgets:o})},a.confirmDelete=function(){var e=a.state.objectToDelete;E.a.delete("/ws/widget/".concat(e)).then(function(t){var n=a.state.widgets,o=n.findIndex(function(t){return t.id===e}),r=Object(V.a)(n);r.splice(o,1),a.setState({widgets:r}),a.closeConfirmDeletionPanel()})},a.openConfirmDeletionPanel=function(e){a.setState({objectToDelete:e,showConfirmDeletionPanel:!0})},a.closeConfirmDeletionPanel=function(){a.setState({objectToDelete:{},showConfirmDeletionPanel:!1})},a.state={widgets:[],gridWidth:1200,snapToGrid:!1,showGridlines:!1,showConfirmDeletionPanel:!1,objectToDelete:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={width:this.props.widgetViewWidth+"px"};return o.a.createElement("div",{className:"dashboard-content-widget-panel",style:e},this.props.isEditMode?o.a.createElement("div",{className:"dashboard-attribute-edit-panel"},o.a.createElement("div",{className:"inline-block"},"Height:"),o.a.createElement("input",{type:"text",name:"height",value:this.props.height,onChange:this.handleHeightChange,className:"inline-block",style:{width:"200px"}}),o.a.createElement("div",null,"Background Color",o.a.createElement(X,{value:this.props.backgroundColor,onChange:this.onBackgroundColorChange})),o.a.createElement(U,{name:"snapToGrid",value:"Snap to grid",checked:this.state.snapToGrid,onChange:this.handleCheckBoxChange}),o.a.createElement(U,{name:"showGridlines",value:"Show gridlines",checked:this.state.showGridlines,onChange:this.handleCheckBoxChange})):null,o.a.createElement(ue,{width:this.state.gridWidth,height:this.props.height,backgroundColor:this.props.backgroundColor,snapToGrid:this.state.snapToGrid,showGridlines:this.state.showGridlines,widgets:this.state.widgets,isEditMode:this.props.isEditMode,onWidgetMove:this.onWidgetMove,onWidgetEdit:this.props.onWidgetEdit,onWidgetRemove:this.openConfirmDeletionPanel}),o.a.createElement(P,{show:this.state.showConfirmDeletionPanel,onClose:this.closeConfirmDeletionPanel,modalClass:"small-modal-panel",title:"Confirm Deletion"},o.a.createElement("div",{className:"confirm-deletion-panel"},"Are you sure you want to delete this widget?"),o.a.createElement("button",{className:"button",onClick:this.confirmDelete},"Delete")))}}]),t}(o.a.Component),me=a(138),pe=a.n(me),fe=(a(307),a(308),a(830),a(831),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleTabClick=function(e){a.setState({activeTab:e})},a.state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.activeTab;this.setState({activeTab:e})}},{key:"render",value:function(){for(var e=this,t=this.props.children,a=void 0===t?[]:t,n=this.state.activeTab,r=[],s=null,l=function(t){var l=a[t].props.title,i="";l===n&&(i="tab-header-active",s=a[t].props.children),r.push(o.a.createElement("li",{className:"tab-header-item ".concat(i),key:t,onClick:function(){return e.handleTabClick(l)}},l))},i=0;i<a.length;i++)l(i);return o.a.createElement("div",{className:"tab-container"},o.a.createElement("ul",{className:"tab-header"},r),o.a.createElement("div",{className:"tab-content"},s))}}]),t}(o.a.Component)),be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleOptionChange=function(e){var t=a.props.name,n=e.target.value;a.props.onChange(t,n)},a.state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.options,n=void 0===a?[]:a,r=e.optionValue,s=e.optionDisplay,l=[];return l.push(o.a.createElement("option",{value:"",key:""})),n.forEach(function(e,t){var a,n;r&&s?(a=e[r],n=e[s]):(a=e,n=e),l.push(o.a.createElement("option",{value:a,key:t},n))}),o.a.createElement("select",{value:t,onChange:this.handleOptionChange},l)}}]),t}(o.a.Component),ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchWidget=function(){var e=Object(D.a)(j.a.mark(function e(t,n){var o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState(a.initialState),e.next=3,N();case 3:o=e.sent,a.setState({jdbcDataSources:o}),E.a.get("/ws/dashboard").then(function(e){var t=e.data;a.setState({drillDashboards:t})}),null===t?a.setState({widgetId:null}):(a.setState({widgetId:t}),E.a.get("/ws/widget/"+t).then(function(e){var n=e.data;if(n.chartType===A){var o=n.data,r=o.pieKey,s=o.pieValue;a.setState({pieKey:r,pieValue:s})}a.setState({widgetId:t,title:n.title,x:n.x,y:n.y,width:n.width,height:n.height,sqlQuery:n.sqlQuery,chartType:n.chartType,jdbcDataSourceId:n.jdbcDataSourceId,drills:n.drillThrough,style:n.style},function(){a.runQuery()})}));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleCheckBoxChange=function(e,t){if("showBorder"===e){var n=Object(W.a)({},a.state.style);n.showBorder=t,a.setState({style:n})}},a.handleAceEditorChange=function(e){a.setState({sqlQuery:e})},a.handleIntegerOptionChange=function(e,t){var n=parseInt(t,10)||0;a.setState(Object(b.a)({},e,n))},a.handleOptionChange=function(e,t){a.setState(Object(b.a)({},e,t))},a.save=function(){var e=a.state,t=e.widgetId,n=e.title,o=e.jdbcDataSourceId,r=e.sqlQuery,s=e.chartType,l=e.drills,i=e.style,c={title:n,dashboardId:a.props.dashboardId,chartType:s,jdbcDataSourceId:o,sqlQuery:r,drillThrough:l,style:i};if(s===B);else if(s===A){var u=a.state,d=u.pieKey,h=u.pieValue;c.data={pieKey:d,pieValue:h}}null===t?E.a.post("/ws/widget",c).then(function(e){a.props.onSave()}):(c.id=t,E.a.put("/ws/widget",c).then(function(e){a.props.onSave()}))},a.runQuery=function(){var e={jdbcDataSourceId:a.state.jdbcDataSourceId,sqlQuery:a.state.sqlQuery};E.a.post("/ws/jdbcquery/query",e).then(function(e){var t=e.data;a.setState({queryResult:t})})},a.addDrillThrough=function(){var e=a.state,t=e.drills,n=e.drillColumnName,o=e.drillDashboardId;a.state.filterId;if(-1===t.findIndex(function(e){return e.columnName===n})){var r=Object(V.a)(t);r.push({columnName:n,dashboardId:o}),a.setState({drills:r})}},a.removeDrillThrough=function(e){var t=a.state.drills,n=t.findIndex(function(t){return t.columnName===e.columnName&&t.dashboardId===e.dashboardId});if(-1!==n){var o=Object(V.a)(t);o.splice(n,1),a.setState({drills:o})}},a.generateChart=function(){if(a.state.chartType===A){var e=a.state,t=e.pieKey,n=e.pieValue,o=e.queryResult,r=void 0===o?{}:o;console.log("generateChart",t,n);var s=F(r.data),l=re(s,t,n);a.setState({chartOption:l})}},a.renderChartPreview=function(){var e=a.state,t=e.chartType,n=e.queryResult,r=(void 0===n?{}:n).columns||[],s=o.a.createElement("div",null,"NOT SUPPORTED");if(t===B);else if(t===A){var l=a.state,i=l.chartOption,c=l.pieKey,u=l.pieValue;s=o.a.createElement("div",null,o.a.createElement("label",{className:"form-label"},o.a.createElement("i",{class:"fas fa-chart-pie"})," Pie Chart"),o.a.createElement("div",null,'Count "value" by "key"'),o.a.createElement("label",{className:"form-label"},"Aggr Key (string)"),o.a.createElement(be,{name:"pieKey",value:c,onChange:a.handleOptionChange,options:r,optionDisplay:"name",optionValue:"name"}),o.a.createElement("label",{className:"form-label"},"By Aggr Value (number)"),o.a.createElement(be,{name:"pieValue",value:u,onChange:a.handleOptionChange,options:r,optionDisplay:"name",optionValue:"name"}),o.a.createElement("button",{onClick:a.generateChart},"Generete Chart"),o.a.createElement(ne.a,{option:i,style:{height:"350px",width:"100%"},className:"react_for_echarts"}))}return s},a.state=a.initialState,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.queryResult,n=t.jdbcDataSources,r=void 0===n?[]:n,s=t.drills,l=t.drillDashboards,i=void 0===l?[]:l,c=F(a.data),u=a.columns||[],d=a.error,h=(s||[]).map(function(t){return o.a.createElement("div",{key:t.columnName},o.a.createElement("div",null,"Column: ",t.columnName),o.a.createElement("div",null,"Dashboard: ",t.dashboardId),o.a.createElement("button",{onClick:function(){return e.removeDrillThrough(t)}},"delete"))}),m=u.map(function(e){return o.a.createElement("div",{key:e.name},e.name," ",e.dataType)});return o.a.createElement("div",null,o.a.createElement("button",{className:"button",onClick:this.save},"Save"),o.a.createElement("div",{className:"form-panel"},o.a.createElement(fe,{activeTab:"basic"},o.a.createElement("div",{title:"basic"},o.a.createElement("label",{className:"form-label"},"Title"),o.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange}),o.a.createElement(U,{name:"showBorder",value:"Show border",checked:this.state.style.showBorder,onChange:this.handleCheckBoxChange})),o.a.createElement("div",{title:"Query"},o.a.createElement("label",{className:"form-label"},"DataSource"),o.a.createElement(be,{name:"jdbcDataSourceId",value:this.state.jdbcDataSourceId,onChange:this.handleIntegerOptionChange,options:r,optionDisplay:"name",optionValue:"id"}),o.a.createElement("label",{className:"form-label"},"SQL Query"),o.a.createElement(pe.a,{style:{marginTop:"8px"},value:this.state.sqlQuery,mode:"mysql",theme:"xcode",name:"blah2",onChange:this.handleAceEditorChange,height:"300px",width:"100%",fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,setOptions:{showLineNumbers:!0,tabSize:2}}),o.a.createElement("div",{className:"mt-3"},o.a.createElement("button",{className:"button",onClick:this.runQuery},"Run Query")),o.a.createElement("label",{className:"form-label"},"Result"),o.a.createElement(le,{data:c,columns:u,error:d}),o.a.createElement("label",{className:"form-label"},"Columns Mapping"),o.a.createElement("div",null,m)),o.a.createElement("div",{title:"Chart"},o.a.createElement("label",{className:"form-label"},"Chart Options"),o.a.createElement(be,{name:"chartType",value:this.state.chartType,onChange:this.handleOptionChange,options:Q}),o.a.createElement("label",{className:"form-label"},"Preview"),this.renderChartPreview()),o.a.createElement("div",{title:"Drill through"},o.a.createElement("label",{className:"form-label"},"Drill through"),o.a.createElement("label",{className:"form-label"},"Column"),o.a.createElement(be,{name:"drillColumnName",value:this.state.drillColumnName,options:u,onChange:this.handleOptionChange,optionDisplay:"name",optionValue:"name"}),o.a.createElement("label",{className:"form-label"},"Dashboard"),o.a.createElement(be,{name:"drillDashboardId",value:this.state.drillDashboardId,options:i,onChange:this.handleIntegerOptionChange,optionDisplay:"name",optionValue:"id"}),o.a.createElement("div",null,h),o.a.createElement("button",{className:"button",onClick:this.addDrillThrough},"Add")))))}},{key:"initialState",get:function(){return{jdbcDataSources:[],widgetId:null,title:"",sqlQuery:"",jdbcDataSourceId:"",queryResult:{},chartType:B,style:{showBorder:!1},pieKey:"",pieValue:"",chartOption:{},drills:[],drillDashboards:[],drillColumnName:"",drillDashboardId:""}}}]),t}(o.a.Component),ge=(a(832),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchFilter=function(){var e=Object(D.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState(a.initialState),e.next=3,N();case 3:n=e.sent,a.setState({jdbcDataSources:n}),null===t?a.setState({filterId:null}):E.a.get("/ws/filter/"+t).then(function(e){var n=e.data,o=n.data,r=n.type;a.setState({filterId:t,title:n.title,type:n.type,jdbcDataSourceId:n.jdbcDataSourceId,data:o}),r===G?a.setState({sqlQuery:o.sqlQuery,param:o.param}):r===q&&a.setState({sqlQuery:o.sqlQuery,param:o.param})});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleAceEditorChange=function(e){a.setState({sqlQuery:e})},a.handleOptionChange=function(e,t){a.setState(Object(b.a)({},e,t))},a.handleIntegerOptionChange=function(e,t){var n=parseInt(t,10)||0;a.setState(Object(b.a)({},e,n))},a.save=function(){var e=a.state,t=e.filterId,n=e.title,o=e.type,r=e.jdbcDataSourceId,s=e.sqlQuery,l=e.param,i={title:n,type:o,dashboardId:a.props.dashboardId,jdbcDataSourceId:r};o===G?i.data={sqlQuery:s,param:l}:o===q&&(i.data={useQuery:!1,sqlQuery:s,param:l}),null===t?E.a.post("/ws/filter",i).then(function(e){a.props.onSave()}):(i.id=t,E.a.put("/ws/filter",i).then(function(e){a.props.onSave()}))},a.runQuery=function(){var e={jdbcDataSourceId:a.state.jdbcDataSourceId,sqlQuery:a.state.sqlQuery};E.a.post("/ws/jdbcquery/query",e).then(function(e){var t=e.data;a.setState({queryResult:t})})},a.state=a.initialState,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.queryResult,a=void 0===t?{}:t,n=e.jdbcDataSources,r=void 0===n?[]:n,s=e.type,l=F(a.data),i=a.columns||[],c=a.error,u=s===G;return o.a.createElement("div",null,o.a.createElement("button",{className:"button",onClick:this.save},"Save"),o.a.createElement("button",{className:"button",onClick:this.runQuery},"Run"),o.a.createElement("div",{className:"form-panel"},o.a.createElement("label",{className:"form-label"},"Title"),o.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Type"),o.a.createElement(be,{name:"type",value:this.state.type,onChange:this.handleOptionChange,options:L}),u?o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"form-label"},"DataSource"),o.a.createElement(be,{name:"jdbcDataSourceId",value:this.state.jdbcDataSourceId,onChange:this.handleIntegerOptionChange,options:r,optionDisplay:"name",optionValue:"id"}),o.a.createElement("label",{className:"form-label"},"SQL Query"),o.a.createElement(pe.a,{style:{marginTop:"8px"},value:this.state.sqlQuery,mode:"mysql",theme:"xcode",name:"blah2",onChange:this.handleAceEditorChange,height:"300px",width:"100%",fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,setOptions:{showLineNumbers:!0,tabSize:2}}),o.a.createElement("label",{className:"form-label"},"Result"),o.a.createElement(le,{data:l,columns:i,error:c})):null,o.a.createElement("label",{className:"form-label"},"Param"),o.a.createElement("input",{type:"text",name:"param",value:this.state.param,onChange:this.handleInputChange})))}},{key:"initialState",get:function(){return{jdbcDataSources:[],filterId:null,title:"",type:G,data:{},sqlQuery:"",jdbcDataSourceId:"",queryResult:{},param:""}}}]),t}(o.a.Component)),Ee=(a(309),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadViewByDashboardName=function(){var e=a.props.location.search,t=new URLSearchParams(e),n=t.get("name"),o="true"==t.get("showFilter"),r=a.getPageWidth(),s=o?r-z:r;a.setState({pageWidth:r,widgetViewWidth:s,isReadOnly:!0,name:n,showFilterViewPanel:o},function(){E.a.get("/ws/dashboard/name/".concat(n)).then(function(e){var t=e.data;a.setState({dashboardId:t.id,name:t.name,style:t.style},function(){a.refresh()})})})},a.getPageWidth=function(){return s.a.findDOMNode(Object(x.a)(Object(x.a)(a))).clientWidth-40},a.handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.toggleAutoRefresh=function(){var e=a.state.autoRefreshTimerId;if(e)clearInterval(e),a.setState({autoRefreshTimerId:""});else{var t=a.state.refreshInterval,n=parseInt(t,10)||15;n=n<1?1:n;var o=setInterval(function(){a.filterViewPanel.current.applyFilters(),a.updateLastRefreshed()},1e3*n);a.setState({autoRefreshTimerId:o})}},a.refresh=function(){a.refreshWidgetView(),a.refreshFilterView(),a.updateLastRefreshed()},a.refreshFilterView=function(){var e=a.state.dashboardId;a.filterViewPanel.current.fetchFilters(e)},a.refreshWidgetView=function(){var e=a.state,t=e.dashboardId,n=e.widgetViewWidth;a.widgetViewPanel.current.fetchWidgets(t,n,null)},a.updateLastRefreshed=function(){var e=(new Date).toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1");a.setState({lastRefreshed:e})},a.save=function(){console.log("save");var e=a.state,t=e.dashboardId,n={id:t,name:e.name,style:e.style};E.a.put("/ws/dashboard/",n).then(function(e){}),a.widgetViewPanel.current.saveWidgets(),a.props.onDashboardSave(t),a.setState({isEditMode:!1})},a.edit=function(){a.setState({isEditMode:!0})},a.cancelEdit=function(){a.setState({isEditMode:!1})},a.onSaveWidget=function(){a.setState({showWidgetEditPanel:!1}),a.refreshWidgetView()},a.onSaveFilter=function(){a.setState({showFilterEditPanel:!1}),a.refreshFilterView()},a.toggleFilterViewPanel=function(){var e=a.state.showFilterViewPanel;a.resizePageLayout(!e)},a.resizePageLayout=function(e){var t=a.getPageWidth(),n=e?t-z:t;a.widgetViewPanel.current.resizeGrid(n,!0),a.setState({showFilterViewPanel:e,widgetViewWidth:n})},a.openFilterEditPanel=function(e){a.filterEditPanel.current.fetchFilter(e),a.setState({showFilterEditPanel:!0})},a.openWidgetEditPanel=function(e){var t=a.state.dashboardId;a.widgetEditPanel.current.fetchWidget(e,t),a.setState({showWidgetEditPanel:!0})},a.applyFilters=function(e){a.widgetViewPanel.current.queryWidgets(e)},a.fullScreen=function(){var e=a.state.name,t="/workspace/dashboard/view?name=".concat(e);window.open(t,"_blank")},a.onTableCellClick=function(){a.props.history.push("/workspace/dashboard/drill?name=&")},a.onHeightChange=function(e){var t=Object(W.a)({},a.state.style);t.height=e,a.setState({style:t})},a.onBackgroundColorChange=function(e){var t=Object(W.a)({},a.state.style);t.backgroundColor=e,a.setState({style:t})},a.confirmDelete=function(){var e=a.state.objectToDelete,t=(void 0===e?{}:e).id;E.a.delete("/ws/dashboard/".concat(t)).then(function(e){a.props.onDashboardDelete(t),a.closeConfirmDeletionPanel()})},a.deleteDashboard=function(){var e=a.state,t={id:e.dashboardId,name:e.name};a.openConfirmDeletionPanel(t)},a.openConfirmDeletionPanel=function(e){a.setState({objectToDelete:e,showConfirmDeletionPanel:!0})},a.closeConfirmDeletionPanel=function(){a.setState({objectToDelete:{},showConfirmDeletionPanel:!1})},a.state={showWidgetEditPanel:!1,showFilterEditPanel:!1,showFilterViewPanel:!0,showConfirmDeletionPanel:!1,objectToDelete:{},isEditMode:!1,isReadOnly:!1,autoRefreshTimerId:"",lastRefreshed:"",refreshInterval:15,jdbcDataSourceOptions:[],dashboardId:0,name:"",style:{},widgetViewWidth:1e3},a.filterViewPanel=o.a.createRef(),a.filterEditPanel=o.a.createRef(),a.widgetViewPanel=o.a.createRef(),a.widgetEditPanel=o.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a=void 0!==t?t:null;console.log("DashboardEditView",a);var n=this.props.location.search;console.log("url",n);var o=new URLSearchParams(n);console.log("params",o);var r=!0,s=!1,l=void 0;try{for(var i,c=o.entries()[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;console.log(u[0]+", "+u[1])}}catch(m){s=!0,l=m}finally{try{r||null==c.return||c.return()}finally{if(s)throw l}}var d=this.getPageWidth(),h=this.state.showFilterViewPanel?d-z:d;console.log("componentDidMount",d,h),this.setState({pageWidth:d,widgetViewWidth:h},function(){null===a?e.setState({dashboardId:null}):E.a.get("/ws/dashboard/".concat(a)).then(function(t){var a=t.data;e.setState({dashboardId:a.id,name:a.name,style:a.style},function(){e.refresh()})})})}},{key:"componentWillUnmount",value:function(){var e=this.state.autoRefreshTimerId;e&&clearInterval(e)}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.autoRefreshTimerId,r=a.lastRefreshed,s=a.isEditMode,l=a.isReadOnly,i=""===n?"OFF":"ON",c=null,u=o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"mr-3"},"Last refreshed: ",r),"OFF"===i?o.a.createElement("input",{type:"text",name:"refreshInterval",value:this.state.refreshInterval,onChange:this.handleInputChange,className:"inline-block",style:{width:"50px"}}):null,o.a.createElement("button",{className:"button square-button mr-3",onClick:this.toggleAutoRefresh},"ON"===i?o.a.createElement(S.a,{icon:"stop-circle",size:"lg",fixedWidth:!0}):o.a.createElement(S.a,{icon:"play-circle",size:"lg",fixedWidth:!0})),o.a.createElement("button",{className:"button mr-3",onClick:this.toggleFilterViewPanel},"Show Filters"),o.a.createElement("button",{className:"button square-button",onClick:this.refresh},o.a.createElement(S.a,{icon:"redo-alt",size:"lg",fixedWidth:!0})));return l?c=u:e=s?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"button mr-3",onClick:this.cancelEdit},"Cancel"),o.a.createElement("button",{className:"button mr-3",onClick:this.save},"Save"),o.a.createElement("button",{className:"button mr-3",onClick:this.deleteDashboard},"Delete"),o.a.createElement("button",{className:"button mr-3",onClick:function(){return t.openFilterEditPanel(null)}},"Add Filter"),o.a.createElement("button",{className:"button",onClick:function(){return t.openWidgetEditPanel(null)}},"Add Widget")):o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"button square-button mr-3",onClick:this.fullScreen},o.a.createElement(S.a,{icon:"tv",size:"lg",fixedWidth:!0})),o.a.createElement("button",{className:"button",onClick:this.edit},"Edit"),u),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"dashboard-menu-panel row"},o.a.createElement("div",{className:"float-left"},l||!s?o.a.createElement("div",{className:"dashboard-name"},this.state.name):o.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange,className:"dashboard-name"})),o.a.createElement("div",{className:"float-right"},c,e)),o.a.createElement(he,Object.assign({ref:this.widgetViewPanel,isEditMode:this.state.isEditMode,widgetViewWidth:this.state.widgetViewWidth,onWidgetEdit:this.openWidgetEditPanel,onHeightChange:this.onHeightChange,onBackgroundColorChange:this.onBackgroundColorChange},this.state.style)),o.a.createElement(H,{ref:this.filterViewPanel,onEdit:this.openFilterEditPanel,onApplyFilters:this.applyFilters,isEditMode:this.state.isEditMode,show:this.state.showFilterViewPanel}),o.a.createElement(P,{show:this.state.showWidgetEditPanel,onClose:function(){return t.setState({showWidgetEditPanel:!1})},modalClass:"dashboard-edit-widget-dialog",title:"Widget Edit"},o.a.createElement(ve,{ref:this.widgetEditPanel,jdbcDataSourceOptions:this.state.jdbcDataSourceOptions,dashboardId:this.state.dashboardId,onSave:this.onSaveWidget})),o.a.createElement(P,{show:this.state.showFilterEditPanel,onClose:function(){return t.setState({showFilterEditPanel:!1})},modalClass:"dashboard-edit-filter-dialog",title:"Filter Edit"},o.a.createElement(ge,{ref:this.filterEditPanel,jdbcDataSourceOptions:this.state.jdbcDataSourceOptions,dashboardId:this.state.dashboardId,onSave:this.onSaveFilter})),o.a.createElement(P,{show:this.state.showConfirmDeletionPanel,onClose:this.closeConfirmDeletionPanel,modalClass:"small-modal-panel",title:"Confirm Deletion"},o.a.createElement("div",{className:"confirm-deletion-panel"},"Are you sure you want to delete ",this.state.objectToDelete.name,"?"),o.a.createElement("button",{className:"button",onClick:this.confirmDelete},"Delete")))}}]),t}(o.a.Component)),we=Object(v.a)(Ee),Ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchBoards=function(){E.a.get("/ws/dashboard").then(function(e){var t=e.data;a.setState({dashboards:t})})},a.handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.closeEditPanel=function(){a.setState({showEditPanel:!1,name:""})},a.save=function(){var e={name:a.state.name,style:{height:K,backgroundColor:"rgba(233, 235, 238, 1)"}};E.a.post("/ws/dashboard",e).then(function(e){var t=e.data;a.closeEditPanel(),a.fetchBoards(),a.props.history.push("/workspace/dashboard/".concat(t))}).catch(function(e){console.log(e)})},a.view=function(e){a.setState({activeDashboardId:e}),a.props.history.push("/workspace/dashboard/".concat(e))},a.onDashboardSave=function(e){a.fetchBoards()},a.onDashboardDelete=function(e){a.fetchBoards(),a.setState({activeDashboardId:0}),a.props.history.push("/workspace/dashboard")},a.state={searchValue:"",dashboards:[],showEditPanel:!1,activeDashboardId:0,name:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchBoards()}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.dashboards,n=void 0===a?[]:a,r=t.activeDashboardId,s=t.searchValue,l=[],i=function(t){var a=n[t],i=a.name,c=r===a.id?"dashboard-menu-item-active":"";(!s||s&&i.includes(s))&&l.push(o.a.createElement("div",{key:t,className:"dashboard-menu-item ellipsis ".concat(c),onClick:function(){return e.view(a.id)}},i))},c=0;c<n.length;c++)i(c);return o.a.createElement("div",null,o.a.createElement("div",{className:"dashboard-sidebar"},o.a.createElement("div",{style:{margin:"5px"}},o.a.createElement("button",{className:"button icon-button dashboard-add-button",onClick:function(){return e.setState({showEditPanel:!0})}},o.a.createElement(S.a,{icon:"plus"})," New"),o.a.createElement("input",{type:"text",name:"searchValue",value:this.state.searchValue,placeholder:"Search...",onChange:this.handleInputChange})),o.a.createElement("div",null,l)),o.a.createElement("div",{className:"dashboard-content"},o.a.createElement(p.a,{path:"/workspace/dashboard/:id",render:function(t){return o.a.createElement(we,{key:t.match.params.id,onDashboardSave:e.onDashboardSave,onDashboardDelete:e.onDashboardDelete})}})),o.a.createElement(P,{show:this.state.showEditPanel,onClose:function(){return e.setState({showEditPanel:!1})},modalClass:"small-modal-panel",title:"New"},o.a.createElement("div",null,o.a.createElement("label",{className:"form-label"},"Name"),o.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),o.a.createElement("button",{className:"button",onClick:this.save},"Save"))))}}]),t}(n.Component),ye=Object(v.a)(Ce),ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.dashboardEditView.loadViewByDashboardName()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"full-screen-view"},o.a.createElement(we,{wrappedComponentRef:function(t){return e.dashboardEditView=t}}))}}]),t}(o.a.Component),Oe=["developer","viewer"],je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleOptionChange=function(e,t){a.setState(Object(b.a)({},e,t))},a.handleIntegerOptionChange=function(e,t){var n=parseInt(t,10)||0;a.setState(Object(b.a)({},e,n))},a.fetchUsers=function(){E.a.get("/ws/user").then(function(e){var t=e.data;a.setState({users:t})})},a.fetchGroups=function(){E.a.get("/ws/group").then(function(e){var t=e.data;a.setState({groups:t})})},a.openEditPanel=function(e){null!==e?a.setState({id:e.id,username:e.username,name:e.name,tempPassword:"",sysRole:e.sysRole,userGroups:e.userGroups}):a.clearEditPanel(),a.setState({userGroupId:"",showEditPanel:!0})},a.closeEditPanel=function(){a.setState({showEditPanel:!1})},a.clearEditPanel=function(){a.setState(a.initialEditPanelState)},a.save=function(){var e=a.state,t=e.id,n=e.username,o=e.name,r=e.tempPassword,s={username:n,name:o,sysRole:e.sysRole,userGroups:e.userGroups};null!==t?(s.id=t,E.a.put("/ws/user",s).then(function(e){a.clearEditPanel(),a.closeEditPanel(),a.fetchUsers()})):(s.tempPassword=r,E.a.post("/ws/user",s).then(function(e){a.clearEditPanel(),a.closeEditPanel(),a.fetchUsers()}))},a.delete=function(e){E.a.delete("/ws/user/"+e).then(function(e){a.fetchUsers()})},a.addUserGroup=function(){var e=a.state,t=e.userGroupId,n=e.userGroups,o=void 0===n?[]:n;if(-1===o.findIndex(function(e){return e===t})){var r=Object(V.a)(o);r.push(t),a.setState({userGroups:r})}},a.removeUserGroup=function(e){var t=a.state.userGroups,n=void 0===t?[]:t,o=n.findIndex(function(t){return t===e});if(-1!==o){var r=Object(V.a)(n);r.splice(o,1),a.setState({userGroups:r})}},a.state={users:[],groups:[],searchValue:"",showEditPanel:!1,id:null,username:"",name:"",tempPassword:"",sysRole:"",userGroupId:"",userGroups:[]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchUsers(),this.fetchGroups()}},{key:"render",value:function(){for(var e,t=this,a=this.state,n=a.users,r=void 0===n?[]:n,s=a.groups,l=void 0===s?[]:s,i=a.userGroups,c=void 0===i?[]:i,u=r.map(function(e){return o.a.createElement("div",{key:e.id,className:"user-card"},o.a.createElement("p",null,e.username,e.name,e.sysRole,o.a.createElement("button",{className:"button",onClick:function(){return t.openEditPanel(e)}},"update"),o.a.createElement("button",{className:"button",onClick:function(){return t.delete(e.id)}},"delete")))}),d=[],h=function(e){for(var a=c[e],n=0;n<l.length;n++)if(a===l[n].id){d.push(o.a.createElement("div",{key:a},o.a.createElement("div",null,"Group: ",l[n].name),o.a.createElement("button",{className:"button",onClick:function(){return t.removeUserGroup(a)}},"delete")));break}},m=0;m<c.length;m++)h(m);return o.a.createElement("div",null,o.a.createElement("div",null,"User"),o.a.createElement("input",{type:"text",name:"searchValue",value:this.state.searchValue,onChange:this.handleInputChange,placeholder:"Search...",style:{width:"200px"}}),o.a.createElement("button",{className:"button",onClick:this.clearSearch},"Clear"),o.a.createElement("button",{className:"button",onClick:function(){return t.openEditPanel(null)}},o.a.createElement(S.a,{icon:"plus"})," New User"),o.a.createElement("div",{className:"row"},u),o.a.createElement(P,{show:this.state.showEditPanel,onClose:this.closeEditPanel,modalClass:"small-modal-panel",title:"User"},o.a.createElement("div",{className:"form-panel"},o.a.createElement("label",{className:"form-label"},"Username"),o.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Name"),o.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Temp password"),o.a.createElement("input",{type:"password",name:"tempPassword",value:this.state.tempPassword,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"System Role"),o.a.createElement(be,{name:"sysRole",value:this.state.sysRole,onChange:this.handleOptionChange,options:Oe}),o.a.createElement("br",null),o.a.createElement("label",{className:"form-label"},"Groups"),o.a.createElement(be,{name:"userGroupId",value:this.state.userGroupId,onChange:this.handleIntegerOptionChange,options:l,optionDisplay:"name",optionValue:"id"}),o.a.createElement("button",{className:"button",onClick:this.addUserGroup},"Add"),o.a.createElement("div",null,d),o.a.createElement("button",(e={className:"button"},Object(b.a)(e,"className","button"),Object(b.a)(e,"onClick",this.save),e),"Save"))))}},{key:"initialEditPanelState",get:function(){return{id:null,username:"",name:"",tempPassword:"",sysRole:"",userGroupId:"",userGroups:[]}}}]),t}(o.a.Component),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleIntegerOptionChange=function(e,t){var n=parseInt(t,10)||0;a.setState(Object(b.a)({},e,n))},a.fetchGroups=function(){E.a.get("/ws/group").then(function(e){var t=e.data;a.setState({groups:t})})},a.fetchDashboards=function(){E.a.get("/ws/dashboard").then(function(e){var t=e.data;a.setState({dashboards:t})})},a.openEditPanel=function(e){null!==e?a.setState({id:e.id,name:e.name,groupDashboards:e.groupDashboards}):a.clearEditPanel(),a.setState({groupDashboardId:"",showEditPanel:!0})},a.closeEditPanel=function(){a.setState({showEditPanel:!1})},a.clearEditPanel=function(){a.setState(a.initialEditPanelState)},a.save=function(){var e=a.state,t=e.id,n={name:e.name,groupDashboards:e.groupDashboards};null!==t?(n.id=t,E.a.put("/ws/group",n).then(function(e){a.clearEditPanel(),a.fetchGroups(),a.closeEditPanel()})):E.a.post("/ws/group",n).then(function(e){a.clearEditPanel(),a.fetchGroups(),a.closeEditPanel()})},a.delete=function(e){E.a.delete("/ws/group/"+e).then(function(e){a.fetchGroups()})},a.addGroupDashboard=function(){var e=a.state,t=e.groupDashboardId,n=e.groupDashboards,o=void 0===n?[]:n;if((console.log("addGroupDashboard",t),console.log("addGroupDashboard",o),t)&&-1===o.findIndex(function(e){return e===t})){var r=Object(V.a)(o);r.push(t),a.setState({groupDashboards:r})}},a.removeGroupDashboard=function(e){var t=a.state.groupDashboards,n=void 0===t?[]:t,o=n.findIndex(function(t){return t===e});if(-1!==o){var r=Object(V.a)(n);r.splice(o,1),a.setState({groupDashboards:r})}},a.state={groups:[],dashboards:[],showEditPanel:!1,searchValue:"",id:null,name:"",groupDashboardId:"",groupDashboards:[]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchGroups(),this.fetchDashboards()}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.id,n=t.groups,r=void 0===n?[]:n,s=t.dashboards,l=void 0===s?[]:s,i=t.groupDashboards,c=void 0===i?[]:i,u=null===a?"New":"Edit",d=r.map(function(t){return o.a.createElement("div",{key:t.id,className:"group-card"},o.a.createElement("p",null,t.name,o.a.createElement("button",{className:"button",onClick:function(){return e.openEditPanel(t)}},"update"),o.a.createElement("button",{className:"button",onClick:function(){return e.delete(t.id)}},"delete")))}),h=[],m=function(t){for(var a=c[t],n=0;n<l.length;n++)if(a===l[n].id){h.push(o.a.createElement("div",{key:a},o.a.createElement("div",null,"Name: ",l[n].name),o.a.createElement("button",{className:"button",onClick:function(){return e.removeGroupDashboard(a)}},"delete")));break}},p=0;p<c.length;p++)m(p);return o.a.createElement("div",null,o.a.createElement("input",{type:"text",name:"searchValue",value:this.state.searchValue,onChange:this.handleInputChange,placeholder:"Search...",style:{width:"200px"}}),o.a.createElement("button",{className:"button",onClick:this.clearSearch},"Clear"),o.a.createElement("button",{className:"button",onClick:function(){return e.openEditPanel(null)}},o.a.createElement(S.a,{icon:"plus"})," New Group"),o.a.createElement("div",{className:"row"},d),o.a.createElement(P,{show:this.state.showEditPanel,onClose:this.closeEditPanel,modalClass:"small-modal-panel",title:u},o.a.createElement("div",{className:"form-panel"},o.a.createElement("label",{className:"form-label"},"Name"),o.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Dashboards"),o.a.createElement(be,{name:"groupDashboardId",value:this.state.groupDashboardId,onChange:this.handleIntegerOptionChange,options:l,optionDisplay:"name",optionValue:"id"}),o.a.createElement("button",{className:"button",onClick:this.addGroupDashboard},"Add"),o.a.createElement("div",null,h),o.a.createElement("button",{className:"button",onClick:this.save},"Save"))))}},{key:"initialEditPanelState",get:function(){return{id:null,name:"",groupDashboardId:"",groupDashboards:[]}}}]),t}(o.a.Component),Ne=(a(833),[{link:"/workspace/user-management/group",value:"Group",icon:"fa-user-cog"},{link:"/workspace/user-management/user",value:"User",icon:"fa-users"}]),Se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleMenuClick=function(e){a.setState({currentMenuLink:e})},a.state={currentMenuLink:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){var n=Ne[a],r=e.state.currentMenuLink===n.link?"nav-menu-item-active":"";t.push(o.a.createElement("li",{className:r,key:a},o.a.createElement(k.a,{to:n.link,onClick:function(){return e.handleMenuClick(n.link)}},o.a.createElement(S.a,{icon:n.icon,fixedWidth:!0}),o.a.createElement("span",{className:"app-nav-menu-text"},n.value))))},n=0;n<Ne.length;n++)a(n);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("ul",{className:"nav-menu"},t)),o.a.createElement("div",null,o.a.createElement(m.a,null,o.a.createElement(p.a,{path:"/workspace/user-management/user",component:je}),o.a.createElement(p.a,{path:"/workspace/user-management/group",component:De}))))}}]),t}(o.a.Component),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.fetchUser=function(){E.a.get("/ws/user/account").then(function(e){e.data})},a.generateApiKey=function(){},a.save=function(){var e=a.state,t=e.showUpdatePassword,n=e.name,o=e.password,r=e.confirmedPassword,s={name:n};if(t){if(o!==r)return void alert("confirm password");s.password=o}},a.toggleUpdatePassword=function(){a.setState(function(e){return{showUpdatePassword:!e.showUpdatePassword}})},a.state={showUpdatePassword:!1,id:null,username:"",name:"",sysRole:"",apiKey:"",password:"",confirmedPassword:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this.state,t=e.showUpdatePassword,a=e.username,n=e.sysRole,r=e.apiKey;return o.a.createElement("div",null,o.a.createElement("div",null,"Account"),o.a.createElement("div",{className:"form-panel"},o.a.createElement("label",{className:"form-label"},"Username"),o.a.createElement("div",null,a),o.a.createElement("label",{className:"form-label"},"Name"),o.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"System Role"),o.a.createElement("div",null,n),o.a.createElement("label",{className:"form-label"},"API Key"),o.a.createElement("div",null,r),o.a.createElement("button",{className:"button",onClick:this.generateApiKey},"Generate new API Key"),o.a.createElement("br",null),o.a.createElement("button",{className:"button",onClick:this.toggleUpdatePassword},"Update password"),t?o.a.createElement(o.a.Fragment,null,o.a.createElement("br",null),o.a.createElement("label",{className:"form-label"},"Password"),o.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),o.a.createElement("label",{className:"form-label"},"Confirm Password"),o.a.createElement("input",{type:"password",name:"confirmedPassword",value:this.state.confirmedPassword,onChange:this.handleInputChange})):null,o.a.createElement("br",null),o.a.createElement("button",{className:"button",onClick:this.save},"Save")))}}]),t}(o.a.Component),xe=(a(834),[{link:"/workspace/dashboard",value:"Dashboard",icon:"chalkboard"},{link:"/workspace/datasource",value:"Data source",icon:"database"},{link:"/workspace/user-management",value:"User Management",icon:"users-cog"}]),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleMenuClick=function(e){a.setState({currentMenuLink:e})},a.state={currentMenuLink:"/workspace/dashboard",username:"",sysRole:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("Workspace - componentDidMount");var e=this.props.location.pathname;if(this.setState({currentMenuLink:e}),w.isAuthenticated){var t=w.sysRole;this.setState({sysRole:t})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentMenuLink,n=t.sysRole,r=[],s=[];s="viewer"===n?xe.filter(function(e){return"dashboard"===e.name||"account"===e.name}):xe;for(var l=function(t){var n=s[t],l=a===n.link?"menu-item-active":"";r.push(o.a.createElement("li",{key:n.link,className:l},o.a.createElement(k.a,{to:n.link,onClick:function(){return e.handleMenuClick(n.link)}},o.a.createElement(S.a,{icon:n.icon,fixedWidth:!0}),o.a.createElement("span",{className:"workspace-nav-menu-text"},n.value))))},i=0;i<s.length;i++)l(i);var c="/workspace/account"===a?"menu-item-active":"";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"workspace-nav"},o.a.createElement("div",{className:"workspace-name"},"Poli"),o.a.createElement("ul",{className:"workspace-nav-menu"},r),o.a.createElement("div",{className:"workspace-account-menu"},o.a.createElement("div",{className:"workspace-account-button inline-block ".concat(c)},o.a.createElement(k.a,{to:"/workspace/account",onClick:function(){return e.handleMenuClick("/workspace/account")}},o.a.createElement(S.a,{icon:"user",fixedWidth:!0}),o.a.createElement("span",{className:"workspace-nav-menu-text"},"Account"))),o.a.createElement("div",{className:"workspace-logout-button inline-block"},o.a.createElement(k.a,{to:"/login"},o.a.createElement(S.a,{icon:"sign-out-alt",fixedWidth:!0}))))),o.a.createElement("div",{className:"workspace-content"},o.a.createElement(m.a,null,o.a.createElement(p.a,{exact:!0,path:"/workspace/datasource",component:T}),o.a.createElement(p.a,{exact:!0,path:"/workspace/dashboard/view",component:ke}),o.a.createElement(p.a,{exact:!0,path:"/workspace/account",component:Pe}),o.a.createElement(p.a,{path:"/workspace/dashboard",component:ye}),o.a.createElement(p.a,{path:"/workspace/user-management",component:Se}))),o.a.createElement(M,null))}}]),t}(o.a.Component),Me=Object(v.a)(Ie),Te=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"PageNotFound"),o.a.createElement(k.a,{to:"/login"},"Login"))}}]),t}(o.a.Component),We=a(101),Ve=a(28);function Ue(e){var t=e.component,a=e.authenticated,n=Object(l.a)(e,["component","authenticated"]);return o.a.createElement(p.a,Object.assign({},n,{render:function(e){return!0===a?o.a.createElement(t,e):o.a.createElement(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}We.b.add(Ve.a,Ve.c,Ve.r,Ve.j,Ve.n,Ve.d,Ve.o,Ve.h,Ve.m,Ve.k,Ve.p,Ve.i,Ve.q,Ve.l,Ve.b,Ve.e,Ve.g,Ve.f);var Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("App - componentDidMount",w.isAuthenticated)}},{key:"render",value:function(){return console.log("App - render",w.isAuthenticated),o.a.createElement("div",{className:"app"},o.a.createElement(m.a,null,o.a.createElement(p.a,{exact:!0,path:"/",component:y}),o.a.createElement(p.a,{path:"/login",component:y}),o.a.createElement(Ue,{authenticated:w.isAuthenticated,path:"/workspace",component:Me}),o.a.createElement(p.a,{component:Te})))}}]),t}(o.a.Component),Fe=a(839);s.a.render(o.a.createElement(Fe.a,{basename:"/poli"},o.a.createElement(Re,null)),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.bba3d9c1.chunk.js.map